(function(e){function t(t){for(var a,i,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},s=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://cdn.statically.io/gh/laima-app/statics/1VNJXPcRqW3E/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"00fa":function(e,t,r){},"01a4":function(e,t,r){"use strict";r("80d8")},"01a6":function(e,t,r){"use strict";r("0902")},"0238":function(e,t,r){},"0378":function(e,t,r){"use strict";r("e11f")},"054b":function(e,t,r){},"06d6":function(e,t,r){},"07a4":function(e,t,r){"use strict";r("8e6e"),r("ac6a"),r("456d");var a=r("bd86"),n=r("a026"),s=r("2f62"),i=[],o={pages:{key:"title",data:[{title:"Home",url:"/",icon:"HomeIcon",is_bookmarked:!1},{title:"Settings",url:"/pages/settings",icon:"SettingsIcon",is_bookmarked:!1}]}},c=r("1dff"),l={appLocked:!1,nowSyncing:[],browserOK:!0,globalAlerts:{},globalMessage:null,stateLoading:!1,bodyOverlay:!1,inSync:!1,isVerticalNavMenuActive:!0,navbarSearchAndPinList:o,reduceButton:c["a"].sidebarCollapsed,verticalNavMenuWidth:"default",verticalNavMenuItemsMin:!1,scrollY:0,starredPages:o["pages"].data.filter((function(e){return e.is_bookmarked})),theme:"light",themePrimaryColor:c["a"].primary,screenLock:{defaultIdleTime:900,isSet:!1,isLocked:!1},windowWidth:null},u=l,d={windowBreakPoint:function(e){return e.windowWidth>=1200?"xl":e.windowWidth>=992?"lg":e.windowWidth>=768?"md":e.windowWidth>=576?"sm":"xs"}},p=(r("6762"),r("7f7f"),["info","warning","success","ok","error","critical","warn"]),f={REGISTER_ALERT:function(e,t){var r=[],a=t.name;a||r.push("`name` key is required"),delete t.name;var n=t.content;n||r.push("`content` key is required");var s=t.level;s||r.push("`level` key is required"),s&&!p.includes(s)&&r.push("'".concat(s,"' is not a recognized level name")),r[0]?console.warn("! Validation error registering global alert: ".concat(r.join(", "))):e.globalAlerts[a]={level:s,content:n}},UNSUPPORTED_BROWSER:function(e){e.browserOK=!1},DEREGISTER_ALERT:function(e,t){n["default"].delete(e.globalAlerts,t)},CLEAR_SYNCING_STACK:function(e){e.nowSyncing=[]},ADD_TO_SYNCING_STACK:function(e,t){e.nowSyncing.push(t)},TOGGLE_SYNC:function(e,t){e.inSync=t},UNLOCK_APP:function(e){e.appLocked=!1},LOCK_APP:function(e){e.appLocked=!0},STATE_LOADING_ON:function(e){e.stateLoading=!0},STATE_LOADING_OFF:function(e){e.stateLoading=!1},TOGGLE_IS_VERTICAL_NAV_MENU_ACTIVE:function(e,t){e.isVerticalNavMenuActive=!0},TOGGLE_REDUCE_BUTTON:function(e,t){e.reduceButton=t},UPDATE_VERTICAL_NAV_MENU_ITEMS_MIN:function(e,t){e.verticalNavMenuItemsMin=t},UPDATE_VERTICAL_NAV_MENU_WIDTH:function(e,t){e.verticalNavMenuWidth=t},TOGGLE_CONTENT_OVERLAY:function(e,t){e.bodyOverlay=t},UPDATE_THEME:function(e,t){e.theme=t},UPDATE_WINDOW_WIDTH:function(e,t){e.windowWidth=t},UPDATE_WINDOW_SCROLL_Y:function(e,t){e.scrollY=t},SET_GLOBAL_MESSAGE:function(e,t){e.globalMessage=t},SET_LOCK_SCREEN_IDLE_TIME:function(e,t){if(t){t=+t;var r="app.laima.screenLock.ttl";window.localStorage.setItem(r,t),n["default"].set(e.screenLock,"defaultIdleTime",t)}},LOCK_SCREEN:function(e){window.localStorage.setItem("app.laima.screenLock.on",!0),n["default"].set(e.screenLock,"isLocked",!0)},UNLOCK_SCREEN:function(e){window.localStorage.setItem("app.laima.screenLock.on",!1),n["default"].set(e.screenLock,"isLocked",!1)},ENABLE_SCREEN_LOCK:function(e){n["default"].set(e.screenLock,"isSet",!0),window.localStorage.setItem("app.laima.screenLock.isSet",!0)},DISABLE_SCREEN_LOCK:function(e){n["default"].set(e.screenLock,"isSet",!1),window.localStorage.setItem("app.laima.screenLock.isSet",!1)}},h=f,m=(r("96cf"),r("3b8d")),v={setupScreenLock:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,a=window.localStorage.getItem("app.laima.screenLock.isSet"),n=window.localStorage.getItem("app.laima.screenLock.ttl"),s=window.localStorage.getItem("app.laima.screenLock.on"),a&&JSON.parse(a)){e.next=8;break}return e.abrupt("return",r("DISABLE_SCREEN_LOCK"));case 8:JSON.parse(a)&&r("ENABLE_SCREEN_LOCK");case 9:s&&JSON.parse(s)&&r("LOCK_SCREEN"),n&&r("SET_LOCK_SCREEN_IDLE_TIME",JSON.parse(n));case 11:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),toggleNavbar:function(e,t){var r=e.commit;r("TOGGLE_REDUCE_BUTTON",!!t),r("TOGGLE_IS_VERTICAL_NAV_MENU_ACTIVE",!!t),r("UPDATE_VERTICAL_NAV_MENU_ITEMS_MIN",!!t),r("UPDATE_VERTICAL_NAV_MENU_WIDTH",t?"reduced":"default")},updateVerticalNavMenuWidth:function(e,t){var r=e.commit;r("UPDATE_VERTICAL_NAV_MENU_WIDTH",t)}},g=v,b=(r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("6b54"),r("768b")),_=(r("2fdb"),r("17e1"));function w(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function y(e,t){if(e){if("string"===typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var C=function(e){return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_["a"].sync.put({table_name:e,hashsum:"full",timestamp:(new Date).getTime()});case 2:case"end":return t.stop()}}),t)})))};function S(e,t){return{headers:t,data:{}}}var k={presync_visit:function(e,t){return{headers:t,data:{},query:{select:"id,doctor,comments,workspace,procedures,date,patient,schedule_slot"}}}},O={fullSync:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d,p,f,h,m,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.dispatch,n=t.commit,s=t.rootState,i=r.vm,o=r.toSync,n("CLEAR_SYNCING_STACK"),n("TOGGLE_SYNC",!0),c=["doctors"],l=w(o),e.prev=6,l.s();case 8:if((u=l.n()).done){e.next=26;break}return d=u.value,console.info("Syncing ".concat(d,"...")),n("ADD_TO_SYNCING_STACK",d),p={},f="list_".concat(d),f=i.spec[f]?f:"get_".concat(d),c.includes(d)&&(p["Overwrite"]=s.auth.selectedWorkspace.id),h="presync_".concat(d),m=Object.assign({no_loading:!0},(k[h]||S)(f,p)),m.query||(m.query={}),m.query["limit"]=500,e.next=22,i.requestResource(f,m);case 22:v=e.sent,200===v.status&&a("sync_".concat(d),[i,d,v.data.data||v.data,C(d)]);case 24:e.next=8;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](6),l.e(e.t0);case 31:return e.prev=31,l.f(),e.finish(31);case 34:n("TOGGLE_SYNC",!1);case 35:case"end":return e.stop()}}),e,null,[[6,28,31,34]])})));function t(t,r){return e.apply(this,arguments)}return t}(),sync_clinic:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=t.rootState,s=Object(b["a"])(r,4),s[0],i=s[1],o=s[2],c=s[3],l=_["a"][i],u=o.map((function(e){var t=e.id,r=n.auth.actorContext.workspaces;return e["name"]=r[t],e})),e.next=6,l.bulkPut(u);case 6:a("core/SET_CLINICS",u),c();case 8:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),sync_doctors:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=Object(b["a"])(r,4),n[0],s=n[1],i=n[2],o=n[3],c=_["a"][s],e.next=5,c.bulkPut(i);case 5:a("core/SAVE_DOCTORS",{payload:i}),o();case 7:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),sync_schedule:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.commit,a=Object(b["a"])(r,4),a[0],a[1],a[2],a[3];case 2:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},$={partial_patch_clinic:function(e,t){var r=e.commit,a=e.rootState,n=Object(b["a"])(t,3),s=(n[0],n[1]),i=n[2];console.log(s,i);var o=s.id,c=a.auth.actorContext.workspaces;i.name=c[o],r("core/PATCH_CLINIC",{clinicID:o,payload:i})},partial_post_clinic:function(e,t){var r=e.commit,a=e.rootState,n=Object(b["a"])(t,3),s=(n[0],n[1],n[2]),i=s.id,o=a.auth.actorContext.workspaces;s.name=o[i],r("core/ADD_CLINIC",s)}},E={partial_patch_doctors:function(e,t){var r=e.commit,a=(e.rootState,Object(b["a"])(t,3)),n=a[0],s=a[1],i=a[2],o=s.actor;r("core/UPDATE_DOCTOR",[o,i]),n.notifySuccess("Updated details of ".concat(o))},partial_post_doctors:function(e,t){var r=e.commit,a=Object(b["a"])(t,3),n=(a[0],a[1],a[2]);r("core/SAVE_DOCTORS",{payload:[n]})}};function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=T(T({},$),E),j=r("bb36"),A=r("4c95"),R={resourceLocked:!1,phoneVerificationNeeded:!1,pendingShieldedRequest:{},shieldedResponse:null,scopes:[],spec:null,availableWorkspaces:[],selectedWorkspace:{},actorContext:{},userContext:{},emailVerifRetryIn:60,passResetRetryIn:60,pendingEmail:"",passResetEmail:"",currency:"",userMissing:!1,actorContextLoading:!0,metaContextLoading:!0},P=(r("ffc1"),r("28a5"),document.createElement("a"));P.href="";var M="https://".concat(P.host),L={SET_NEEDED_PHONE_VERIF:function(e,t){e.phoneVerificationNeeded=t},SET_SHIELDED_RESPONSE:function(e,t){e.shieldedResponse=t},RESOURCE_LOCKED:function(e,t){e.resourceLocked=!0,e.pendingShieldedRequest=t},RESOURCE_UNLOCK:function(e){e.resourceLocked=!1,e.pendingShieldedRequest={}},SAVE_SCOPES:function(e,t){e.scopes=t},SAVE_ROLES:function(e,t){e.roles=t},SAVE_LOCALE:function(e,t){e.langs=(t.langs||"").split(","),e.stateCode=t.state,e.currency=t.currency},ADD_NEW_WORKSPACE:function(e,t){e.availableWorkspaces.push(t);var r=JSON.parse(localStorage.getItem("actorInfo"));r.workspaces[t.id]=t.name,localStorage.setItem("app.laima.actorInfo",JSON.stringify(r))},SET_AVAILABLE_WORKSPACES:function(e,t){e.availableWorkspaces=Object.entries(t).map((function(e){var t=Object(b["a"])(e,2),r=t[0],a=t[1];return{name:a,id:r}}))},SET_CURRENT_WORKSPACE:function(e,t){e.selectedWorkspace=t},SET_USER_CONTEXT:function(e,t){e.userContext=t},SET_ACTOR_CONTEXT:function(e,t){e.actorContext=t},SET_ACTOR_LOADING:function(e,t){e.actorContextLoading=t},SET_META_LOADING:function(e,t){e.metaContextLoading=t},SET_CURRENT_SPEC_HASHSUM:function(e,t){e.localSpecHashsum=t},SET_CURRENT_SPEC:function(e,t){var r=Object.fromEntries(Object.entries(t).map((function(e){var t=Object(b["a"])(e,2),r=t[0],a=t[1],n=r.split(":"),s=Object(b["a"])(n,2),i=s[0],o=s[1];return["".concat(o,"_").concat(i),{method:o,url:M+a.url,authed:a.authed,schema:a.schema.properties,required:a.schema.required||[]}]})));e.spec=r},EMAIL_VERIFICATION_SENT:function(e,t){t&&(e.pendingEmail=t.email),e.emailVerifRetryIn=60},EMAIL_VERIF_BACKOFF_DECR:function(e){e.emailVerifRetryIn>=0||!e.pendingEmail||e.emailVerifRetryIn--},PASSWORD_RESET_LINK_SENT:function(e,t){t&&(e.passResetEmail=t)},PASS_RESET_BACKOFF_DECR:function(e){e.passResetRetryIn>=0||!e.passResetEmail||e.passResetRetryIn--},USER_MISSING:function(e,t){e.userMissing=t},UPDATE_ACTOR_CONTEXT:function(e,t){var r=Object.assign(e.actorContext,t);e.actorContext=r,localStorage.setItem("app.laima.actorInfo",JSON.stringify(r))},UPDATE_USER_CONTEXT:function(e,t){var r=Object.assign(e.userContext,t);e.userContext=r;var a=JSON.parse(localStorage.getItem("app.laima.metaContext"));a.user=r,localStorage.setItem("app.laima.metaContext",JSON.stringify(a))}},N=r("75fc"),H=r("9c48"),U=r("41cb"),F=r("d3e3");function V(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=q(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function q(e,t){if(e){if("string"===typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var W=H["a"].methods.sleep,Y={login:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=t.state,s=t.dispatch,i=Object(b["a"])(r,2),o=i[0],c=i[1],a("STATE_LOADING_ON",{},{root:!0}),e.next=5,j["a"].post("/api/actor/login/",JSON.stringify(o.userDetails),{headers:{Range:"post"}});case 5:if(l=e.sent,u=l.data.workspaces,a("STATE_LOADING_OFF",{},{root:!0}),409!==l.status){e.next=13;break}return a("SET_AVAILABLE_WORKSPACES",u),e.abrupt("return",o.slider.slideNext());case 13:(422===l.status||403===l.status)&&(d=l.data);case 14:if(!d){e.next=22;break}if(a("STATE_LOADING_OFF",{},{root:!0}),o.notifyError(d),!(n.availableWorkspaces.length>1)){e.next=21;break}return e.next=20,W(1.5);case 20:location.reload();case 21:return e.abrupt("return");case 22:s("setActorContext",[l.data,"full-meta",c]),s("setupScreenLock",{},{root:!0}),a("STATE_LOADING_OFF",{},{root:!0}),F["a"].$emit("login",{});case 26:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),updateUserContext:function(e,t){var r=e.commit,a=JSON.parse(localStorage.getItem("app.laima.metaContext"));a.user=t,localStorage.setItem("app.laima.metaContext",JSON.stringify(a)),r("SET_USER_CONTEXT",t)},setMetaContext:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d,p,f,h,m,v,g,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,n=t.dispatch,s=Object(b["a"])(r,2),i=s[0],o=s[1],c=i.user,l=i.roles,u=i.scopes,d=i.state,p=i.currency,f=i.langs,h=i.spec_hashsum,!i.spec){e.next=9;break}m=i.spec,localStorage.setItem("app.laima.specHashsum",h),localStorage.setItem("app.laima.spec",JSON.stringify(m)),e.next=16;break;case 9:e.prev=9,m=JSON.parse(localStorage.getItem("app.laima.spec")),e.next=16;break;case 13:return e.prev=13,e.t0=e["catch"](9),e.abrupt("return",A["a"].logOut({reason:"Relogging..."}));case 16:if(n("setAPISpec",{spec:m,hashsum:h}),a("SET_USER_CONTEXT",c),a("SAVE_SCOPES",u),a("SAVE_ROLES",l),a("SAVE_LOCALE",{langs:f,state:d,currency:p}),a("SET_META_LOADING",!1),i.full_sync&&n("fullSync",{vm:o,toSync:i.full_sync},{root:!0}),!i.partial_sync){e.next=48;break}v=V(i.partial_sync),e.prev=25,v.s();case 27:if((g=v.n()).done){e.next=40;break}return _=g.value,e.prev=29,_=JSON.parse(_),e.next=33,o.syncManager.processPartialUpdate(_);case 33:e.next=38;break;case 35:e.prev=35,e.t1=e["catch"](29),console.error(e.t1);case 38:e.next=27;break;case 40:e.next=45;break;case 42:e.prev=42,e.t2=e["catch"](25),v.e(e.t2);case 45:return e.prev=45,v.f(),e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[9,13],[25,42,45,48],[29,35]])})));function t(t,r){return e.apply(this,arguments)}return t}(),setActorContext:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d,p,f,h,m,v,g,w,y,x;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,n=t.dispatch,s=Object(b["a"])(r,4),i=s[0],o=s[1],c=s[2],l=s[3],localStorage.setItem("app.laima.actorInfo",JSON.stringify(i)),u=i.active_workspace,a("SET_ACTOR_CONTEXT",i),a("SET_AVAILABLE_WORKSPACES",i.workspaces),a("SET_CURRENT_WORKSPACE",{id:u,name:i.workspaces[u]}),a("SET_ACTOR_LOADING",!1),"no-meta"!==o){e.next=10;break}return e.abrupt("return");case 10:return d=localStorage.getItem("app.laima.specHashsum"),e.next=13,_["a"].sync.toArray();case 13:if(p=e.sent,f=["spec_hashsum=".concat(d||"unset")],"meta-sync"===o&&f.push("mode=".concat("sync-only")),!p[0]){e.next=24;break}return e.next=19,_["a"].sync.toArray();case 19:h=e.sent,h=h.map((function(e){var t=e.table_name,r=e.hashsum,a=e.timestamp;return"".concat(t,"=").concat(r,",").concat(a/1e3)})),f.push.apply(f,Object(N["a"])(h)),m=c.syncManager.fingerprint,f.push("device=".concat(m));case 24:return e.next=26,j["a"].get("/api/doc/meta/?"+f.join("&"));case 26:if(v=e.sent,g=v.status,w=v.data,200!==g||w.authed){e.next=31;break}return e.abrupt("return",A["a"].logOut({reason:"Relogging..."}));case 31:if([200,204,416].includes(g)){e.next=33;break}return e.abrupt("return");case 33:416===g?l&&(l=Object.assign(l,w),w=l):204===g&&l&&(w=l),F["a"].$emit("login",{}),y=JSON.parse(localStorage.getItem("app.laima.metaContext")||"{}"),Object.assign(y,w),x=Object.assign({},y),delete x.full_sync,delete x.partial_sync,localStorage.setItem("app.laima.metaContext",JSON.stringify(x)),n("setMetaContext",[y,c]);case 42:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),setAPISpec:function(e,t){var r=e.commit,a=t.hashsum,n=t.spec;r("SET_CURRENT_SPEC_HASHSUM",a),r("SET_CURRENT_SPEC",n)},registerUser:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=Object(b["a"])(r,2),s=n[0],i=n[1],a("STATE_LOADING_ON",{},{root:!0}),o=s.isInvited?"/api/actor/?inv=".concat(s.isInvited):"/api/actor/",e.next=6,j["a"].post(o,JSON.stringify(s.userDetails),{headers:{Range:"post"}});case 6:if(c=e.sent,a("STATE_LOADING_OFF",{},{root:!0}),422!==c.status){e.next=13;break}return l=c.data,e.abrupt("return",Object.entries(l).forEach((function(e){var t=Object(b["a"])(e,2),r=t[0],a=t[1];a.forEach((function(e){s.errors.add({field:r,msg:e})}))})));case 13:409===c.status?(l=c.data,U["a"].push("/")):200!==c.status&&(l=c.data);case 14:if(!l){e.next=16;break}return e.abrupt("return",i.notifyError(l));case 16:if(200!==c.status){e.next=29;break}return i.notifySuccess(i.$t("notifs.registered_text")),a("EMAIL_VERIFICATION_SENT",s.userDetails),e.next=21,W(1.5);case 21:if(!c.data.needs_phone_ver){e.next=28;break}return e.next=24,j["a"].post("/api/actor/activate/phone/send/",JSON.stringify({phone:s.userDetails.phone}),{headers:{Range:"post"}});case 24:if(u=e.sent,!(u.status>=400)){e.next=27;break}return e.abrupt("return",i.notifyError("Apologies, we could not complete this operation. Contact our Technical Support of try again later."));case 27:return e.abrupt("return",a("SET_NEEDED_PHONE_VERIF",!0));case 28:U["a"].push("/");case 29:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),changeWorkspace:function(e,t){var r=e.state,a=e.commit;a("SET_CURRENT_WORKSPACE",t),n["default"].set(r.actorContext,"active_workspace",t.id),localStorage.setItem("app.laima.actorInfo",JSON.stringify(r.actorContext)),window.location.reload()}},z={shieldMethod:function(e){try{return e.pendingShieldedRequest.data.method}catch(t){return null}},shieldCause:function(e){try{return e.pendingShieldedRequest.data.cause}catch(t){return null}},getUserContext:function(e){var t=e.userContext||{};if(Object.keys(t)[0]){var r=Object.assign({},t);return r.fullname=r.name+" "+r.last_name,delete r.name,delete r.last_name,r}},workspaceIdToName:function(e){return Object.fromEntries(e.availableWorkspaces.map((function(e){return[e.id,e.name]})))},heldRoles:function(e){return e.actorContext.roles},heldScope:function(e){return e.actorContext.scope},currencyFormat:function(e){return new Intl.NumberFormat("".concat(e.langs[0],"-").concat(e.stateCode),{style:"currency",currency:e.currency})}},G={namespaced:!0,state:R,mutations:L,actions:Y,getters:z},K={interimEvents:[],loadingSlots:[],schedulerSlots:{},plannerSlots:{},plannerOutliers:{},schedulerBreakSlots:{},selectedSlotDetails:{},businessHours:{},clinics:[],currentDate:new Date,docs:{},calendarActiveDoctor:null,calendarMode:"scheduler",scheduleMetaMap:{},addClinicPrompt:!1,addSlotPrompt:!1,viewSlotPrompt:!1,scheduleLoading:!1,clinicProcedures:[],procedureTemplates:null,monthlyHeatmapSlots:{},heatMapLoading:!0,patientSearchbarLoading:!1,searchedPatients:[],searchedPatientSlots:[],filteredPatient:null,emptyTimeframe:!1,patients:[],interimPatient:null,textStatuses:[]};r("7514"),r("20d6");function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t){return e.setDate(e.getDate()+t),e}function Z(e){var t=Object.entries(e.business_hours).filter((function(e){var t=Object(b["a"])(e,2),r=(t[0],t[1]);return r[0]}));return e.business_hours=Object.fromEntries(t),e}var ee={ADD_LOADING_SLOT:function(e,t){var r=Object(b["a"])(t,3),a=r[0],n=r[1],s=r[2],i={start:a,end:n,split:s,draggable:!1,resizable:!1,class:"slot-loading",background:!0};e.loadingSlots.push(i)},SET_HEATMAP_LOADING:function(e,t){e.heatMapLoading=t},SET_MONTHLY_HEATMAP:function(e,t){var r=Object(b["a"])(t,2),a=r[0],s=r[1];n["default"].set(e.monthlyHeatmapSlots,a,s)},REMOVE_LOADING_SLOT:function(e){e.loadingSlots=[]},ADD_PLANNER_SLOT:function(e,t){var r=t.doctorID;e.plannerSlots[r]||n["default"].set(e.plannerSlots,r,[]),e.plannerSlots[r].push(t)},ADD_PLANNER_OUTLIER:function(e,t){var r=t.doctorID;e.plannerOutliers[r]||n["default"].set(e.plannerOutliers,r,[]),t.draggable=!1,t.resizable=!1,e.plannerOutliers[r].push(t)},ADD_SCHEDULER_OUTLIER:function(e,t){var r=t.doctorID;e.schedulerOutliers[r]||n["default"].set(e.schedulerOutliers,r,[]),t.draggable=!1,t.resizable=!1,e.schedulerOutliers[r].push(t)},ADD_SCHEDULER_SLOT:function(e,t){var r=t.doctorID;e.schedulerSlots[r]||n["default"].set(e.schedulerSlots,r,[]),t.draggable=!0,t.class="main",e.schedulerSlots[r].push(t)},ADD_SCHEDULER_BREAK_SLOT:function(e,t){var r=t.doctorID;e.schedulerBreakSlots[r]||n["default"].set(e.schedulerBreakSlots,r,[]),t.resizable=!1,e.schedulerBreakSlots[r].push(t)},UPDATE_OUTLIERS_PER_DOCTOR:function(e,t){var r=Object(b["a"])(t,2),a=r[0],s=r[1];n["default"].set(e.schedulerOutliers,a,s)},UPDATE_OUTLIERS:function(e,t){e.schedulerOutliers=t},CLEAR_ALL_SLOTS:function(e){e.schedulerSlots={},e.schedulerBreakSlots={},e.schedulerOutliers={},e.scheduleMetaMap={},e.plannerSlots={},e.plannerOutliers={}},MAKE_SCHEDULE:function(e,t){var r=t.doctorID;e.plannerSlots[r]||n["default"].set(e.plannerSlots,r,[]),e.plannerSlots[r].push(t)},UPDATE_CURRENT_DATE:function(e,t){e.currentDate=t},REMOVE_SCHEDULE:function(e,t){var r=Object(b["a"])(t,3),a=r[0],s=r[1],i=r[2],o=e.plannerSlots[a][s].id;n["default"].delete(e.plannerSlots[a],s);var c=e.scheduleMetaMap[a].findIndex((function(e){return e.scheduleID===o}));if(c&&n["default"].delete(e.scheduleMetaMap[a],c),i){var l=e.schedulerSlots[a].filter((function(e){return e.scheduleID!==o}));n["default"].set(e.schedulerSlots,a,l)}var u=e.schedulerBreakSlots[a]||[],d=u.filter((function(e){return e.scheduleID!==o}));n["default"].set(e.schedulerBreakSlots,a,d);var p=e.schedulerOutliers[a]||[],f=p.filter((function(e){return e.scheduleID!==o}));n["default"].set(e.schedulerOutliers,a,f)},REMOVE_SCHEDULE_BREAK:function(e,t){var r=Object(b["a"])(t,2),a=r[0],s=r[1];e.schedulerBreakSlots[a].forEach((function(t,r){if(t.id===s)return n["default"].delete(e.schedulerBreakSlots[a],r)}))},REMOVE_SCHEDULE_SLOT:function(e,t){var r=Object(b["a"])(t,3),a=r[0],s=r[1],i=r[2];a?e.schedulerSlots[a].forEach((function(t,r){if(t.id===s)return i&&(i.slot=t),n["default"].delete(e.schedulerSlots[a],r)})):Object.entries(e.schedulerSlots).forEach((function(t){var r=Object(b["a"])(t,2),a=r[0],o=r[1];o.forEach((function(t,r){if(t.id===s)return i&&(i.slot=t),n["default"].delete(e.schedulerSlots[a],r)}))}))},SET_BUSINESS_HOURS:function(e,t){var r=Object(b["a"])(t,2),a=r[0],n=r[1];e.businessHours=Object.fromEntries(Object.entries(a).map((function(e){var t=Object(b["a"])(e,2),r=t[0],a=t[1],s=n.clone();Q(s,parseInt(r));var i=a.map((function(e){var t=e.split(":"),r=Object(b["a"])(t,2),a=r[0],n=r[1],i=s.clone();return i.setHours(a),i.setMinutes(n),i})),o=Object(b["a"])(i,2),c=o[0],l=o[1];return[s,[c,l]]})))},UPDATE_SCHEDULE_META_MAP:function(e,t){var r=t.date,a=t.doctorID,s=t.scheduleID,i=t.scheduleDuring,o=t.businessHours;e.scheduleMetaMap[a]||n["default"].set(e.scheduleMetaMap,a,[]),e.scheduleMetaMap[a].push({date:r,scheduleID:s,scheduleDuring:i,businessHours:o})},SAVE_DOCTORS:function(e,t){var r=t.payload;r.forEach((function(t){var r=t.actor;n["default"].set(e.docs,r,t)}))},UPDATE_DOCTOR:function(e,t){var r=Object(b["a"])(t,2),a=r[0],s=r[1],i=Object.assign(e.docs[a],s);n["default"].set(e.docs,a,i)},SET_ACTIVE_DOCTOR:function(e,t){e.calendarActiveDoctor=t},SET_CALENDAR_MODE:function(e,t){e.calendarMode=t},SET_INTERIM_SLOT:function(e,t){e.interimEvents.push(t)},SET_PATIENT_SEARCHBAR_LOADING:function(e,t){e.patientSearchbarLoading=t},RESET_INTERIM_SLOT:function(e){e.interimEvents=[]},SET_SCHEDULE_LOADING:function(e,t){e.scheduleLoading=t},CONFIRM_SLOT_STATUS:function(e,t){var r=Object(b["a"])(t,2),a=r[0],s=r[1],i=e.schedulerSlots[a].findIndex((function(e){return e.id==s})),o=e.schedulerSlots[a][i];o.status="confirmed",n["default"].set(e.schedulerSlots[a],i,o)},SET_ADD_SLOT_PROMPT:function(e,t){e.addSlotPrompt=!!t,t||(e.interimEvents=[])},SET_VIEW_SLOT_PROMPT:function(e,t){e.viewSlotPrompt=t},SET_SLOT_DETAILS:function(e,t){t.during=t.during.map((function(e){return new Date(e)})),e.selectedSlotDetails=t},UPDATE_SLOT_DETAILS:function(e,t){Object.assign(e.selectedSlotDetails,t)},UPDATE_INTERIM_SLOT:function(e,t){var r=Object.assign(e.interimEvents[0]||{},t);e.interimEvents=[r]},UPDATE_SCHEDULE_DURATION:function(e,t){var r=Object(b["a"])(t,3),a=r[0],s=r[1],i=r[2],o=e.plannerSlots[a].findIndex((function(e){return e.id===s}));n["default"].set(e.plannerSlots[a][o],"end",i)},ADD_CLINIC:function(e,t){e.clinics.push(Z(t))},SET_CLINICS:function(e,t){t=t.map(Z),e.clinics=t},SHOW_CLINIC_PROMPT:function(e){e.addClinicPrompt=!0},HIDE_CLINIC_PROMPT:function(e){e.addClinicPrompt=!1},PATCH_CLINIC:function(e,t){var r=t.clinicID,a=t.payload,s=e.clinics.findIndex((function(e){return e.id==r})),i=e.clinics[s];n["default"].set(e.clinics,s,Object.assign(i,a))},DELETE_CLINIC:function(e,t){e.clinics=e.clinics.filter((function(e){return e.name!==t}))},SET_PROCEDURE_TEMPLATES:function(e,t){e.procedureTemplates=t,localStorage.setItem("app.laima.procedureTemplates",JSON.stringify(e.procedureTemplates))},SET_CLINIC_PROCEDURES:function(e,t){var r=Object(b["a"])(t,1),a=r[0];e.clinicProcedures=a},APPEND_CLINIC_PROCEDURE:function(e,t){var r=Object(b["a"])(t,1),a=r[0];e.clinicProcedures.push(a)},UPDATE_CLINIC_PROCEDURE:function(e,t){var r=Object(b["a"])(t,3),a=r[0],s=r[1],i=r[2],o=e.clinicProcedures.findIndex((function(e){return e.id===a}));n["default"].set(e.clinicProcedures[o],s,i)},REMOVE_CLINIC_PROCEDURE:function(e,t){var r=Object(b["a"])(t,1),a=r[0],s=e.clinicProcedures.findIndex((function(e){return e.id===a}));n["default"].delete(e.clinicProcedures,s)},SET_SEARCHED_PATIENTS:function(e,t){e.searchedPatients=t},SET_SEARCHED_PATIENT_SLOTS:function(e,t){e.searchedPatientSlots=t},RESET_SEARCHED_PATIENT_SLOTS:function(e){e.searchedPatientSlots=[]},SELECT_FILTERED_PATIENT:function(e,t){e.filteredPatient=e.searchedPatients.find((function(e){return e.id==t}))},SET_FILTERED_PATIENT:function(e,t){e.filteredPatient=t},RESELECT_FILTERED_PATIENT:function(e){e.filteredPatient=null},RESET_INTERIM_PATIENT:function(e){e.interimPatient=null},SET_EMPTY_TIMEFRAME:function(e,t){e.emptyTimeframe=t},SET_PATIENTS:function(e,t){e.patients=t},SET_INTERIM_PATIENT:function(e,t){e.interimPatient=t},ADD_PATIENT:function(e,t){e.patients.push(t)},UPDATE_PATIENT:function(e,t){var r=Object(b["a"])(t,2),a=r[0],s=r[1],i=e.patients.findIndex((function(e){return e.id===a})),o=Object.assign(e.patients[i],s);n["default"].set(e.patients,i,o)},SAVE_SMS_STATUSES:function(e,t){e.textStatuses=t.map((function(e){return X(X({},e),{},{date:new Date(e.date)})}))}},te=(r("4917"),{removeBreak:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d,p,f,h,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.state,n=t.commit,s=Object(b["a"])(r,2),i=s[0],o=s[1],c=i.doctorID,l=i.id,u=i.scheduleID,d=a.schedulerBreakSlots[c],p=d.filter((function(e){return e.scheduleID===u&&e.id!==l})),f=p.map((function(e){return[e.start,e.end].map((function(e){return new Date(e).format("HH:mm")}))})),h={select:{id:u},payload:{gaps:f}},e.next=9,o.requestResource("put_schedule",{vm:o,data:h});case 9:m=e.sent,200===m.status?(o.notifySuccess(o.$t("notifs.break_removed")),n("REMOVE_SCHEDULE_BREAK",[c,l])):o.notifyError(o.$t("notifs.break_remove_failed"));case 11:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),removeProcedure:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=Object(b["a"])(r,2),s=n[0],i=n[1],e.next=4,s.requestResource("delete_clinicprocedure",{data:{id:i.id},vm:s});case 4:if(o=e.sent,c=!1,422!==o.status){e.next=15;break}if(!o.data.id[0].match("still referenced")){e.next=14;break}return e.next=10,s.requestResource("patch_clinicprocedure",{data:{select:{id:i.id},payload:{hidden:!0}},vm:s});case 10:l=e.sent,200===l.status&&(a("UPDATE_CLINIC_PROCEDURE",[i.id,"hidden",!0]),c=!0),e.next=15;break;case 14:return e.abrupt("return",s.notifyError(s.$t("notifs.procedure_deleted_failed")));case 15:200===o.status&&(c=!0),c&&(s.notifySuccess(s.$t("notifs.procedure_deleted",{name:i.name})),a("REMOVE_CLINIC_PROCEDURE",[i.id]));case 17:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),removeSchedule:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d,p,f,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.state,n=t.commit,s=Object(b["a"])(r,3),i=s[0],o=s[1],c=s[2],l=i.doctorID,u=i.id,d=a.plannerSlots[l].findIndex((function(e){return e.id===u})),p=a.plannerSlots[l][d],!(p.start<new Date)){e.next=7;break}return e.abrupt("return",o.notifyError(o.$t("notifs.no_expired_schedules_removed")));case 7:return f={id:u},e.next=10,o.requestResource("delete_schedule",{data:f});case 10:h=e.sent,204===h.status?(o.emitSchedulerUpdate(),o.notifySuccess(o.$t("notifs.schedule_deleted")),n("REMOVE_SCHEDULE",[l,d,c])):o.notifyError(o.$t("notifs.schedule_removal_failed"));case 12:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),cancelAppointment:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,n=Object(b["a"])(r,2),s=n[0],i=n[1],o=s.doctorID,c=s.id,l=s.start,!(l<new Date)){e.next=5;break}return e.abrupt("return",i.notifyError(i.$t("notifs.no_cancel_expired_visits")));case 5:return u={id:c},e.next=8,i.requestResource("delete_scheduleslot",{data:u});case 8:d=e.sent,200===d.status?(i.notifySuccess(i.$t("notifs.visit_canceled")),a("REMOVE_SCHEDULE_SLOT",[o,c])):i.notifyError(i.$t("notifs.visit_cancel_failed"));case 10:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()}),re={createBreak:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d,p,f,h,m,v,g,_,w,y,x,C,S,k;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.state,n=t.commit,s=Object(b["a"])(r,4),i=s[0],o=s[1],c=s[2],l=s[3],u=i.doctorID,d=i.start,p=i.id,f=d.format("DD-MM"),h=o.clone().addMinutes(c),m=o.getTime(),v=h.getTime(),g=a.schedulerBreakSlots[u]||[],_=g.filter((function(e){return e.start.format("DD-MM")===f})),w=_.map((function(e){return[e.start,e.end].map((function(e){return new Date(e).format("HH:mm")}))})),y=_.every((function(e){var t=e.start.getTime(),r=e.end.getTime();return m<t&&v<=t||m>=r&&v>r})),y){e.next=14;break}return e.abrupt("return",l.notifyError(l.$t("notifs.cannot_overlap")));case 14:if(x=a.schedulerSlots[u].filter((function(e){return e.start.format("DD-MM")===f})).every((function(e){var t=e.start.getTime(),r=e.end.getTime();return m<t&&v<=t||m>=r&&v>r})),x){e.next=17;break}return e.abrupt("return",l.notifyError(l.$t("overlapMessages.main")));case 17:return w.push([o.format("HH:mm"),h.format("HH:mm")]),C={select:{id:p},payload:{gaps:w}},e.next=21,l.requestResource("put_schedule",{vm:l,data:C});case 21:S=e.sent,200===S.status?(k={doctorID:u,scheduleID:p,end:h,class:"lunch",start:o},n("ADD_SCHEDULER_BREAK_SLOT",k),l.notifySuccess(l.$t("notifs.new_schedule_break",{timeStart:o.format("HH:mm")}))):l.notifyError(l.$t("notifs.new_schedule_break_failed"));case 23:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),createSchedule:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d,p,f,h,m,v,g,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.state,n=t.commit,s=Object(b["a"])(r,4),i=s[0],o=s[1],c=s[2],l=s[3],u=i.doctorID,d=o.clone(),d.setHours(0),d.setMinutes(0),p=o.clone().addMinutes(c),f=Object(b["a"])(a.businessHours[d],2),h=f[0],m=f[1],!(o<new Date)){e.next=10;break}return e.abrupt("return",l.notifyError(l.$t("notifs.no_schedules_in_past")));case 10:if(!(o<h)){e.next=12;break}return e.abrupt("return",l.notifyError(l.$t("notifs.no_schedule_before_opening")));case 12:if(!(p>m)){e.next=14;break}return e.abrupt("return",l.notifyError(l.$t("notifs.no_schedule_after_closure")));case 14:return v={doctor:u,date:o.format("YYYY-MM-DD"),during:[o.format("YYYY-MM-DD HH:mm".concat(l.timezoneOffset)),p.format("YYYY-MM-DD HH:mm".concat(l.timezoneOffset))]},e.next=17,l.requestResource("post_schedule",{vm:l,data:v});case 17:g=e.sent,200===g.status?(_=g.data.id,l.notifySuccess(l.$t("notifs.new_schedule",{date:v.date})),n("MAKE_SCHEDULE",{doctorID:u,id:_,class:"schedule",end:p,start:o}),l.emitSchedulerUpdate()):l.notifyError(l.$t("notifs.new_schedule_failed"));case 19:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),addNewProcedure:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=Object(b["a"])(r,2),s=n[0],i=n[1],o=s.name,c=s.category,delete s.name,delete s.category,e.next=7,i.requestResource("post_proceduretemplate",{data:{name:o,category:c},vm:i,loadingIn:".laima-form"});case 7:if(l=e.sent,200!==l.status){e.next=22;break}return s.template=l.data.code,e.next=12,i.requestResource("post_clinicprocedure",{data:s,vm:i,loadingIn:".laima-form"});case 12:if(u=e.sent,200!==u.status){e.next=22;break}return s.id=u.data.id,s.name=o,s.category=c,s.legacy=!1,s.hidden=!1,a("APPEND_CLINIC_PROCEDURE",[s]),i.closeSideBar(),e.abrupt("return",i.notifySuccess(i.$t("notifs.procedure_added",{name:o})));case 22:return e.abrupt("return",i.notifyError(i.$t("notifs.procedure_added_failed")));case 23:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()};function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var se={category:function(e){return{msg:e}},date:function(e){return{msg:e.format("DD/MM/YYYY HH:mm")}},doctor:function(e){return{name:e.name,last_name:e.last_name}},during:function(e){return{msg:e/60}},start:function(e){return{msg:e.format("HH:mm")}},end:function(e){return{msg:e.format("HH:mm")}},default:function(){}},ie={editClinic:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=Object(b["a"])(r,4),s=n[0],i=n[1],o=n[2],c=n[3],l={select:{id:i},payload:o},e.next=5,s.requestResource("patch_clinic",{vm:s,data:l});case 5:if(u=e.sent,200!==u.status){e.next=13;break}return a("PATCH_CLINIC",{clinicID:i,payload:o}),e.next=10,_["a"].clinic.where({id:i}).modify(o);case 10:c(),e.next=14;break;case 13:s.$notifyError(s.$t("notifs.clinic_update_failed"));case 14:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),resizeSlot:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d,p,f,h,m,v,g,_,w,y,x,C,S,k,O,$;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,n=t.state,s=Object(b["a"])(r,2),i=s[0],o=s[1],c=i.event,l=i.oldDate,u=c.id,d=c.doctorID,p=new Date(c.start),f=new Date(c.end),h=p.getTime(),m=f.getTime(),v=ne(ne({},c),{},{start:p,end:l}),!(l<new Date)){e.next=14;break}return a("REMOVE_SCHEDULE_SLOT",[d,u]),a("ADD_SCHEDULER_SLOT",v),e.abrupt("return",o.notifyError(o.$t("notifs.visit_in_the_past")));case 14:if(g=n.schedulerSlots[d].every((function(e){if(e.id===u)return!0;var t=e.start.getTime(),r=e.end.getTime();return h<t&&m<=t||h>=r&&m>r})),g){e.next=19;break}return o.notifyError(o.$t("notifs.visit_would_overlap")),a("REMOVE_SCHEDULE_SLOT",[d,u]),e.abrupt("return",a("ADD_SCHEDULER_SLOT",v));case 19:if(_=n.schedulerBreakSlots[d]||[],w=_.every((function(e){if(e.id===u)return!0;var t=e.start.getTime(),r=e.end.getTime();return h<t&&m<=t||h>=r&&m>r})),w){e.next=25;break}return o.notifyError(o.$t("notifs.cannot_overlap_with_break")),a("REMOVE_SCHEDULE_SLOT",[d,u]),e.abrupt("return",a("ADD_SCHEDULER_SLOT",v));case 25:return y=[p.format("YYYY-MM-DD HH:mm".concat(o.timezoneOffset)),f.format("YYYY-MM-DD HH:mm".concat(o.timezoneOffset))],x={select:{id:u},payload:{during:y}},e.next=29,o.requestResource("put_scheduleslot",{vm:o,data:x});case 29:C=e.sent,a("REMOVE_SCHEDULE_SLOT",[d,u]),200===C.status?(a("ADD_SCHEDULER_SLOT",ne(ne({},v),{},{end:f})),S=se.end(f),k=o.$t("slot_edit_msgs.end",S),o.notifySuccess(k)):(O=C.data,$="Failed to change the appointment duration",O.during&&O.during[0].match("office")&&($="No available offices"),a("ADD_SCHEDULER_SLOT",v),o.notifyError($));case 32:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),editSlot:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d,p,f,h,m,v,g,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=Object(b["a"])(r,5),s=n[0],i=n[1],o=n[2],c=n[3],l=n[4],u=i.start,d=i.end,p=i.split,f=i.scheduleID,o.during&&(o["during"]=o.during.map((function(e){return e.format("YYYY-MM-DD HH:mm".concat(l.timezoneOffset))}))),h=ne({},o),e.next=10,l.requestResource("put_scheduleslot",{vm:l.$refs.visitForm,scope:"step-1",errRespMap:{during:"duration"},data:{select:{id:s},payload:h}});case 10:m=e.sent,200===m.status?(a("ADD_SCHEDULER_SLOT",ne(ne({},l.oldSlot),{},{id:i.id,start:u,end:d,split:p,title:i.title,scheduleID:f})),l.oldSlot=null,l.overridingSchedule=null,l.overridingDoctor=null,a("RESET_INTERIM_SLOT"),v=c[0]||"default",g=se[v](c[1]),_=l.$t("slot_edit_msgs.".concat(v),g),setTimeout((function(){l.notifySuccess(_)}),500)):a("UPDATE_INTERIM_SLOT",{class:"interim-overlap"});case 12:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),dragSlot:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d,p,f,h,m,v,g,_,w,y,x,C;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,n=t.getters,s=Object(b["a"])(r,2),i=s[0],o=s[1],c=i.originalEvent.id,l=i.originalEvent.doctorID,u=new Date(i.event.start),d=new Date(i.event.end),a("REMOVE_SCHEDULE_SLOT",[l,c]),a("ADD_LOADING_SLOT",[u,d,i.originalEvent.split]),p=new Date(i.originalEvent.start),f=new Date(i.originalEvent.end),h=ne(ne({},i.event),{},{start:p,end:f}),!(new Date(i.originalEvent.start)<new Date)){e.next=15;break}return a("ADD_SCHEDULER_SLOT",h),a("REMOVE_LOADING_SLOT"),e.abrupt("return",o.notifyError(o.$t("notifs.visit_in_the_past")));case 15:return m={during:[u.format("YYYY-MM-DD HH:mm".concat(o.timezoneOffset)),d.format("YYYY-MM-DD HH:mm".concat(o.timezoneOffset))]},v=i.oldSplit!==i.newSplit,(p.format("DD/MM")!==u.format("DD/MM")||v)&&(m.schedule=n.docToDateToScheduleMap[l][u.format("DD/MM")],h.scheduleID=m.schedule),v&&(m.schedule=n.docToDateToScheduleMap[i.newSplit][u.format("DD/MM")],h.split=i.newSplit),g={payload:m,select:{id:c}},e.next=22,o.requestResource("put_scheduleslot",{vm:o,data:g});case 22:_=e.sent,a("REMOVE_LOADING_SLOT"),200===_.status?(a("ADD_SCHEDULER_SLOT",ne(ne({},h),{},{start:u,end:d})),o.notifySuccess(o.$t("notifs.visit_moved",{newStart:u.format("DD/MM HH:mm")})),v&&(w=se.doctor(o.docs[i.newSplit]),y=o.$t("slot_edit_msgs.doctor",w),setTimeout((function(){o.notifySuccess(y)}),200))):(x=_.data,C=o.$t("notifs.visit_move_failed"),x.during&&x.during[0].match("office")&&(C=o.$t("overlapMessages.main")),a("ADD_SCHEDULER_SLOT",h),o.notifyError(C));case 25:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),resizeBreak:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d,p,f,h,m,v,g,_,w,y,x,C;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,n=t.state,s=Object(b["a"])(r,2),i=s[0],o=s[1],c=i.event,l=i.oldDate,u=c.id,d=c.scheduleID,p=c.doctorID,f=new Date(c.start),h=new Date(c.end),m=new Date(n._schedulerClosureHoursEachDoc[f.getDay()-1].doctors[p].scheduleDuring[1]),v={class:"lunch",id:u,doctorID:p,scheduleID:d,start:new Date(c.start),end:l},!(h<new Date)){e.next=13;break}return o.notifyError(o.$t("notifs.no_change_expired_schedule")),a("REMOVE_SCHEDULE_BREAK",[p,u]),e.abrupt("return",a("ADD_SCHEDULER_BREAK_SLOT",v));case 13:if(!(h.getTime()>m.getTime())){e.next=17;break}return o.notifyError(o.$t("notifs.no_break_outside_schedule")),a("REMOVE_SCHEDULE_BREAK",[p,u]),e.abrupt("return",a("ADD_SCHEDULER_BREAK_SLOT",v));case 17:if(g=n.schedulerSlots[p].every((function(e){var t=e.start.getTime(),r=e.end.getTime();return f<t&&h<=t||f>=r&&h>r})),g){e.next=22;break}return o.notifyError(o.$t("overlapMessages.changeWouldOverlapSlot")),a("REMOVE_SCHEDULE_BREAK",[p,u]),e.abrupt("return",a("ADD_SCHEDULER_BREAK_SLOT",v));case 22:if(_=n.schedulerBreakSlots[p].every((function(e){if(e.id===u)return!0;var t=e.start.getTime(),r=e.end.getTime();return f<t&&h<=t||f>=r&&h>r})),_){e.next=27;break}return o.notifyError(o.$t("overlapMessages.no_overlap_with_breaks")),a("REMOVE_SCHEDULE_BREAK",[p,u]),e.abrupt("return",a("ADD_SCHEDULER_BREAK_SLOT",v));case 27:return w=n.schedulerBreakSlots[p].filter((function(e){return"lunch"===e.class&&e.id!==u&&e.start.format("MM-DD")===l.format("MM-DD")})),y=w.map((function(e){return[e.start,e.end].map((function(e){return new Date(e).format("HH:mm")}))})),y.push([f.format("HH:mm"),h.format("HH:mm")]),x={select:{id:d},payload:{gaps:y}},e.next=33,o.requestResource("put_schedule",{vm:o,data:x});case 33:C=e.sent,a("REMOVE_SCHEDULE_BREAK",[p,u]),200===C.status?(a("ADD_SCHEDULER_BREAK_SLOT",{doctorID:p,scheduleID:d,class:"lunch",id:u,start:new Date(f),end:new Date(h)}),o.notifySuccess(o.$t("notifs.break_changed",{newEnd:h.format("HH:mm")}))):(a("REMOVE_SCHEDULE_BREAK",[p,u]),a("ADD_SCHEDULER_BREAK_SLOT",v),o.notifyError(o.$t("notifs.break_changed_failed")));case 36:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),resizeSchedule:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d,p,f,h,m,v,g,_,w,y,x,C,S,k;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,n=t.state,s=t.dispatch,i=Object(b["a"])(r,2),o=i[0],c=i[1],l=o.event,u=o.oldDate,d=u.format("MM-DD"),p=l.id,f=l.doctorID,h=new Date(l.start),m=new Date(l.end),v=m.getTime(),g=new Date(h.format("YYYY-MM-DD")),g.setHours(0),g.setMinutes(0),_=n.businessHours[g],!(v<new Date)){e.next=16;break}return c.notifyError(c.$t("notifs.no_change_expired_schedule")),e.abrupt("return",a("UPDATE_SCHEDULE_DURATION",[f,p,u]));case 16:if(!(v>_[1].getTime())){e.next=19;break}return c.notifyError(c.$t("notifs.no_extend_schedule_outside_clinic")),e.abrupt("return",a("UPDATE_SCHEDULE_DURATION",[f,p,u]));case 19:if(w=n.schedulerSlots[f]||[],y=w.filter((function(e){return e.start.format("MM-DD")===d})).every((function(e){var t=e.start.getTime(),r=e.end.getTime();return r<=v&&t<v})),!w.length||y){e.next=24;break}return c.notifyError(c.$t("overlapMessages.changeWouldOverlapSlot")),e.abrupt("return",a("UPDATE_SCHEDULE_DURATION",[f,p,u]));case 24:if(x=n.schedulerBreakSlots[f]||[],C=x.filter((function(e){return e.start.format("MM-DD")===d})).every((function(e){if(e.id===p)return!0;var t=e.start.getTime(),r=e.end.getTime();return r<=v&&t<v})),C){e.next=29;break}return c.notifyError(c.$t("overlapMessages.changeWouldOverlapBreak")),e.abrupt("return",a("UPDATE_SCHEDULE_DURATION",[f,p,u]));case 29:return S={select:{id:p},payload:{during:[h.format("YYYY-MM-DD HH:mm".concat(c.timezoneOffset)),m.format("YYYY-MM-DD HH:mm".concat(c.timezoneOffset))]}},e.next=32,c.requestResource("put_schedule",{vm:c,data:S});case 32:k=e.sent,200===k.status?(S={min_date:c.$refs.vuecal.view.endDate.toJSON().split("T")[0]},s("fetchSlots",{vm:c.$parent,data:S,bh:c.$parent.clinic.business_hours}),c.emitSchedulerUpdate(),c.notifySuccess(c.$t("notifs.schedule_set",{newEnd:m.format("HH:mm")}))):c.notifyError(c.$t("notifs.schedule_end_change_failed"));case 34:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),editPatient:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,t.state,n=Object(b["a"])(r,3),s=n[0],i=n[1],o=n[2],e.next=4,o.requestResource("patch_patientresource",{data:{select:s,payload:i},vm:o});case 4:if(c=e.sent,200!==c.status){e.next=8;break}return a("UPDATE_PATIENT",[s.id,i]),e.abrupt("return",o.notifySuccess(o.$t("notifs.patient_updated")));case 8:o.notifyError(o.$t("notifs.patient_update_failed")),o.patientSidebarActive=!1;case 10:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),updateProcedureTemplate:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,s,i,o,c,l,u,d,p,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,s=Object(b["a"])(r,6),i=s[0],o=s[1],c=s[2],l=s[3],u=s[4],d=s[5],p={select:{code:i},payload:Object(a["a"])({},c,l)},e.next=5,d.requestResource("patch_proceduretemplate",{loadingIn:".is-selected .whitespace-no-wrap",data:p,vm:d});case 5:if(f=e.sent,200!==f.status){e.next=10;break}return n("UPDATE_CLINIC_PROCEDURE",[o,c,l]),d.selectedProcedure={},e.abrupt("return",d.notifySuccess(d.$t("misc.changed_field_to",{field:c,to:u})));case 10:d.notifyError(d.$t("notifs.failed_procedure_update"));case 11:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),updateClinicProcedure:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,s,i,o,c,l,u,d,p,f,h,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,s=Object(b["a"])(r,7),i=s[0],o=s[1],c=s[2],l=s[3],u=s[4],d=s[5],p=s[6],f={select:{id:i},payload:Object(a["a"])({},o,c)},h={data:f,vm:u},p||(h.loadingIn=".is-selected .whitespace-no-wrap"),e.next=7,u.requestResource("patch_clinicprocedure",h);case 7:if(m=e.sent,200!==m.status){e.next=14;break}if(n("UPDATE_CLINIC_PROCEDURE",[i,o,c]),u.selectedProcedure={},!d){e.next=13;break}return e.abrupt("return",d());case 13:return e.abrupt("return",u.notifySuccess(u.$t("misc.changed_field_to",{field:o,to:l})));case 14:u.notifyError(u.$t("notifs.failed_procedure_update"));case 15:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()};r("55dd");function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var le=regeneratorRuntime.mark(fe);function ue(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=de(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function de(e,t){if(e){if("string"===typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pe(e,t):void 0}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function fe(e,t){var r,a,n,s,i,o,c,l,u,d,p,f,h,m,v,g,_,w,y,x,C,S,k,O,$,E,D,T,I,j,A,R,P,M,L,N,H,U,F,V,q,B,W;return regeneratorRuntime.wrap((function(Y){while(1)switch(Y.prev=Y.next){case 0:r=[1e6,[]],a=[0,[]],n={},s={},i={},o=ue(e),Y.prev=6,o.s();case 8:if((c=o.n()).done){Y.next=74;break}l=c.value,u=new Date(l.date),d=u.getDay()-1,p=t[d]||[],p.forEach((function(e,t){var n=e.split(":"),s=Object(b["a"])(n,2),i=s[0],o=s[1],c=parseInt("".concat(i).concat(o));t?c>a[0]&&(a=[c,[i,o]]):c<r[0]&&(r=[c,[i,o]])})),f=l.gaps||[],h=l.doctor,m=l.id,v=l.during,g=v.map((function(e){return new Date(e).format("HH:mm")})),_=Object(b["a"])(g,2),w=_[0],y=_[1],i[h]||(i[h]=[[],[]]),i[h][0].push(w),i[h][1].push(y),n[h]||(n[h]=0),s[h]||(s[h]=1e6),x=ue(f.entries()),Y.prev=25,x.s();case 27:if((C=x.n()).done){Y.next=43;break}return S=Object(b["a"])(C.value,2),k=S[0],O=S[1],$="".concat(m,"-").concat(k),E=u.clone(),D=u.clone(),T=Object(b["a"])(O,2),I=T[0],j=T[1],A=I.split(":"),R=Object(b["a"])(A,2),P=R[0],M=R[1],L=j.split(":"),N=Object(b["a"])(L,2),H=N[0],U=N[1],E.setHours(P),E.setMinutes(M),D.setHours(H),D.setMinutes(U),Y.next=41,{scheduleID:m,doctorID:h,id:$,start:E,background:!0,end:D,class:"lunch",split:parseInt(h)};case 41:Y.next=27;break;case 43:Y.next=48;break;case 45:Y.prev=45,Y.t0=Y["catch"](25),x.e(Y.t0);case 48:return Y.prev=48,x.f(),Y.finish(48);case 51:F=ue(l.slots),Y.prev=52,F.s();case 54:if((V=F.n()).done){Y.next=62;break}return q=V.value,B=q.patient,W=B.name+" "+B.last_name,Y.next=60,{doctorID:h,scheduleID:m,id:q.id,status:q.status,start:new Date(q.during[0]),end:new Date(q.during[1]),title:W,class:"main",patientID:B.id,draggable:!0,split:parseInt(h)};case 60:Y.next=54;break;case 62:Y.next=67;break;case 64:Y.prev=64,Y.t1=Y["catch"](52),F.e(Y.t1);case 67:return Y.prev=67,F.f(),Y.finish(67);case 70:return Y.next=72,{maxHour:a[1],minHour:r[1],doctorID:h,scheduleID:m,scheduleDuring:v,date:u};case 72:Y.next=8;break;case 74:Y.next=79;break;case 76:Y.prev=76,Y.t2=Y["catch"](6),o.e(Y.t2);case 79:return Y.prev=79,o.f(),Y.finish(79);case 82:return Y.next=84,{scheduleLims:Object.fromEntries(Object.entries(i).map((function(e){var t=Object(b["a"])(e,2),r=t[0],a=t[1];return[r,[a[0].sort()[0],a[1].sort().reverse()[0]]]})))};case 84:case"end":return Y.stop()}}),le,null,[[6,76,79,82],[25,45,48,51],[52,64,67,70]])}var he={fetchProcedureTemplates:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.commit,n=r.vm;try{s=JSON.parse(localStorage.getItem("app.laima.procedureTemplates"))}catch(u){}if(s){e.next=11;break}return i={},o={limit:5e3},e.next=8,n.requestResource("list_proceduretemplate",{vm:n,data:i,query:o});case 8:c=e.sent,l=Object.entries(c.data.data.reduce((function(e,t){var r=t.category;return e[r]||(e[r]=[]),delete t.category,e[r].push(t),e}),{})).sort((function(e,t){return e>t?1:t>e?-1:0})),s=Object.fromEntries(l);case 11:a("SET_PROCEDURE_TEMPLATES",s);case 12:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),fetchClinicProcedures:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=r.vm,s=r.clinicID,i={},o={limit:5e3},e.next=6,n.requestResource("list_clinicprocedure",{vm:n,data:i,query:o,headers:{Overwrite:s}});case 6:c=e.sent,l=c.data.data||[],u=l.map((function(e){var t=e.template;return delete e.template,ce(ce({},e),t)})).sort((function(e,t){return e>t?1:t>e?-1:0})),a("SET_CLINIC_PROCEDURES",[u,s]);case 10:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),fetchClinics:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,a=_["a"].clinic,!a){e.next=7;break}return e.next=5,a.toArray();case 5:n=e.sent,r("SET_CLINICS",n);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),fetchDoctors:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,a=_["a"].doctors,!a){e.next=7;break}return e.next=5,a.toArray();case 5:n=e.sent,r("SAVE_DOCTORS",{payload:n});case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),switchCalendarMode:function(e,t){var r=e.commit,a=e.dispatch,n=t.mode;t.vm;r("SET_CALENDAR_MODE",n),"scheduler"===n||"planner"===n&&a("addPlannerSlots")},addPlannerSlots:function(e){var t=e.commit,r=e.state,a=e.getters;if(!Object.keys(r.plannerSlots).length){var n=a["activeClinicsTimeLimits"],s=n.min[0].split(":"),i=Object(b["a"])(s,2),o=i[0],c=i[1],l=n.max[0].split(":"),u=Object(b["a"])(l,2),d=u[0],p=u[1];Object.keys(r.docs).forEach((function(e){var a=[],n=r.scheduleMetaMap[e]||[];n.forEach((function(r){var n=r.scheduleDuring.map((function(e){return new Date(e)})),s=Object(b["a"])(n,2),i=s[0],o=s[1];a.push(i.format("MM-DD"));var c={doctorID:e,start:i,end:o,id:r.scheduleID,class:"schedule"};t("ADD_PLANNER_SLOT",c)}));var s={doctorID:e,split:parseInt(e),background:!0};for(var i in r.businessHours){i=new Date(i);var l=r.businessHours[i],u=Object(b["a"])(l,2),f=u[0],h=u[1],m=i.clone(),v=i.clone();m.setHours(o),m.setMinutes(c),v.setHours(d),v.setMinutes(p),f>m&&t("ADD_PLANNER_OUTLIER",ce({id:"".concat(i.getTime(),"-morning"),class:"closed-morning",start:m,end:f},s)),v>h&&t("ADD_PLANNER_OUTLIER",ce({id:"".concat(i.getTime(),"-evening"),class:"closed-evening",start:h,end:v},s))}})),t("SET_SCHEDULE_LOADING",!1)}},recalculateOutliers:function(e,t){var r=e.state,a=e.commit,s=r.plannerSlots[t]||[],i=s.map((function(e){return e.start.formatTime("HH:mm")})).sort()[0],o=s.map((function(e){return e.end.formatTime("HH:mm")})).sort().reverse()[0],c=[i,o];n["default"].set(r._currentScheduleLims,t,[i,o]);var l=r.schedulerOutliers[t];if(l){var u=c.map((function(e){return e.split(":")})),d=Object(b["a"])(u,2),p=Object(b["a"])(d[0],2),f=p[0],h=p[1],m=Object(b["a"])(d[1],2),v=m[0],g=m[1],_=r.schedulerOutliers[t].map((function(e){e=Object.assign({},e);var t=e.start.clone();return"closed-morning"===e.class?(t.setHours(f),t.setMinutes(h),e.start=t):"closed-evening"===e.class&&(t.setHours(v),t.setMinutes(g),e.end=t),e}));a("UPDATE_OUTLIERS_PER_DOCTOR",[t,_])}},addSchedulerOutlierHours:function(e,t){var r=e.commit,a=e.state,n=t.vm,s=Object.keys(a.schedulerOutliers).length,i=a._schedulerClosureHoursEachDoc,o=n.selectedDoctor.actor,c=a._currentScheduleLims[o];c||(c=["08:00","15:00"]);var l={},u=c.flatMap((function(e){return e.split(":")})),d=Object(b["a"])(u,4),p=d[0],f=d[1],h=d[2],m=d[3];Object.entries(i).forEach((function(e){var t=Object(b["a"])(e,2),a=t[0],n=t[1],i=n.date;Object.entries(n.doctors).forEach((function(e){var t=Object(b["a"])(e,2),n=t[0],o=t[1];s&&!l[n]&&(l[n]=[]);var c=o.scheduleID,u=o.scheduleDuring.map((function(e){return new Date(e)})).map((function(e){return[e.getHours(),e.getMinutes()]})),d=Object(b["a"])(u,2),v=Object(b["a"])(d[0],2),g=v[0],_=v[1],w=Object(b["a"])(d[1],2),y=w[0],x=w[1],C=i.clone(),S=i.clone(),k=i.clone(),O=i.clone();C.setHours(p),C.setMinutes(f),S.setHours(g),S.setMinutes(_),k.setHours(y),k.setMinutes(x),O.setHours(h),O.setMinutes(m);var $={doctorID:n,scheduleID:c,background:!0,id:"".concat(a,"-").concat(n,"-mo"),start:C,end:S,class:"closed-morning",split:parseInt(n)},E={doctorID:n,scheduleID:c,background:!0,id:"".concat(a,"-").concat(n,"-ev"),start:k,end:O,class:"closed-evening",split:parseInt(n)};s?(l[n].push($),l[n].push(E)):(r("ADD_SCHEDULER_OUTLIER",$),r("ADD_SCHEDULER_OUTLIER",E))}))})),s&&r("UPDATE_OUTLIERS",l),r("SET_SCHEDULE_LOADING",!1)},fetchSlots:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,s,i,o,c,l,u,d,p,f,h,m,v,g,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,s=t.dispatch,i=t.state,n("SET_SCHEDULE_LOADING",!0),o=r.vm,c=r.bh,l=r.currentDate,u=o.calendarMode,d={data:r.data||{},no_loading:!0},r.headers&&(d.headers=r.headers),e.next=8,o.requestResource("get_listTakenSlots",d);case 8:if(p=e.sent,200===p.status){f={},n("CLEAR_ALL_SLOTS"),h=ue(fe(p.data,c));try{for(h.s();!(m=h.n()).done;)v=m.value,v.date?(n("UPDATE_SCHEDULE_META_MAP",v),g=v.date.getDay()-1,b=v.doctorID,f[g]?f[g]["doctors"][b]=v:f[g]={date:v.date,doctors:Object(a["a"])({},b,v)}):v.scheduleLims?i._currentScheduleLims=v.scheduleLims:"lunch"===v.class?n("ADD_SCHEDULER_BREAK_SLOT",v):n("ADD_SCHEDULER_SLOT",v)}catch(_){h.e(_)}finally{h.f()}i._schedulerClosureHoursEachDoc=f,"scheduler"===u?n("SET_SCHEDULE_LOADING",!1):"planner"===u&&s("addPlannerSlots",{vm:o,currentDate:l}),s("fetchMonthlyHeatmap",[o.currentDate,o])}case 10:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),fetchMonthlyHeatmap:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d,p,f,h,m,v,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.state,n=t.commit,s=Object(b["a"])(r,2),i=s[0],o=s[1],c=a.monthlyHeatmapSlots,l=i.format("YYYY-MM"),c[l]){e.next=12;break}return console.info("Month changed, fetching new monthly heatmap"),n("SET_HEATMAP_LOADING",!0),e.next=9,o.requestResource("get_listMonthlyFreeHours",{data:{date:i.format("YYYY-MM-DD")},no_loading:!0,vm:o});case 9:u=e.sent,200===u.status&&(d=[],p={},Object.entries(u.data).forEach((function(e){var t=Object(b["a"])(e,2),r=t[0],a=t[1];r=new Date(r);var n=a.reduce((function(e,t){var a=t.doc,n=t.free||"100:00";p[a]||(p[a]=[]);var s=n.split(":"),i=Object(b["a"])(s,2),o=i[0],c=i[1],l=60*o+ +c;return p[a].push({start:r,end:r.addHours(1),allDay:!0,split:a,content:l}),e+l}),0);d.push({start:r,end:r.addHours(1),allDay:!0,content:n})})),f=Math.min.apply(Math,Object(N["a"])(d.map((function(e){return e.content})))),h=Math.max.apply(Math,Object(N["a"])(d.map((function(e){return e.content}))))+1,m=h-f,v=m/4,d=d.map((function(e){var t=Math.floor((e.content-f)/v),r="heat-".concat(t);return e.class=r,e})),Object.fromEntries(Object.entries(p).map((function(e){var t=Object(b["a"])(e,2),r=t[0],a=t[1],n=Math.min.apply(Math,Object(N["a"])(a.map((function(e){return e.content})))),s=Math.max.apply(Math,Object(N["a"])(a.map((function(e){return e.content}))))+1,i=s-n,o=i/4;return[r,a.map((function(e){var t=Math.floor((e.content-n)/o),r="heat-".concat(t);return e.class=r,e}))]}))),g={all:d,docs:p},n("SET_MONTHLY_HEATMAP",[l,g])),n("SET_HEATMAP_LOADING",!1);case 12:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),findPatient:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=r.vm,s=r.query,e.next=4,n.requestResource("get_findPatient",{data:s,no_loading:!0,vm:n});case 4:i=e.sent,a("SET_PATIENT_SEARCHBAR_LOADING",!1),200===i.status&&(o=i.data,a("SET_SEARCHED_PATIENTS",o));case 7:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),listSlotsByPatient:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=r.vm,s=r.patient_id,i=r.callback,e.next=4,n.requestResource("list_scheduleslot",{data:{patient:{id:s}},vm:n});case 4:o=e.sent,200===o.status&&(c=o.data.data.map((function(e){var t=e.during.map((function(e){return new Date(e)})),r=Object(b["a"])(t,2),a=r[0],n=r[1];return{start:a,end:n,class:"main",id:e.id,status:e.status,split:e.doctor.id,doctorID:e.doctor.id,draggable:!1}})),a("SELECT_FILTERED_PATIENT",s),a("SET_SEARCHED_PATIENT_SLOTS",c),i&&i.call(n));case 6:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),listAllPatients:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=r.vm,e.next=4,n.requestResource("list_patientresource",{vm:n,query:{limit:1e3},data:{}});case 4:if(s=e.sent,200!==s.status){e.next=8;break}return i=s.data.data.map((function(e){var t=e.actor,r=t.id;return delete e.actor,delete t.id,ce(ce(ce({},t),e),{},{actor_id:r})})),e.abrupt("return",a("SET_PATIENTS",i));case 8:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),listTextStatuses:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=r.vm,s=r.page,e.next=4,n.requestResource("get_listTexts",{vm:n,loadingIn:".reports-table",query:{page:s}});case 4:i=e.sent,200===i.status&&a("SAVE_SMS_STATUSES",i.data);case 6:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()};function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ge=ve(ve(ve(ve(ve({},re),te),ie),he),{},{verifyDomain:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=Object(b["a"])(r,4),s=n[0],i=n[1],o=n[2],c=n[3],e.next=4,o.requestResource("post_verifyDomain",{vm:o,no_loading:!0,data:{url:i}});case 4:l=e.sent,200===l.status&&(u=l.data.status,a("PATCH_CLINIC",{clinicID:s,payload:{widget_installed:u}}),c(l));case 6:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),viewSlotDetails:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,l,u,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=Object(b["a"])(r,2),s=n[0],i=n[1],o={id:s},c={select:"during,status,patient,schedule,procedures"},e.next=6,i.requestResource("get_scheduleslot",{data:o,query:c,vm:i});case 6:if(l=e.sent,200!==l.status){e.next=16;break}return u=l.data,d=u.status,e.next=12,i.requestResource("get_patientresource",{data:{id:u.patient.id,patient_id:u.patient.patient_id}});case 12:p=e.sent,200===p.status&&(delete u.patient,u.doctor=u.schedule.doctorID,Object.assign(u,p.data),Object.assign(u,u.actor),delete u.actor),u.status=d,a("SET_SLOT_DETAILS",u);case 16:a("SET_VIEW_SLOT_PROMPT",s);case 17:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),confirmAppointment:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,n=r.vm,s=r.slotID,i=r.doctorID,e.next=4,n.requestResource("post_confirmAppointment",{vm:n,format:{slot_id:s}});case 4:o=e.sent,200===o.status&&(document.querySelector(".form-alert").style.height="auto",a("UPDATE_SLOT_DETAILS",{status:"confirmed"}),a("CONFIRM_SLOT_STATUS",[i,s]),n.notifySuccess(n.$t("misc.visit_confirmed")));case 6:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()});r("8615"),r("4f7f");function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var we={doctors:function(e){return Object.fromEntries(Object.entries(e.docs).map((function(e){var t=Object(b["a"])(e,2),r=t[0],a=t[1],n=a.name,s=a.last_name;return[r,n+" "+s]})))},docToDateToScheduleMap:function(e){var t={};return Object.entries(e.scheduleMetaMap).forEach((function(e){var r=Object(b["a"])(e,2),a=r[0],n=r[1];t[a]={},n.forEach((function(e){var r=e.date,n=e.scheduleID;t[a][r.format("DD/MM")]=n}))})),t},templatedProcedureCategories:function(e){var t={};return Object.entries(e.procedureTemplates).forEach((function(e){var r=Object(b["a"])(e,2),a=r[0],n=r[1];t[a]=new Set,n.forEach((function(e){e.subgroup&&t[a].add(e.subgroup)}))})),t},activeClinic:function(e,t,r){return function(){var t=r.auth.selectedWorkspace.id;return e.clinics[0]&&e.clinics.find((function(e){return e.id==t}))}},activeClinicsTimeLimits:function(e,t){var r=t.activeClinic(),a={},n=Object.values(r.business_hours).filter((function(e){return e[0]})).map((function(e){return e.map((function(t){var r=t.split(":").map((function(e){return parseInt(e)})),n=60*r[0]+r[1];return a[n]=e,n}))})),s=[Math.min.apply(Math,Object(N["a"])(n.map((function(e){return e[0]})))),Math.max.apply(Math,Object(N["a"])(n.map((function(e){return e[1]}))))],i=s[0],o=s[1];return{min:[a[i][0],i],max:[a[o][1],o]}},scheduleDurationsPerDoctor:function(e){return Object.fromEntries(Object.entries(e.scheduleMetaMap).map((function(e){var t=Object(b["a"])(e,2),r=t[0],a=t[1];return[r,a.map((function(e){return[e.scheduleID,e.scheduleDuring.map((function(e){return new Date(e)}))]}))]})))},scheduleDurationsPerDate:function(e){var t={},r={};return Object.values(e.scheduleMetaMap).forEach((function(e){e.forEach((function(e){var a=e.date,n=e.scheduleDuring;a=a.format("DD/MM");var s=n.map((function(e){return new Date(e).format("HH:mm")})),i=Object(b["a"])(s,2),o=i[0],c=i[1];t[a]||(t[a]=[]),r[a]||(r[a]=[]),t[a].push(o),r[a].push(c)}))})),Object.fromEntries(Object.entries(t).map((function(e){var t=Object(b["a"])(e,2),a=t[0],n=t[1];return[a,[n.sort()[0],r[a].sort().reverse()[0]]]})))},aggregateAllSchedulerEvents:function(e,t){return function(t,r){t=t.format("MM/DD");var a=(e.filteredPatient||{}).id,n=function(e){return e.start.format("MM/DD")===t},s=Object.values(e.schedulerSlots).flatMap((function(e){return e})).filter(n);return a&&(s=s.filter((function(e){return e.patientID===a})),s[0]?r.$store.commit("core/SET_EMPTY_TIMEFRAME",!1):r.$store.commit("core/SET_EMPTY_TIMEFRAME",!0)),[].concat(Object(N["a"])(s||[]),Object(N["a"])(Object.values(e.schedulerBreakSlots).flatMap((function(e){return e})).filter(n)||[]),Object(N["a"])(e.interimEvents||[]),Object(N["a"])(e.loadingSlots||[]))}},allSchedulerSlotsByDoctor:function(e,t){return function(t,r){var a=(e.filteredPatient||{}).id,n=e.schedulerSlots[t]||[];return a?(n=n.filter((function(e){return e.patientID===a})),n[0]?r.$store.commit("core/SET_EMPTY_TIMEFRAME",!1):r.$store.commit("core/SET_EMPTY_TIMEFRAME",!0)):r.$store.commit("core/SET_EMPTY_TIMEFRAME",!1),[].concat(Object(N["a"])(n),Object(N["a"])(e.schedulerBreakSlots[t]||[]),Object(N["a"])(e.interimEvents||[]),Object(N["a"])(e.loadingSlots||[]))}},allPlannerSlotsByDoctorPlannerSlots:function(e){return function(t){return[].concat(Object(N["a"])((e.schedulerBreakSlots[t]||[]).map((function(e){return e=Object.assign({},e),e.resizable=!0,e}))),Object(N["a"])(e.plannerSlots[t]||[]),Object(N["a"])(e.plannerOutliers[t]||[]),Object(N["a"])((e.schedulerSlots[t]||[]).map((function(e){return _e(_e({},e),{},{class:"appointment-shadow",background:!0})}))))}}},ye={namespaced:!0,state:K,mutations:ee,actions:ge,getters:we};function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}n["default"].use(s["a"]);var Se=Ce(Ce(Ce({},g),O),I);console.log(Object.keys(Se));t["a"]=new s["a"].Store({getters:d,mutations:h,state:u,actions:Se,plugins:i,modules:{auth:G,core:ye},strict:!0})},"0902":function(e,t,r){},"0f28":function(e,t,r){},"0f3f":function(e,t,r){"use strict";r("8572")},1516:function(e,t,r){"use strict";r("15e7")},"15e7":function(e,t,r){},"17e1":function(e,t,r){"use strict";var a=r("4dec"),n=5,s="LaimaDB",i=new a["a"](s),o={sync:"table_name,hashsum",clinic:"&id,email,office_count,domain,phone,default_visit_interval",doctors:"&actor,name,last_name"};i.version(n).stores(o),t["a"]=i},"17e2":function(e,t,r){},"1a5c":function(e,t,r){"use strict";r("0238")},"1ae5":function(e,t,r){"use strict";r("a489")},"1b2c":function(e,t,r){"use strict";r("b824")},"1deb":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vx-card",{staticClass:"ml-auto mr-auto",attrs:{id:"support"}},[r("div",{staticClass:"vx-row mb-2 "},[r("h4",[e._v("Write to us if you encounter an issue with Laima.app")])]),r("div",{staticClass:"vx-row mb-2 "},[r("div",{staticClass:"vx-col w-full ml-auto mr-auto"},[r("vs-input",{staticClass:"w-full",attrs:{"icon-pack":"feather",icon:"icon-user","icon-no-border":"","label-placeholder":"Name..."},model:{value:e.input21,callback:function(t){e.input21=t},expression:"input21"}})],1)]),r("div",{staticClass:"vx-row mb-2"},[r("div",{staticClass:"vx-col w-full ml-auto mr-auto"},[r("vs-input",{staticClass:"w-full",attrs:{type:"email","icon-pack":"feather",icon:"icon-mail","icon-no-border":"","label-placeholder":"Topic..."},model:{value:e.input22,callback:function(t){e.input22=t},expression:"input22"}})],1)]),r("div",{staticClass:"vx-row mb-2"},[r("div",{staticClass:"vx-col w-full ml-auto mr-auto"},[r("vs-input",{staticClass:"w-full",attrs:{"icon-pack":"feather",icon:"icon-smartphone","icon-no-border":"","label-placeholder":"Phone number..."},model:{value:e.input23,callback:function(t){e.input23=t},expression:"input23"}})],1)]),r("div",{staticClass:"vx-row mb-6"},[r("div",{staticClass:"vx-col w-full ml-auto mr-auto"},[r("vs-textarea",{staticClass:"w-full",attrs:{type:"content","icon-pack":"feather",icon:"icon-mail","icon-no-border":"",placeholder:"Describe problem..."},model:{value:e.input24,callback:function(t){e.input24=t},expression:"input24"}})],1)]),r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col w-full ml-auto mr-auto"},[r("vs-button",{staticClass:"mr-3 mb-5"},[e._v("Submit")]),r("vs-button",{staticClass:"mb-5",attrs:{color:"warning",type:"border"},on:{click:function(t){e.input21=e.input22=e.input23=e.input24="",e.check6=!1}}},[e._v("Reset")])],1)])])},n=[],s={data:function(){return{check6:"",input21:"",input22:"",input23:"",input24:""}}},i=s,o=r("2877"),c=Object(o["a"])(i,a,n,!1,null,null,null);t["default"]=c.exports},"1dff":function(e,t,r){"use strict";var a=r("a026"),n=r("fb9a"),s=r.n(n),i={primary:"#46afe4",success:"#28C76F",danger:"#EA5455",warning:"#FF9F43",dark:"#1E1E1E"},o={disableCustomizer:!1,disableThemeTour:!1,footerType:"static",hideScrollToTop:!1,navbarColor:"#fff",navbarType:"floating",routerTransition:"slide-fade",rtl:!1,sidebarCollapsed:!1,theme:"light"};a["default"].use(s.a,{theme:{colors:i},rtl:o.rtl}),t["a"]=o},"211f":function(e,t,r){"use strict";r("ce98")},2175:function(e,t,r){},2259:function(e,t,r){"use strict";r("a92a")},2386:function(e,t,r){"use strict";r("67b9")},2420:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vx-col mt-20",staticStyle:{"max-width":"400px",margin:"0 auto"}},[e.verified?r("div",[r("statistics-card-line",{staticClass:"mb-base text-center",attrs:{hideChart:"",icon:"SmileIcon",statistic:e.$t("headers.email_verified"),color:"success"}}),r("h5",{staticClass:"text-center"},[e._v(e._s(e.$t("headers.auto_redirect_warn")))])],1):e._e(),e.verrors?r("p",{staticClass:"text-center mt-16",staticStyle:{"font-size":"20px"}},[e._v(e._s(e.verrors))]):e._e()])},n=[],s=r("768b"),i=(r("ac6a"),r("ffc1"),r("96cf"),r("3b8d")),o=r("43ca"),c={components:{StatisticsCardLine:o["a"]},data:function(){return{verified:!1,verrors:""}},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.params.verif_code,r="/api/actor/verify/email/".concat(t,"/"),this.$store.commit("STATE_LOADING_ON",{}),e.next=5,this.$http.post(r,{},{headers:{Range:"get"}});case 5:if(a=e.sent,this.$store.commit("STATE_LOADING_OFF",{}),200!==a.status){e.next=13;break}return this.verified=!0,this.$store.commit("auth/UPDATE_ACTOR_CONTEXT",{email_confirmed:!0}),e.next=12,this.sleep(3);case 12:return e.abrupt("return",this.$router.push("/"));case 13:this.verrors=Object.entries(a.data).map((function(e){var t=Object(s["a"])(e,2),r=(t[0],t[1]);return r.join(", ")})).join("\n");case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},l=c,u=r("2877"),d=Object(u["a"])(l,a,n,!1,null,null,null);t["default"]=d.exports},"25bb":function(e,t,r){"use strict";r("b74e")},"2ea2":function(e,t,r){"use strict";r("cdc0")},3336:function(e,t,r){"use strict";r("78da")},"3a10":function(e,t,r){},"41cb":function(e,t,r){"use strict";r("4c95");var a=r("a026"),n=r("8c4f");a["default"].use(n["a"]);var s=new n["a"]({base:"https://cdn.statically.io/gh/laima-app/statics/1VNJXPcRqW3E/",scrollBehavior:function(){return{x:0,y:0}},routes:[{path:"",component:r("f135").default,children:[{path:"/",redirect:"/dashboard/",meta:{secure:!0}},{path:"/dashboard",name:"home",component:r("bb51").default,meta:{secure:!0}},{path:"/scheduler/",name:"Scheduler",component:r("ed54").default,meta:{secure:!0}},{path:"/patients/list",name:"List patients",component:r("5745").default,meta:{secure:!0}},{path:"/sms/",name:"SMS",component:r("80fc").default,meta:{secure:!0}},{path:"/invoice-list/",name:"Invoices List",component:r("ae4d").default,meta:{secure:!0}},{path:"/stock/list",name:"Stock",component:r("9e82").default,meta:{secure:!0}},{path:"/settings/user-data/",name:"user-data",component:r("a249").default,meta:{goBackRoute:"view-settings",secure:!0,icon:"UserIcon",pageTitle:"Settings"}},{path:"/settings/staff/",name:"staff-settings",component:r("4dbd").default,meta:{secure:!0,goBackRoute:"view-settings",icon:"UsersIcon",pageTitle:"Staff"}},{path:"/settings/staff/list",name:"staff-list",component:r("a472").default,meta:{secure:!0,goBackRoute:"view-settings",pageTitle:"List staff members"}},{path:"/settings/staff/add",name:"staff-add",component:r("fa5d").default,meta:{secure:!0,pageTitle:"Add staff member"}},{path:"/settings/clinic/",name:"clinic-settings",component:r("fb70").default,meta:{secure:!0,icon:"UsersIcon",pageTitle:"Clinic details"}},{path:"/knowledgebase/",name:"Knowledgebase",component:r("d4b1").default,meta:{secure:!0}},{path:"/support/",name:"Support",component:r("1deb").default,meta:{secure:!0}}]},{path:"",component:r("f1dd").default,meta:{secure:!0},children:[{path:"/fatal/",name:"fatal",component:r("8319").default},{path:"/pages/error-404",name:"page-error-404",component:r("c0ba").default},{path:"/pages/account/register",name:"pageRegister",component:r("aaf8").default},{path:"/pages/account/forgot-password",name:"pageForgottenPassword",component:r("67b2").default},{path:"/pages/account/reset-password/:checkcode",name:"pageResetPassword",component:r("5553").default},{path:"/pages/account/activate/created/:reg_token",name:"activateCreatedAccount",component:r("fa03").default},{path:"/pages/account/activate/invitee/:reg_token",name:"activateInvitedAccount",component:r("fa03").default},{path:"/pages/account/verify/email/:verif_code",name:"verifyChangedEmail",component:r("2420").default}]},{path:"*",redirect:"/pages/error-404"}]});s.afterEach((function(){var e=document.getElementById("loading-bg");e&&(e.style.display="none")})),t["a"]=s},4363:function(e,t,r){},"43ca":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vx-card",{staticClass:"overflow-hidden"},[r("div",{attrs:{slot:"no-body"},slot:"no-body"},[r("div",{staticClass:"p-6",class:{"flex justify-between flex-row-reverse items-center":e.iconRight,"text-center":!e.iconRight&&e.hideChart,"pb-0":!e.hideChart}},[r("feather-icon",{staticClass:"p-3 inline-flex rounded-full",class:["text-"+e.color,{"mb-4":!e.iconRight}],style:{background:"rgba(var(--vs-"+e.color+"),.15)"},attrs:{icon:e.icon}}),r("div",{staticClass:"truncate"},[r("h2",{staticClass:"mb-1 font-bold"},[e._v(e._s(e.statistic))]),r("span",[e._v(e._s(e.statisticTitle))])])],1),e.hideChart?e._e():r("div",{staticClass:"line-area-chart"},[r("vue-apex-charts",{ref:"apexChart",attrs:{type:e.type,height:"100",width:"100%",options:e.chartOptions,series:e.chartData}})],1)])])},n=[],s=(r("6c7b"),r("6b54"),r("28a5"),r("c5f6"),r("1321")),i=r.n(s),o={areaChartOptions:{grid:{show:!1,padding:{left:0,right:0}},chart:{toolbar:{show:!1},sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2.5},fill:{type:"gradient",gradient:{shadeIntensity:.9,opacityFrom:.5,opacityTo:.2,stops:[0,80,100]}},xaxis:{type:"numeric",lines:{show:!1},axisBorder:{show:!1},labels:{show:!1}},yaxis:[{y:0,offsetX:0,offsetY:0,padding:{left:0,right:0}}],tooltip:{x:{show:!1}}},lineChartOptions:{grid:{show:!1,padding:{left:0,right:0}},chart:{type:"line",dropShadow:{enabled:!0,top:5,left:0,blur:4,opacity:.1},toolbar:{show:!1},sparkline:{enabled:!0}},stroke:{width:5,curve:"smooth"},xaxis:{type:"numeric"},fill:{type:"gradient",gradient:{shade:"dark",shadeIntensity:1,type:"horizontal",opacityFrom:1,opacityTo:1,stops:[0,100,100,100]}},markers:{size:0,hover:{size:5}},tooltip:{x:{show:!1}}}},c=r("ee53"),l={props:{icon:{type:String,required:!0},statistic:{type:[Number,String],required:!0},statisticTitle:{type:String},chartData:{},color:{type:String,default:"primary"},colorTo:{type:String},type:{type:String,default:"line"},iconRight:{type:Boolean,default:!1},hideChart:{type:Boolean,default:!1}},data:function(){return{chartOptions:null}},watch:{themePrimaryColor:function(){this.$refs.apexChart.updateOptions({theme:{monochrome:{color:this.getHex(this.color)}}})}},computed:{themePrimaryColor:function(){return this.$store.state.themePrimaryColor}},methods:{getHex:function(e){if(c["a"].isColor(e)){var t=window.getComputedStyle(document.documentElement).getPropertyValue("--vs-".concat(e));return t=t.split(","),"#"+((1<<24)+(Number(t[0])<<16)+(Number(t[1])<<8)+Number(t[2])).toString(16).slice(1)}return e},gradientToColor:function(e){var t={primary:"#A9A2F6",success:"#55DD92",warning:"#ffc085",danger:"#F97794"};return t[e]?t[e]:t["primary"]}},components:{VueApexCharts:i.a},created:function(){"area"==this.type?(this.chartOptions=Object.assign({},o.areaChartOptions),this.chartOptions["theme"]={monochrome:{enabled:!0,color:this.getHex(this.color),shadeTo:"light",shadeIntensity:.65}}):"line"==this.type&&(this.chartOptions=JSON.parse(JSON.stringify(o.lineChartOptions)),this.chartOptions.fill.gradient.gradientToColors=[this.gradientToColor(this.colorTo||this.color)],this.chartOptions.colors=[this.getHex(this.color)])}},u=l,d=r("2877"),p=Object(d["a"])(u,a,n,!1,null,null,null);t["a"]=p.exports},4574:function(e,t,r){"use strict";r("054b")},"48f6":function(e,t,r){"use strict";r("17e2")},"4a50":function(e,t,r){e.exports=r.p+"img/404.06a2df61.png"},"4c95":function(e,t,r){"use strict";r("6762");var a=r("d225"),n=r("b0b4"),s=r("bb36"),i=r("41cb"),o=r("d3e3"),c=function(){function e(){Object(a["a"])(this,e)}return Object(n["a"])(e,[{key:"clearLocalStorage",value:function(){var e=["app.laima.screenLock.isSet","app.laima:fngprt"];for(var t in window.localStorage)e.includes(t)||window.localStorage.removeItem(t)}},{key:"logOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.info("Logging out..."+e.reason),s["a"].get("/api/actor/logout/").then((function(){var t=e.reason||{},r=e.to||i["a"].currentRoute.path;o["a"].$emit("logout",{source:t,to:r})}))}},{key:"isAuthenticated",value:function(){return!!localStorage.getItem("app.laima.actorInfo")&&!!localStorage.getItem("app.laima.specHashsum")&&!!localStorage.getItem("app.laima.spec")}}]),e}();t["a"]=new c},"4dbd":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vx-card",[r("div",{staticClass:"tabs-container",attrs:{slot:"no-body"},slot:"no-body"},[r("vs-tabs",{staticClass:"open-overflow",attrs:{alignment:"fixed"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("vs-tab",{staticClass:"open-overflow",attrs:{label:e.$t("headers.staff_list"),"icon-pack":"feather",icon:"icon-users"}},[r("div",{staticClass:"tab-text"},[r("staff-list",{staticClass:"mt-4"})],1)]),r("vs-tab",{attrs:{label:e.$t("headers.add_staff"),"icon-pack":"feather",icon:"icon-plus"}},[r("div",{staticClass:"tab-text open-overflow"},[r("staff-add",{staticClass:"mt-4 open-overflow"})],1)])],1)],1)])},n=[],s=r("fa5d"),i=r("a472"),o={components:{StaffAdd:s["default"],StaffList:i["default"]},data:function(){return{activeTab:0}}},c=o,l=r("2877"),u=Object(l["a"])(c,a,n,!1,null,null,null);t["default"]=u.exports},"4fa0":function(e,t,r){"use strict";r("743f")},"502c":function(e,t,r){},"512a":function(e,t,r){},5553:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"h-screen flex w-full bg-img"},[r("div",{staticClass:"vx-col sm:w-3/5 md:w-3/5 lg:w-3/4 xl:w-3/5 mx-auto self-center"},[r("vx-card",[r("div",{staticClass:"full-page-bg-color",attrs:{slot:"no-body"},slot:"no-body"},[r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col hidden sm:hidden md:hidden lg:block lg:w-1/2 mx-auto self-center"}),r("div",{staticClass:"vx-col sm:w-full md:w-full lg:w-1/2 mx-auto self-center  d-theme-dark-bg"},[r("div",{staticClass:"p-8"},[r("div",{staticClass:"vx-card__title mb-8"},[r("h4",{staticClass:"mb-4"},[e._v(e._s(e.$t("headers.reset_pass")))]),r("p",[e._v(e._s(e.$t("headers.enter_new_pass")))])]),r("div",{staticClass:"vx-col mb-8"},[r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"}],ref:"password",staticClass:"w-full mb-6",attrs:{type:"password",name:"password","data-vv-as":e.$t("fields.password").toLowerCase(),"label-placeholder":e.$t("fields.password")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.reset(t)}},model:{value:e.pass1,callback:function(t){e.pass1=t},expression:"pass1"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("password")))]),r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|confirmed:password",expression:"'required|min:6|confirmed:password'"}],staticClass:"w-full",attrs:{type:"password",name:"confirm_password","data-vv-as":e.$t("fields.password").toLowerCase(),"label-placeholder":e.$t("fields.confirm_pass")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.reset(t)}},model:{value:e.pass2,callback:function(t){e.pass2=t},expression:"pass2"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("confirm_password"),expression:"errors.has('confirm_password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("confirm_password")))])],1),r("div",{staticClass:"flex flex-wrap justify-between flex-col-reverse sm:flex-row"},[r("vs-button",{staticClass:"w-full sm:w-auto mb-8 sm:mb-auto mt-3 sm:mt-auto",attrs:{type:"border",to:"/pages/account/login"}},[e._v(e._s(e.$t("headers.goto_login")))]),r("vs-button",{staticClass:"w-full sm:w-auto",on:{click:e.reset}},[e._v(e._s(e.$t("headers.reset_pass")))])],1)])])])])])],1)])},n=[],s=r("768b"),i=(r("ffc1"),r("ac6a"),r("96cf"),r("3b8d")),o=r("d3e3"),c={data:function(){return{pass1:"",pass2:""}},methods:{reset:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,c,l,u,d,p=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validate();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return r=this.$route.params.checkcode,this.$store.commit("STATE_LOADING_ON"),a="/api/reset/pass/".concat(r,"/"),e.next=10,this.$http.get(a);case 10:if(n=e.sent,200==n.status){e.next=13;break}return e.abrupt("return",this.notifyError(this.$t("notifs.failed_set_pass")));case 13:return i=n.data.checkcode,c="/api/actor/pass/change/".concat(i,"/"),l=new FormData,l.set("password1",this.pass1),l.set("password2",this.pass2),e.next=20,this.$http({url:c,method:"POST",data:l,headers:{Range:"post","Content-Type":"multipart/form-data"}});case 20:if(u=e.sent,this.$store.commit("STATE_LOADING_OFF"),422!==u.status){e.next=27;break}return d=this.errors,e.abrupt("return",Object.entries(u.data).forEach((function(e){var t=Object(s["a"])(e,2),r=t[0],a=t[1];if("password1"===r)r="password";else{if("password2"!==r)return p.notifyError(p.$t("notifs.failed_set_pass"));r="confirm_password"}a.forEach((function(e){d.add({field:r,msg:e})}))})));case 27:if(200===u.status){e.next=29;break}return e.abrupt("return",this.notifyError(this.$t("notifs.failed_set_pass")));case 29:o["a"].$emit("login",{});case 30:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},l=c,u=r("2877"),d=Object(u["a"])(l,a,n,!1,null,null,null);t["default"]=d.exports},"56cb":function(e,t,r){"use strict";r("9e6a")},"56d7":function(e,t,r){"use strict";r.r(t);var a=r("768b"),n=(r("cadf"),r("551c"),r("f751"),r("097d"),r("a026")),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.$store.state.browserOK?r("div",{class:e.vueAppClasses,attrs:{id:"app"}},[e.appLocked?r("app-lock"):e._e(),e.resourceLocked?r("shield-dialog"):e._e(),e.userContextMissing?r("user-complete-data"):e._e(),e.inSync?r("sync-in-progress"):e._e(),null===e.isAuthed||e.isAuthed?e._e():r("login"),e.showLockWarning?r("div",{staticClass:"veil select-none",staticStyle:{background:"radial-gradient(circle, rgba(255, 255, 255, .2), #fff"}},[r("div",{staticClass:"flex content-center flex-wrap justify-center h-full"},[r("vs-alert",{staticClass:"expiry-warning text-center justify-center flex",staticStyle:{background:"#fff0e5",height:"auto"},attrs:{color:"warning",active:"true","icon-pack":"feather",icon:"icon-alert-triangle"}},[r("h3",{staticClass:"text-warning"},[e._v("\n\t\t\t\t\t"+e._s(e.$t("headers.session_expires_in",{seconds:e.secondsToExpiry}))+"\n\t\t\t\t")]),r("h5",{staticClass:"mt-2",staticStyle:{color:"#6b6b6b"}},[e._v("\n\t\t\t\t\t"+e._s(e.$t("headers.dismissLockWarning"))+"\n\t\t\t\t")])])],1)]):e._e(),e.screenlockSet&&e.loggedIn?r("v-idle",{ref:"idle",staticClass:"hidden",attrs:{wait:1,duration:e.$store.state.screenLock.defaultIdleTime,reminders:[15],events:e.idlenessEvents},on:{remind:function(t){e.showWarningFlag=!0},idle:function(t){return e.$store.commit("LOCK_SCREEN")}}}):e._e(),e.showLockScreen?r("lock-screen"):e._e(),e.isAuthed?r("router-view",{style:e.cloakBlur,on:{setAppClasses:e.setAppClasses}}):e._e()],1):r("div",{staticClass:"text-center mt-20"},[r("svg",{staticClass:"w-16 h-16 text-danger",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}})]),r("h2",{staticClass:"text-center mt-8"},[e._v("\n\t\t"+e._s(e.$t("headers.unsupported_browser"))+"\n\t")])])},i=[],o=(r("ac6a"),r("96cf"),r("3b8d")),c=r("4c95"),l=r("17e1"),u=r("d3e3"),d=(r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("7f7f"),r("2397"),r("013f")),p=r("4e2b"),f=r("308d"),h=r("6bb5"),m=r("bd86"),v=r("d225"),g=r("b0b4");r("6b54"),r("34ef"),r("a481"),r("14b9"),r("4917");function b(e){var t=_();return function(){var r,a=Object(h["a"])(e);if(t){var n=Object(h["a"])(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Object(f["a"])(this,r)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var n=function(e){Object(p["a"])(a,e);var t=b(a);function a(){var e;Object(v["a"])(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return e=t.call.apply(t,[this].concat(s)),r.forEach((function(t){t.prototype.__init__&&t.prototype.__init__.call(Object(d["a"])(e))})),e}return a}(e),s=function(e,t){Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach((function(r){r.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/)||Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))};return r.forEach((function(e){s(n.prototype,e.prototype),s(n,e)})),n},y=(r("7514"),r("7618"));r("28a5");function x(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=C(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function C(e,t){if(e){if("string"===typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var k=function(){function e(){Object(v["a"])(this,e)}return Object(g["a"])(e,[{key:"processPartialUpdate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i,o,c,l,u=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.tables,a=t.query,n=t.hashsum,s=[],i=x(r.split(",")),e.prev=3,c=regeneratorRuntime.mark((function e(){var r,i,c,l,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=o.value,i=u.db.tables.find((function(e){return e.name===r})),c=u.db.sync||u.db.tables.find((function(e){return"sync"===e.name})),i&&c){e.next=5;break}return e.abrupt("return",{v:void 0});case 5:return e.next=7,i.where(a);case 7:return l=e.sent,e.next=10,l.count();case 10:if(d=e.sent,d){e.next=14;break}return console.info("Resource '".concat(r,"' won't be updated, as relevant records not locally present.")),e.abrupt("return","continue");case 14:return t.table=i,t.tableName=r,e.next=18,u.prepareCommitContext(t);case 18:if(p=e.sent,p){e.next=21;break}return e.abrupt("return","continue");case 21:return e.next=23,c.put({hashsum:n,table_name:r,timestamp:(new Date).getTime()});case 23:if(!u.commitPartialUpdate){e.next=27;break}return e.next=26,u.commitPartialUpdate(p);case 26:return e.abrupt("return","continue");case 27:s.push(p);case 28:case"end":return e.stop()}}),e)})),i.s();case 6:if((o=i.n()).done){e.next=15;break}return e.delegateYield(c(),"t0",8);case 8:if(l=e.t0,"continue"!==l){e.next=11;break}return e.abrupt("continue",13);case 11:if("object"!==Object(y["a"])(l)){e.next=13;break}return e.abrupt("return",l.v);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e["catch"](3),i.e(e.t1);case 20:return e.prev=20,i.f(),e.finish(20);case 23:return e.abrupt("return",s);case 24:case"end":return e.stop()}}),e,null,[[3,17,20,23]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"prepareCommitContext",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i,o,c,l,u,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.table,a=t.tableName,n=t.orig_op,s=t.query,i=t.deviceID,o=t.op,"delete"!==n){e.next=8;break}return e.next=4,r.where(s).delete();case 4:if(c=e.sent,!c){e.next=7;break}return e.abrupt("return",{query:s,deviceID:i,resource:a,op:"delete"});case 7:return e.abrupt("return",{});case 8:return l={"Content-Type":"application/json",Range:o},e.next=11,fetch(t.path,{headers:l,body:JSON.stringify(s),method:"POST"});case 11:if(u=e.sent,!u.ok){e.next=34;break}return e.next=15,u.json();case 15:if(d=e.sent,"patch"!==n){e.next=22;break}return e.next=19,r.where(s).modify(d);case 19:p=e.sent,e.next=32;break;case 22:if("post"!==n){e.next=28;break}return e.next=25,r.add(d);case 25:p=e.sent,e.next=32;break;case 28:if("put"!==n){e.next=32;break}return e.next=31,r.where(s).modify((function(){this.value=d}));case 31:p=e.sent;case 32:if(!p){e.next=34;break}return e.abrupt("return",{query:s,deviceID:i,op:n,resource:a,payload:d});case 34:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),O=k;function $(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=E(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function E(e,t){if(e){if("string"===typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function T(e){var t=I();return function(){var r,a=Object(h["a"])(e);if(t){var n=Object(h["a"])(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Object(f["a"])(this,r)}}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j="app.laima:fngprt",A="BEkBzZFbgJRXHm2kq9KKHUkq0uH_QNf2kkBc8foV9UZKMpzQOARCKgtJJcZ11_iUbGmrJUAdJRPppWHGW9L-fVk",R=new BroadcastChannel("swToClient"),P=new BroadcastChannel("clientToSw");function M(e){for(var t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(r),n=new Uint8Array(a.length),s=0;s<a.length;++s)n[s]=a.charCodeAt(s);return n}function L(){return"xxxxxxxx-xxxx-4xxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)}))}var N=function(){function e(){var t=this;Object(v["a"])(this,e);var r=window.localStorage.getItem(j);r||(r=L()),this.__fingerprint=r,document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&t.__fingerprint&&window.localStorage.setItem(j,t.__fingerprint)}))}return Object(g["a"])(e,[{key:"fingerprint",get:function(){return this.__fingerprint}}]),e}(),H=function(){function e(){Object(v["a"])(this,e)}return Object(g["a"])(e,[{key:"getServiceWorkerRegistration",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.getRegistration();case 2:if(t=e.sent,t){e.next=9;break}return e.next=6,window.navigator.serviceWorker.register("/sw.js",{updateViaCache:"none"});case 6:return t=e.sent,e.next=9,window.navigator.serviceWorker.ready;case 9:return t.addEventListener("updatefound",(function(){P.postMessage({action:"skipWaiting"})})),e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"claimNotificationPermission",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Notification.permission,r=!1,"granted"===t){e.next=10;break}return this.lockApp(),e.next=6,Notification.requestPermission();case 6:a=e.sent,"granted"===a&&(this.unlockApp(),r=!0),e.next=11;break;case 10:"granted"===t&&(this.unlockApp(),r=!0);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"lockApp",value:function(){this.app.$store.commit("LOCK_APP")}},{key:"subscribeUser",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]&&n[1],e.next=3,t.pushManager.getSubscription();case 3:if(a=e.sent,a){e.next=17;break}return e.prev=5,e.next=8,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:M(A)});case 8:return a=e.sent,e.next=11,this.updateSubscriptionOnServer(a);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](5),console.error(e.t0),this.app.notifyError(this.app.$t("notifs.push_sub_error"));case 17:if(!r){e.next=22;break}return e.next=20,this.app.sleep(2);case 20:return e.next=22,this.updateSubscriptionOnServer(a);case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this,[[5,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unlockApp",value:function(){this.app.$store.commit("UNLOCK_APP")}},{key:"updateSubscriptionOnServer",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.fingerprint,a=this.app.$store.state.auth.actorContext.id,n={select:{actor:a},payload:{devices:Object(m["a"])({},r,t.toJSON())}},e.next=5,this.app.requestResource("patch_user",{vm:this.app,data:n});case 5:s=e.sent,200===s.status&&this.app.$store.commit("auth/UPDATE_USER_CONTEXT",n);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),U=function(e){Object(p["a"])(r,e);var t=T(r);function r(e,a){var n;return Object(v["a"])(this,r),n=t.call(this),n.app=e,n.db=a,n.isSetup=!1,R.onmessage=n.receiveFromSW.bind(Object(d["a"])(n)),n}return Object(g["a"])(r,[{key:"checkPermissions",value:function(){return!(!("Notification"in window)||!window.navigator.serviceWorker)}},{key:"commitPartialUpdate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.op,a=t.resource,n=t.query,s=t.payload,i="partial_".concat(r,"_").concat(a),this.app.$store.dispatch(i,[this.app,n,s]);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"receiveFromSW",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.data.filter((function(e){return e.deviceID!==i.fingerprint})),a=$(r),e.prev=2,a.s();case 4:if((n=a.n()).done){e.next=10;break}return s=n.value,e.next=8,this.commitPartialUpdate(s);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](2),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setup",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],!this.isSetup){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.getServiceWorkerRegistration();case 5:return r=e.sent,e.next=8,this.claimNotificationPermission();case 8:if(a=e.sent,this.isSetup=!0,a){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,this.subscribeUser(r,t);case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),r}(w(N,H,O)),F=U,V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"lm-overlay select-none"},[r("div",{staticClass:"flex content-center flex-wrap justify-center h-full"},[r("div",{staticClass:"vx-card",staticStyle:{"max-width":"550px"}},[r("div",{staticClass:"flex"},[r("div",{staticClass:"w-1/3 bg-danger-grad rounded-l-lg flex"},[r("feather-icon",{staticClass:"mx-auto",attrs:{svgClasses:"w-16 h-16 self-center text-white",icon:"SlashIcon"}})],1),r("div",{staticClass:"w-2/3 my-16"},[r("h3",{staticClass:"mb-4 text-center text-danger"},[e._v(e._s(e.$t("headers.app_locked")))]),r("h5",{staticClass:"text-center font-normal"},[e._v("\n                        "+e._s(e.$t("headers.notif_required"))+"\n                        "),r("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("help_texts.push_notif_explain"),placement:"bottom",classes:"max-w-xs text-sm tracking-normal"},expression:"{content: $t('help_texts.push_notif_explain'), placement: 'bottom', classes: 'max-w-xs text-sm tracking-normal'}"}],staticClass:"absolute top-0 right-0 m-2"},[r("feather-icon",{staticClass:"mx-auto",attrs:{svgClasses:"w-7 h-7 text-primary",icon:"HelpCircleIcon"}})],1)])])])])])])},q=[],B={},W=B,Y=(r("2386"),r("2877")),z=Object(Y["a"])(W,V,q,!1,null,null,null),G=z.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"lm-overlay lock-screen select-none"},[r("div",{staticClass:"flex content-center flex-wrap justify-center h-full"},[r("div",{staticClass:"vx-card",staticStyle:{"max-width":"600px"}},[r("div",{staticClass:"vx-card__collapsible-content vs-con-loading__container"},[r("div",{staticClass:"full-page-bg-color"},[r("div",{staticClass:"vx-row no-gutter"},[r("div",{staticClass:"vx-col w-1/3 mx-auto self-center left-side"},[r("feather-icon",{staticClass:"mx-auto",attrs:{svgClasses:"w-16 h-16",icon:"KeyIcon"}})],1),r("div",{staticClass:"vx-col w-2/3 mx-auto self-center d-theme-dark-bg"},[r("div",{staticClass:"p-8"},[r("div",{staticClass:"vx-card__title mb-4"},[r("h3",{staticClass:"mb-4 text-center"},[e._v(e._s(e.$t("headers.session_locked")))]),r("h5",{staticClass:"text-center font-normal"},[e._v(e._s(e.$t("headers.enter_pin")))])]),r("masked-input",{staticClass:"vs-inputx vs-input--input hasValue text-2xl text-center",staticStyle:{"caret-color":"transparent"},attrs:{autocomplete:"off",id:"pincode-input",type:"text",name:"pin",mask:[/\d/,/\d/,/\d/,/\d/],placeholder:"____"},on:{click:function(e){return e.target.select()}},model:{value:e.unlockPIN,callback:function(t){e.unlockPIN=t},expression:"unlockPIN"}})],1),r("div",{staticClass:"vx-row no-gutter",staticStyle:{"margin-bottom":"25px"}},[r("a",{staticClass:"underline w-full text-center",attrs:{href:"#",target:"_self"},on:{click:e.logout}},[e._v(e._s(e.$t("headers.forgotten_pin")))])])])])])])])])])},J=[],X={data:function(){return{unlockPIN:null}},methods:{logout:function(){c["a"].logOut(),this.$store.commit("UNLOCK_SCREEN"),this.$router.push({name:"page-login"})}},watch:{unlockPIN:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t||t.match("_")||4!==t.length){e.next=6;break}return r={pin:t},e.next=4,this.requestResource("get_verifyScreenLock",{data:r});case 4:a=e.sent,403===a.status?this.notifyError(this.$t("notifs.pin_invalid")):200===a.status&&(this.$store.commit("UNLOCK_SCREEN"),this.notifySuccess(this.$t("notifs.screen_unlocked")));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},Q=X,Z=(r("8d6b"),Object(Y["a"])(Q,K,J,!1,null,null,null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vs-prompt",{staticStyle:{"z-index":"10000000"},attrs:{type:"dialog",title:e.$t("headers.auth_req_cta"),buttonsHidden:!0,active:e.$store.state.auth.resourceLocked}},[r("div",{attrs:{id:"shield-dialog"}},[r("h5",{staticClass:"mb-2"},[e._v(e._s(e.message))]),r("vac",{attrs:{"left-time":18e4},on:{finish:function(t){return e.$store.commit("auth/RESOURCE_UNLOCK")}},scopedSlots:e._u([{key:"process",fn:function(t){var a=t.timeObj;return r("div",{},[r("div",{staticClass:"vx-col w-full mt-5"},[r("vs-avatar",{staticStyle:{left:"50%","font-size":"23px",transform:"translateX(-50%)"},attrs:{size:"large",color:"danger","text-color":"danger",text:a.ceil.s.toString()+"s"}})],1),r("masked-input",{staticClass:"vs-inputx vs-input--input hasValue  font-big",staticStyle:{"caret-color":"transparent"},attrs:{autocomplete:"off",type:"text",name:"pin",mask:[/\d/,/\d/,/\d/,/\d/,/\d/,/\d/],placeholder:"______"},on:{click:function(e){return e.target.select()}},model:{value:e.shieldCode,callback:function(t){e.shieldCode=t},expression:"shieldCode"}})],1)}}])},[r("h3",{staticClass:"pt-4 text-center text-danger",attrs:{slot:"finish"},slot:"finish"},[e._v(e._s(e.$t("headers.too_late")))])])],1)])},re=[],ae=r("c986"),ne=r.n(ae);n["default"].use(ne.a,"vac");var se={computed:{message:function(){var e=this.$store.getters["auth/shieldMethod"],t=this.$t("misc.texted_code_msg"),r=this.$t("misc.enter_pin_code");return e&&"sms"===e?t:r},requestPayload:function(){return this.$store.state.auth.pendingShieldedRequest}},data:function(){return{shieldCode:null}},methods:{resubmitResource:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object.assign({},this.$store.state.auth.pendingShieldedRequest),delete t.data,r=t.opts,r.query={shieldcode:this.shieldCode},e.next=6,this.requestResource(t.resource,r);case 6:a=e.sent,200===a.status?(this.notifySuccess(this.$t("misc.auth_ok")),this.$store.commit("auth/RESOURCE_UNLOCK"),this.$store.commit("auth/SET_SHIELDED_RESPONSE",{data:a.data,source:t.resource})):423===a.status&&"Shield token not supplied or invalid"!==a.data.cause&&(this.notifyError(this.$t("misc.auth_failed")),this.$store.commit("auth/RESOURCE_UNLOCK"));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},watch:{shieldCode:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t||t.match("_")||6!==t.length){e.next=3;break}return e.next=3,this.resubmitResource();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},ie=se,oe=(r("0378"),Object(Y["a"])(ie,te,re,!1,null,null,null)),ce=oe.exports,le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"lm-overlay select-none"},[r("div",{staticClass:"flex content-center flex-wrap justify-center h-full"},[r("div",{staticClass:"vx-card",staticStyle:{"max-width":"780px"}},[r("div",{staticClass:"flex"},[r("div",{staticClass:"w-1/3 bg-primary-grad rounded-l-lg flex"},[r("feather-icon",{staticClass:"mx-auto",attrs:{svgClasses:"w-16 h-16 self-center text-white",icon:"UserIcon"}})],1),r("div",{staticClass:"w-2/3 px-4"},[r("h3",{staticClass:"mb-4 mt-6 text-center text-primary"},[e._v(e._s(e.$t("headers.complete_data")))]),r("h5",{staticClass:"mb-4 text-center font-normal text-grey-500"},[e._v(e._s(e.$t("headers.need_your_info")))]),r("laima-form",{ref:"laima",staticClass:"user-laima-form shadow-none mt-8",attrs:{cleanForm:e.cleanPersonalPayload,formFields:e.personalInfoFields,isLoading:e.isSaving,modelsContainer:e.$store.getters["auth/getUserContext"]||{},onSubmit:e.savePersonalData}})],1)])])])])},ue=[],de={data:function(){return{isSaving:!1}},computed:{personalInfoFields:function(){return[{name:"fullname",type:"text",validators:{required:!0},helpText:this.$t("help_texts.fullname"),label:this.$t("fields.name"),placeholder:this.$t("placeholders.fullname")},{name:"dob",type:"date",validators:{required:!0},label:this.$t("fields.dob")}]}},methods:{cleanPersonalPayload:function(e){if(e.fullname){var t=e.fullname.split(" "),r=Object(a["a"])(t,2),n=r[0],s=r[1];if(!s)throw new this.ValidationError("fullname","Last name is required");e=Object.assign(e,{name:n,last_name:s}),delete e.fullname}return e.dob&&(e.dob=new Date(e.dob).toISOString().split("T")[0]),e},savePersonalData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.requestResource("post_user",{data:t,vm:this,similarErrMsgMap:{fullname:{".*?already exists":this.$t("notifs.user_exists")}},errRespMap:{actor:"fullname"}});case 2:if(r=e.sent,200!==r.status){e.next=11;break}return this.isSaving=!0,this.$store.dispatch("auth/updateUserContext",t),this.notifySuccess(this.$t("notifs.saved_user_details")),e.next=9,this.$root.syncManager.setup(!0);case 9:setTimeout((function(){a.$store.commit("auth/USER_MISSING",!1)}),200),this.isSaving=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},pe=de,fe=(r("1a5c"),Object(Y["a"])(pe,le,ue,!1,null,null,null)),he=fe.exports,me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"lm-overlay select-none syncin-progress"},[r("div",{staticClass:"flex content-center flex-wrap justify-center h-full"},[r("div",{staticClass:"vx-card",staticStyle:{"max-width":"780px"}},[r("div",{staticClass:"flex"},[e._m(0),r("div",{staticClass:"w-2/3 px-4"},[r("header",[r("h2",{staticClass:"mb-4 mt-6 text-center"},[e._v(e._s(e.$t("headers.sync_in_progress")))]),r("h4",{staticClass:"mb-4 text-center font-normal text-grey-500"},[e._v(e._s(e.$t("headers.sync_details")))])]),r("div",{staticClass:"resources mt-10 mx-auto px-32"},e._l(e.nowSyncing,(function(t,a){return r("div",{key:a,staticClass:"text-xl justify-between flex flex-row w-full"},[r("div",[e._v("  "+e._s(t)+" ... ")]),r("div",[1===e.nowSyncing.length||a==e.nowSyncing.length-1?r("svg",{attrs:{width:"24px",height:"24px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"}},[r("circle",{attrs:{cx:"50",cy:"50",fill:"none",stroke:"#47a6de","stroke-width":"8",r:"35","stroke-dasharray":"164.93361431346415 56.97787143782138"}},[r("animateTransform",{attrs:{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",values:"0 50 50;360 50 50",keyTimes:"0;1"}})],1)]):r("svg",{staticClass:"w-8 h-8 text-success relative",staticStyle:{left:"3px"},attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"}})])])])})),0)])])])])])},ve=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"w-1/3 loading-box rounded-l-lg flex"},[r("div",{staticClass:"spinner justify-center self-center"},[r("div",{staticClass:"double-bounce1"}),r("div",{staticClass:"double-bounce2"})])])}],ge={computed:{nowSyncing:function(){return this.$store.state.nowSyncing}}},be=ge,_e=(r("6446"),Object(Y["a"])(be,me,ve,!1,null,null,null)),we=_e.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"h-screen flex w-full bg-img vx-row no-gutter items-center justify-center",staticStyle:{"z-index":"9999"},attrs:{id:"page-login"}},[a("div",{staticClass:"vx-col sm:w-1/2 md:w-1/2 lg:w-full sm:m-0"},[e._m(0),a("vx-card",{staticClass:"max-w-2xl mx-auto"},[a("div",{staticClass:"full-page-bg-color",attrs:{slot:"no-body"},slot:"no-body"},[a("swiper",{ref:"swiper",attrs:{options:e.swiperOptions}},[a("swiper-slide",[a("div",{staticClass:"vx-row no-gutter justify-center items-center"},[a("div",{staticClass:"vx-col hidden lg:block lg:w-1/2 flex-shrink-0"},[a("img",{staticClass:"flex-shrink-0 w-full mx-auto bg-contain",attrs:{src:r("ce01"),alt:"login"}})]),a("div",{staticClass:"vx-col sm:w-full md:w-full lg:w-1/2"},[a("div",{staticClass:"p-8 login-tabs-container"},[a("div",{staticClass:"vx-card__title mb-10"},[a("h4",{staticClass:"mb-1 font-semibold"},[e._v(e._s(e.title))]),a("p",[e._v(e._s(e.welcomeText))])]),a("div",[a("vs-input",{staticClass:"w-full",attrs:{name:"email","icon-no-border":"",icon:"icon icon-user","icon-pack":"feather",placeholder:this.$t("placeholders.email")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("vs-input",{staticClass:"w-full mt-6",attrs:{type:"password",name:"password","icon-no-border":"",icon:"icon icon-lock","icon-pack":"feather",placeholder:this.$t("fields.password")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("div",{staticClass:"flex flex-wrap justify-between mt-8 my-5"},[a("router-link",{attrs:{to:{name:"pageForgottenPassword"}}},[e._v(e._s(e.$t("headers.forgot_pass")))])],1),a("vs-button",{attrs:{type:"border"},on:{click:e.registerUser}},[e._v("Register")]),a("vs-button",{staticClass:"float-right",attrs:{disabled:!e.validateForm},on:{click:e.login}},[e._v(e._s(e.$t("headers.login")))])],1)])])])]),a("swiper-slide",[a("div",{ref:"contsel",staticClass:"w-selection-container"},[a("vs-row",[a("vs-col",{attrs:{"vs-w":"12"}},[a("h3",{staticClass:"p-6"},[e._v(e._s(e.$t("headers.select_clinic")))]),a("vs-divider",{staticClass:"custom-divider"}),e._l(e.availableWorkspaces,(function(t){return a("vs-row",{key:t.id,attrs:{"vs-type":"flex","vs-justify":"space-around","vs-align":"center"}},[a("vs-col",{staticClass:"workspace-tile",attrs:{"vs-w":"12"}},[a("div",{staticClass:"workspace-row noselect",on:{click:function(r){return e.selectWorkspace(t)}}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("svg",{staticClass:"chevron-custom feather feather-chevron-right w-4 h-4",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[a("polyline",{attrs:{points:"9 18 15 12 9 6"}})])])]),a("vs-divider",{staticClass:"custom-divider"})],1)}))],2)],1)],1)])],1)],1)])],1)])},xe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lg:hidden  w-full flex -mt-4"},[a("img",{staticClass:"pb-6 logo-solo mx-auto",attrs:{src:r("58e1"),alt:"login"}})])}],Ce=(r("8e6e"),r("456d"),r("455b"),r("7212"));function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){Object(m["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Oe={components:{swiper:Ce["swiper"],swiperSlide:Ce["swiperSlide"]},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{email:"",password:"",swiperOptions:{allowTouchMove:!1}}},computed:{login_sources:function(){return{resetPass:{title:this.$t("login_sources.resetPass.title"),msg:this.$t("login_sources.resetPass.msg")},activated:{title:this.$t("login_sources.activated.title"),msg:this.$t("login_sources.activated.msg")},configured:{title:this.$t("login_sources.configured.title"),msg:this.$t("login_sources.configured.msg")},compromised:{title:this.$t("login_sources.compromised.title"),msg:this.$t("login_sources.compromised.msg")}}},validateForm:function(){return!this.errors.any()&&""!=this.email&&""!=this.password},selectedWorkspace:function(){return this.$store.state.auth.selectedWorkspace},availableWorkspaces:function(){return this.$store.state.auth.availableWorkspaces},title:function(){var e=this.$route.query.source;return e&&this.login_sources[e]&&this.login_sources[e].title||this.$t("headers.login")},welcomeText:function(){var e=this.$route.query.source;return e&&this.login_sources[e]&&this.login_sources[e].msg||this.$t("headers.welcome_back")}},methods:{forceLogout:function(){c["a"].clearLocalStorage(),this.$http.get("/api/actor/logout/")},login:function(){this.forceLogout();var e=ke({userDetails:{email:this.email,password:this.password},slider:this.$refs.swiper.swiper},this);Object.keys(this.$store.state.auth.selectedWorkspace)[0]&&(e.userDetails.workspace=this.$store.state.auth.selectedWorkspace.id),this.$store.dispatch("auth/login",[e,this])},notifyAlreadyLogedIn:function(){},selectWorkspace:function(e){this.$store.commit("auth/SET_CURRENT_WORKSPACE",e),this.login()},registerUser:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push({name:"pageRegister"});case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},$e=Oe,Ee=(r("f499"),Object(Y["a"])($e,ye,xe,!1,null,null,null)),De=Ee.exports,Te="pl",Ie={components:{AppLock:G,LockScreen:ee,ShieldDialog:ce,SyncInProgress:we,UserCompleteData:he,Login:De},data:function(){return{db:l["a"],isAuthed:null,vueAppClasses:[],diff:1,showWarningFlag:!1,mounted:!1,idlenessEvents:["mousemove","keydown","mousedown","touchstart"]}},watch:{"$store.state.stateLoading":function(e){var t=document.querySelector(".router-content");t&&(e&&(this.$vs.loading({container:".content-wrapper",clickEffect:!0}),this.$nextTick((function(){t.classList.add("blur-3")}))),this.$vs.loading.close(".content-wrapper > .con-vs-loading"),t.classList.remove("blur-3"))},appReady:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}if(this.$store.getters["auth/getUserContext"]){e.next=5;break}this.$store.commit("auth/USER_MISSING",!0),e.next=7;break;case 5:return e.next=7,this.syncManager.setup();case 7:this.$i18n.locale=Te,this.$store.dispatch("core/fetchClinics"),this.$store.dispatch("core/fetchDoctors");case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),"$vs.rtl":function(e){document.documentElement.setAttribute("dir",e?"rtl":"ltr")}},computed:{appLocked:function(){return this.$store.state.appLocked},appReady:function(){var e=this.$store.state.auth;return!e.actorContextLoading&&!e.metaContextLoading&&!this.inSync},cloakBlur:function(){var e=this.userContextMissing||this.showLockScreen||this.resourceLocked||this.appLocked||this.inSync;return e&&{filter:"grayscale(1) blur(5px)"}||{}},inSync:function(){return this.$store.state.inSync},loggedIn:function(){return!!this.$store.state.auth.spec},resourceLocked:function(){return this.$store.state.auth.resourceLocked},screenlockSet:function(){return this.$store.state.screenLock.isSet},secondsToExpiry:function(){return this.mounted,this.$refs.idle&&this.$refs.idle.seconds||30},showLockWarning:function(){return this.screenlockSet&&this.loggedIn&&!this.showLockScreen&&this.showWarningFlag},showLockScreen:function(){return this.screenlockSet&&this.loggedIn&&this.$store.state.screenLock.isLocked},userContextMissing:function(){return this.$store.state.auth.userMissing}},methods:{controlLockScreenWarningFlag:function(){this.showWarningFlag=!1},setAppClasses:function(e){this.vueAppClasses.push(e)},handleWindowResize:function(){this.$store.commit("UPDATE_WINDOW_WIDTH",window.innerWidth),document.documentElement.style.setProperty("--vh","".concat(.01*window.innerHeight,"px"))},handleScroll:function(){},login:function(){var e=this.$route.path;u["a"].$emit("logout",{toPath:e})}},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s,i,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u["a"].$on("logout",(function(e){o.isAuthed=!1})),u["a"].$on("login",(function(e){o.isAuthed=!0})),t=new F(this,l["a"]),this.syncManager=t,this.$root.syncManager=t,t.checkPermissions||this.$store.commit("UNSUPPORTED_BROWSER"),u["a"].$on("unauthed",(function(){o.login()})),r=.01*window.innerHeight,document.documentElement.style.setProperty("--vh","".concat(r,"px")),a=this.$vs.rtl?"rtl":"ltr",document.documentElement.setAttribute("dir",a),n=c["a"].isAuthenticated(),n){e.next=14;break}return e.abrupt("return",this.login());case 14:s=window.localStorage.getItem("app.laima.metaContext"),i=window.localStorage.getItem("app.laima.actorInfo"),e.prev=16,s=JSON.parse(s),i=JSON.parse(i),e.next=25;break;case 21:return e.prev=21,e.t0=e["catch"](16),console.error("An error ocurred while trying to parse localstorage context",e.t0),e.abrupt("return",this.login());case 25:this.$store.dispatch("auth/setActorContext",[i,"meta-sync",this,s]),this.$store.commit("UPDATE_WINDOW_WIDTH",window.innerWidth),window.addEventListener("resize",this.handleWindowResize),window.addEventListener("scroll",this.handleScroll),this.idlenessEvents.forEach((function(e){window.addEventListener(e,o.controlLockScreenWarningFlag)})),this.mounted=!0;case 31:case"end":return e.stop()}}),e,this,[[16,21]])})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){var e=this;this.idlenessEvents.forEach((function(t){window.removeEventListener(t,e.controlLockScreenWarningFlag)}))},destroyed:function(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("scroll",this.handleScroll)}},je=Ie,Ae=(r("5c0b"),Object(Y["a"])(je,s,i,!1,null,null,null)),Re=Ae.exports,Pe=r("9c48"),Me=r("d1d6"),Le=r.n(Me),Ne=r("4639"),He=r.n(Ne),Ue=r("a925"),Fe=(r("52ad"),{buttons:{accept:"Accept",add_new_break:"Add new break",add_proc:"Add new procedure",back:"Back",cancel:"Cancel",change_avatar:"Change profile picture",next:"Next",refresh:"Refresh",save:"Save",select_avatar:"Select profile picture",send:"Send",show_details:"Show details",submit:"Submit",reset:"Reset",remove_break:"Remove the break",remove_schedule:"Remove the schedule",upload:"Upload"},datetime:{month:"Month",week:"Week",day:"Day",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},fields:{account:"Account",address:"Address",city:"City",clinic_email:"Clinic's email address",clinic_name:"Clinic name",clinic_desc:"Clinic description",clinic_phone:"Clinic's phone number",clinics:"Clinics",confirmed:"Confirmed",confirm_pass:"Confirm password",def_currency:"Default currency",default_visit_interval:"Default visit duration",dob:"Date of birth",doctor:"Doctor",duration:"Visit duration",email:"Email address",lactating:"Is lactating?",lastname:"Last name",lock_pin:"Screen Lock PIN",maxprice:"Max price",message:"Message",name:"Name",office_count:"Number of offices/surgeries in the clinic",otp_qr:"One Time Password QR-code",password:"Password",patient_id:"Patient ID",phone:"Phone number",pregnant:"Is pregnant?",proc_desc:"Procedure description (optonal)",proc_name:"Procedure name",procedure_category:"Procedure category",proc_duration:"Estimated duration",primary_teeth:"Has primary teeth?",recipients:"Recipients",send_confirmation_before:"Send visit confirmation before",scope:"Scope",scopes:"Scopes",status:"Status",startTime:"Start hour",tax_id:"Tax ID",teething:"Is teething?",time2lock:"Time to lock",to:"To",to_hour:"To hour",username:"Username",use_lock:"Use the Screen Lock",use_widget:"Use self-registration widget",visit_date:"Appointment date",website:"Website address",widget_select_clinic:"Select clinic in first step",zipcode:"Postcode"},help_texts:{default_visit_interval:"An average estimated duration of one visit in minutes",dragndrop_here:"Drag an image file here",duration:"Duration of the visit in minutes",fullname:"Your full name",lock_pin:"This 4-digit number will be used to unlock the screen.",otp:"Get you Aegis Authenticator App ready to scan the code.",phone_why:"We will only send confirmation codes on this number",push_notif_explain:"Unless you explicitly opt it, we won't send you any notifications. We need them, however, to push updates to your application.",send_confirmation_before:"How many days before the visit should we send a confirmation text to the patient?",time2lock:"Time in seconds to elapse on idle before the screen gets locked.",use_widget:"Use Laima-powered widget on your website to allow patients to self-register",website:"The address of your clinic's website where you wish for laima widget to be installed",widget_select_clinic:"If on, a patient will get to choose which clinic to register with",widgets_procedures:"This is the list from which the patient will choose the desired procedures during self registration"},headers:{account_config:"Account configuration",account_activated:"Account activated successfully. Please provide more details about your clinic below.",account_activated_short:"Account activated!",account_registered:"Account registered successfully!",add_clinic:"Add New Clinic",add_patient:"Add New Patient",add_proc:"Add custom procedure",add_new:"Add New",add_schedule:"Add new schedule",add_staff:"Add staff member",add_visit:"Add new appointment",app_locked:"Application locked",apply_hrs_to_all:"Apply hours to all days",apply_the_same_to_all:"Apply same business hours to all selected days",archived_visit:"This appointment is archived",archived_visit_desc:"This appointment already took place.You can view its content but cannot introduce any changes.",auto_redirect_warn:"You'll be redirected to main page automatically",auth_req_cta:"Authenticate your request",available:"Available",back_to_login:"Back To Login",basics:"Basics",bh_changes_warning:"Please note that any changes made here won 't come into effect before",bh_changes_disclaimer:"If you wish to being these changes to effects earlier, cancel or move the latest appointments.",break:"Break",business_hours:"Business hours",category:"Category",click_to_verif:"Click here to verify.",clinic_closed:"Clinic closed",clinic_details:"Clinic details",clinic_openes_at:"Clinic opens at",clinic_closes_at:"Clinic closes at",contact:"Contact details",complete_data:"Just one more thing",copy_script:"Copy the script below and have it inserted into your website",country:"Country",create_account:"Create account",create_account_cta:"Fill the below form to create a new account.",date:"Date",delete_schedule:"Delete schedule",desc:"Description",desc_proc:"Describe the procedure",details:"Details",disabled_days_disclaimer:"Days left unchecked are tantamount to clinic closures.",dismissLockWarning:"Click anywhere to dimiss.",editing:"Editing",e404:"404 - Page Not Found!",email_verified:"Email address verified",email_prompt_pass_reset:"Please enter your email address and we'll send you instructions on how to reset your password.",enter_pin:"Enter your screen PIN to unlock",enter_new_pass:"Please enter your new password.",enter_verif_code:"Enter verification code",enter_verif_code_cta:"Please enter it right below.",est_pricing:"Establish the pricing",est_proc_duration:"Estimated procedure duration (in minutes)",forgot_pass:"Forgot Password?",forgotten_pin:"I forgot my PIN number",gonna_redirect:"You'll be redirected to log in now.",goto_login:"Go Back To Login",invitee_question:"Whom would you like to invite",invitation_desc:"We will send a link to create a new account to this person. Upon completing the application form, we will then let you know that their account has been created.",legal:"Legal",lockscreen_code_disclaimer:"In certain cases, you may be asked to provide a One Time Password, or OTP, to authenticate your actions.",login:"Login",max_price:"Max price",min_price:"Min price",need_your_info:"We need some extra information to finish registration",no_visits_in_timeframe:"No appointments found in this time range",no_schedules:"No schedule",notif_required:"Please enable notification permissions to unlock",otp_app_cta:"You need to download the Aegis Authenticator app on your phone and, with it, scan the QR code you will find by clicking the button below.",otp_setup:"One Time Password Setup",pass_reset:"Password reset!",patient:"Patient",personal_info:"Personal Information",phone_not_verif:"Phone number not verified.",pref:"Preferences",price:"Price",pricing_discrete:"Let me provide the maximum price",pricing_fixed:"Pricing is fixed",pricing_uncapped:"Maximum price is unbounded",procedures:"Procedures",register:"Register",remove_procedure:"Remove procedure",reset_pass:"Reset your password",reset_pass_email_sent:"We sent an email to {email} with further instructions on how to create a new password.",scan_code_cta:"Scan the QR code with your Aegis App",screen_lock:"Screen Lock",select_clinic:"Select clinic",session_locked:"Your session is locked",security:"Security",sel_cat:"Select name and category",send_sms:"Send SMS",session_expires_in:'Your session will expire in <span class="text-danger">{seconds}</span> seconds.',staff_list:"Staff list",subgroup:"Subgroup",subject:"Subject",sync_details:"This only has to be done once",sync_in_progress:"Synchronizing data",tax_rate:"Tax rate",tax_rate_disclaimer:"If you're unsure, leave it at 0. You can always edit this later.",tc_accepted:"I read and accept the terms & conditions.",text_reports:"Text Reports",texted_verif_code:"We just texted you a 4-digit verification code.",too_late:"Sorry, too late!",to:"To",unavailable_from:"Unavailable from",unavailable_until:"Unavailable until",unsupported_browser:"Apologies. Your browser is not supported.",user_settings:"User settings",verify_email_cta:"Email address changed. Please verify the new address by following the instructions we just sent to you by email.",view:"View",view_visits:"View visits",visit:"Appointment",visit_config:"Appointment settings",welcome_back:"Welcome back, please login to your account.",widget_not_installed:"Self-registration widget was not detected installed on your website",widget_installed:"Self-registration widget was installed successfully on your website",widget_settings:"Widget settings",widget:"Widget"},login_sources:{resetPass:{msg:"You can now log in with your new password",title:"New password set"},activated:{msg:"Log in with credentials provided during registration",title:"Your account has been actived"},configured:{msg:"Log in with credentials provided during registration",title:"Your account has been configured"},compromised:{msg:"Log back in again",title:"Your session has been compromised"}},menu:{addCost:"Add cost",admin:"Administration",appointmentAdd:"New Appointment",appointmentView:"View Appointment",clinic:"Clinic",consentAdd:"New consent",consentRemove:"Remove consent",finance:"Finance",help_desk:"Help Desk",home:"Home",invoices:"Invoices",knowledgebase:"Knowledge Base",patients:"Patients",settings:"Settings",scheduler:"Scheduler",sms:"Sms",staff:"Staff",patcon:"Patients consents",stock:"Stock",support:"Support",taskList:"Task List",visit:"Appointment"},misc:{activ_instr:"To activate your account, follow the instructions from the email we just sent to you.",auth_ok:"Authorization succeeded",auth_failed:"Authorization failed",booked_msg:"A confirmation text will be sent to this patient {notifOffset} hours before the appointment",changed_field:"Changed <b>{field}</b> from <i>{from}</i> to <i>{to}</i>",changed_field_to:"Changed <b>{field}</b> to <i>{to}</i>",confirmed_msg:"This patient has confirmed their arrival.",confirmation_pending:"Appointment pending confirmation",delete_procedure_prompt:"Are you sure you want to delete this procedure?",delete_schedule_confirmation:"All reserved appointments ({visitsCount}) will be cancelled.",delete_schedule_prompt:"Are you sure you want to remove this schedule?",enter_pin_code:"Enter a 6-digit code from your Aegis App",filtered_patient:"Showing appointments for <b class='font-medium'>{fullname}</b>",include_day_in_all:"Include day in all schedules",hours:"hours",maxprice_note:"Enter '0' if you wish for the maximum price to be unspecified",must_be_gte:"The {field} must be greater or equal to {otherField}",newer:"Newer",no_avail_offices:"No available offices. Choose different hour",no_visits:"No appointment",older:"Older",pending_msg:"A confirmation text was sent to this patient but no response was produced.",planner:"planner",proc_example:"E.g. extraction",profile_incomplete:'Your profile is not complete. Click <a href="/#{route_url}">here</a> to fill out the missing information.',remove_day_from_all:"Remove day from all schedules",scheduler:"scheduler",select_doctor:"Select doctor to change schedule",set_field:"Set <b>{field}</b> to <i>{to}</i>",show_all:"Show all",texted_code_msg:"We just texted you a 6-digit verification code.",totp_pin_prompt:"Your TOTP secret",visit_booked:"Appointment booked",visit_confirmed:"Appointment confirmed",visit_pending:"Appointment not confirmed",your_address:"your address"},notifs:{account_activation_failed:"Failed to activate account",added_widget_proc:"Added procedure <i>{proc}</i> to self-registration widget",already_logged:"You are already logged in!",avatar_updated:"Your profile picture has been updated",break_changed:"Break changed to end at <i>{newEnd}</i>",break_changed_failed:"Failed to change the break",break_removed:"Removed schedule break",break_remove_failed:"Failed to remove the schedule break",cannot_overlap:"Can't overlap with another break",cannot_overlap_with_break:"Can't overlap with a break",changed_bh:"Changed business hours",clinic_added:"Clinic <i>{workspace_name}</i> added",clinic_added_failed:"Failed adding new clinic",clinic_deleted:"Clinic <i>{clinic_name}</i> has been deleted",clinic_deleted_failed:"Failed deleting the clinic",clinic_update_failed:"Failed to update the clinic",changed_clinic_url:"Changed clinic's <b>website address</b> from <i>{oldaddr}</i> to <i>{newaddr}</i>",changes_saved:"Changes saved",failed_procedure_update:"Failed to update the procedure",failed_reset_pass:"Failed to reset the password",failed_set_pass:"Failed to set new password",failed_send_verif:"Failed to send the verification code",lock_on:"Lock screen is <b>on</b>",lock_off:"Lock screen is <b>off</b>",logged:"Logged in",new_schedule:"Created new schedule on <i>{date}</i>",new_schedule_break:"New schedule break added at <i>{timeStart}</i>",new_schedule_break_failed:"Failed to add a schedule break",new_schedule_failed:"Failed to create a new schedule",new_visit:"Created new appointment for <i>{title}</i>",new_visit_cta:"New Appointement",no_cancel_expired_visits:"Cannot cancel an expired appointment",no_extend_schedule_outside_clinic:"Can\t extend the schedule beyond clinic's opening hours",no_change_expired_schedule:"Can't change an expired schedule",no_break_outside_schedule:"Can only change the break duration within the schedule",no_schedules_in_past:"Can't create a schedule in the past",no_expired_schedules_removed:"Schedule in the past",no_schedule_before_opening:"Schedule cannot start before the clinic opens",no_schedule_after_closure:"Schedule cannot end after the clinic closes",no_time_new_visit:"Not enough time for new appointment",no_visits_in_past:"Cannot create an appointment in the past",op_failed:"Operation failed",patient_added:"Patient <i>{fullname}</i> added",patient_registered:"Patient already registered",patient_updated:"Patient updated successfully",patient_update_failed:"Failed to update patient",pin_invalid:"PIN invalid",procedure_added:"Procedure <i>{name}</i> added successfully",procedure_added_failed:"Failed to add a new procedure",procedure_deleted:"Procedure <i>{name}</i> has been deleted",procedure_deleted_failed:"Failed deleting the procedure",prompt_cancel_visit:"Are you sure you want to cancel this appointment?",push_sub_error:"Unexpected error occurred. Application may experience suboptimal performance.",registered_title:"Registered successfully",registered_text:"You'll be redirected to log in now",removed_widget_proc:"Removed procedure <i>{proc}</i> from self-registration widget",saved_user_details:"Saved user details",schedule_deleted:"Schedule deleted",schedule_end_change_failed:"Failed to change schedule's end hour",schedule_removal_failed:"Failed to remove the schedule",schedule_set:"Schedule set to end at <i>{newEnd}</i>",screen_unlocked:"Screen unlocked",scheduled_text_submission:"Scheduled sending text message to {count} patients",sent_invitation:"Invitation sent",sent_invitation_to:"Sent invitation to <i>{email}</i>",set_clinic_url:"Changed clinic's <b>website address</b> to <i>{url}</i>",server_error:"Something went wrong. Please try again later.",text_failed:"Failed to send text",user_exists:"User already exists",verif_code_invalid:"Code invalid or expired",verif_code_ok:"Number verified successfully",visit_canceled:"Appointment canceled",visit_cancel_cta:"Cancel appointment",visit_cancel_failed:"Failed to cancel the appointment",visit_in_the_past:"Appointment in the past",visit_moved:"Appointment moved to <i>{newStart}</i>",visit_move_failed:"Failed to move the appointment",visit_would_overlap:"This change would overlap with another appointment",widget_off:"The self-registration widget has been turned off",zero_texted:"0 patients texted"},overlapMessages:{changeWouldOverlapSlot:"This change would overlap with a reserved slot",changeWouldOverlapBreak:"This change would overlap with a break",closedMorning:"Starts too early",closedEvening:"Ends too late",lunch:"Overlaps with a break",main:"Overlaps with another appointment",noOffices:"No available offices",no_overlap_with_breaks:"Can't overlap with another break"},options:{endo:"Endodontics",maintainers:"Space Maintainers",restor:"Restorative Dentistry",surgery:"Oral Surgery",periodontics:"Periodontics",prosthodontics:"Prosthodontics",visits:"Visits And Evaluations",xray:"Radiographs"},placeholders:{address:"Washington Ave 14",city:"New York",clinic_name:"e.g. Best Dental Clinic",clinic_desc:"Your custom description of your clinic",email:"jane.doe@example.com",fullname:"e.g. Joe Doe",lastname:"Doe",message:"Your message...",name:"Jane",patient_searchbar_prompt:"Enter patient's name or PESEL...",phone:"e.g. +12345678900",select_rec:"Select recipients...",website:"e.g. www.my-clinic.com",zipcode:"22-111"},slot_edit_msgs:{category:"Appointment's category changed to <i>{msg}</i>",date:"Appointment rescheduled to <i>{msg}</i>",doctor:"Appointment reassigned to <i>{name} {last_name}</i>",during:"Appointment's duration changed to <i>{msg} mins</i>",start:"Appointment rescheduled to begin at <i>{msg}</i>",end:"Appointment rescheduled to end at <i>{msg}</i>",default:"Appointment changed successfully"}}),Ve={fields:{Name:"Imi",PESEL:"PESEL","Last Name":"Nazwisko",Address:"Adres",City:"Miasto","Phone number":"Numer telefonu","Email address":"Adres e-mail","Has primary teeth?":"Ma zby mleczne?","Is teething?":"Czy zbkuje?","Is pregnant?":"Czy jest w ciy?","Is lactating?":"Czy karmi piersi?"},options:{visits:"Przegld",xray:"Przewietlenie",maintainers:"Wypenienia",restor:"Stomatologia zachowawcza ",surgery:"Chirurgia jamy ustnej",endo:"Endodoncja",periodontics:"Periodoncja",prosthodontics:"Protetyka"}};n["default"].use(Ue["a"]);var qe,Be,We={en:Fe,pl:Ve},Ye=new Ue["a"]({locale:"en",fallbackLocale:"en",messages:We}),ze=r("fb9a"),Ge=r.n(ze),Ke=(r("c789"),r("04f2"),r("b55b"),r("7fa7")),Je=r.n(Ke),Xe=r("e37d"),Qe=r("bb36"),Ze=(r("1dff"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._g({ref:"card",staticClass:"vx-card",class:[{"overflow-hidden":e.tempHidden},{"no-shadow":e.noShadow},{"rounded-none":e.noRadius},{"card-border":e.cardBorder},e.cardClasses],style:e.cardStyles},e.$listeners),[e.hasHeader?r("div",{staticClass:"vx-card__header"},[r("div",{staticClass:"vx-card__title"},[this.$props.title?r("h4",{class:e.titleClasses,style:e.titleStyles},[e._v(e._s(e.title))]):e._e(),this.$props.subtitle?r("h6",{class:e.subtitleClasses,style:e.subtitleStyles},[e._v(e._s(e.subtitle))]):e._e()]),e.hasAction?r("div",{staticClass:"vx-card__actions"},[e._t("actions",[(e.actionButtons||e.collapseAction||e.refreshContentAction||e.removeCardAction)&&!e.codeToggler?r("div",{staticClass:"vx-card__action-buttons"},[e.actionButtons||e.collapseAction?r("feather-icon",{staticClass:"ml-4",class:{rotate180:!e.isContentCollapsed},attrs:{icon:"ChevronUpIcon"},on:{click:e.toggleContent}}):e._e(),e.actionButtons||e.refreshContentAction?r("feather-icon",{staticClass:"ml-4",attrs:{icon:"RotateCwIcon"},on:{click:e.refreshcard}}):e._e(),e.actionButtons||e.removeCardAction?r("feather-icon",{staticClass:"ml-4",attrs:{icon:"XIcon"},on:{click:e.removeCard}}):e._e()],1):e._e(),e.codeToggler&&!e.actionButtons?r("div",{staticClass:"vx-card__code-toggler sm:block hidden"},[r("feather-icon",{class:{"border border-solid border-primary border-t-0 border-r-0 border-l-0":e.showCode},attrs:{icon:"CodeIcon"},on:{click:e.toggleCode}})],1):e._e()])],2):e._e()]):e._e(),r("div",{ref:"content",staticClass:"vx-card__collapsible-content vs-con-loading__container",class:[{collapsed:e.isContentCollapsed},{"overflow-hidden":e.tempHidden}],style:e.StyleItems},[e._t("no-body"),this.$slots.default?r("div",{staticClass:"vx-card__body"},[e._t("default")],2):e._e(),e._t("no-body-bottom"),this.$slots.footer?r("div",{staticClass:"vx-card__footer"},[e._t("footer")],2):e._e()],2),r("div",{directives:[{name:"show",rawName:"v-show",value:this.$slots.codeContainer,expression:"this.$slots.codeContainer"}],ref:"codeContainer",staticClass:"vx-card__code-container",class:{collapsed:!e.showCode},style:e.codeContainerStyles},[r("div",{staticClass:"code-content"})])])}),et=[],tt=r("ee53"),rt={name:"vx-card",props:{title:String,subtitle:String,actionButtons:{type:Boolean,default:!1},actionButtonsColor:{type:String,default:"success"},codeToggler:{type:Boolean,default:!1},noShadow:{default:!1,type:Boolean},noRadius:{default:!1,type:Boolean},cardBorder:{default:!1,type:Boolean},codeLanguage:{default:"markup",type:String},collapseAction:{default:!1,type:Boolean},refreshContentAction:{default:!1,type:Boolean},removeCardAction:{default:!1,type:Boolean},headerBackground:{default:"",type:String},cardBackground:{default:"",type:String},contentColor:{default:"",type:String},titleColor:{default:"",type:String},subtitleColor:{default:"#b8c2cc",type:String}},data:function(){return{isContentCollapsed:!1,showCode:!1,maxHeight:null,cardMaxHeight:null,codeContainerMaxHeight:"0px",tempHidden:!1}},computed:{hasAction:function(){return this.$slots.actions||this.actionButtons||this.collapseAction||this.refreshContentAction||this.removeCardAction||this.codeToggler},hasHeader:function(){return this.hasAction||this.title||this.subtitle},StyleItems:function(){return{maxHeight:this.maxHeight}},cardStyles:function(){var e={maxHeight:this.cardMaxHeight};return tt["a"].isColor(this.cardBackground)||(e.background=tt["a"].getColor(this.cardBackground)),tt["a"].isColor(this.contentColor)||(e.color=tt["a"].getColor(this.contentColor)),e},codeContainerStyles:function(){return{maxHeight:this.codeContainerMaxHeight}},cardClasses:function(){var e="";return tt["a"].isColor(this.cardBackground)&&(e+=" bg-".concat(this.cardBackground)),tt["a"].isColor(this.contentColor)&&(e+=" text-".concat(this.contentColor)),e.trim()},titleStyles:function(){return{color:tt["a"].getColor(this.titleColor)}},titleClasses:function(){var e="";return tt["a"].isColor(this.titleColor)&&(e+=" text-".concat(this.titleColor)),e.trim()},subtitleStyles:function(){var e={};return tt["a"].isColor(this.subtitleColor)||(e.color=tt["a"].getColor(this.subtitleColor)),e},subtitleClasses:function(){var e="";return tt["a"].isColor(this.subtitleColor)&&(e+=" text-".concat(this.subtitleColor)),e.trim()}},methods:{toggleContent:function(){var e=this;this.$refs.content.style.overflow="hidden";var t=this.$refs.content.scrollHeight;"1.5rem"==this.maxHeight?(this.maxHeight="".concat(t,"px"),setTimeout((function(){e.maxHeight="none",e.$refs.content.style.overflow=null}),300)):(this.maxHeight="".concat(t,"px"),setTimeout((function(){e.maxHeight="1.5rem",e.$refs.content.style.overflow=null}),50)),this.isContentCollapsed=!this.isContentCollapsed,this.$emit("toggleCollapse",this.isContentCollapsed)},refreshcard:function(){this.$vs.loading({container:this.$refs.content,scale:.5}),this.tempHidden=!0,this.$emit("refresh",this)},removeRefreshAnimation:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;setTimeout((function(){e.$vs.loading.close(e.$refs.content),e.tempHidden=!1}),t)},removeCard:function(){var e=this,t=this.$refs.card.scrollHeight;this.cardMaxHeight="".concat(t,"px"),this.$el.style.overflow="hidden",setTimeout((function(){e.cardMaxHeight="0px"}),50),this.$emit("remove")},toggleCode:function(){var e=this;this.tempHidden=!0,this.showCode=!this.showCode;var t=this.$refs.codeContainer.scrollHeight;"0px"==this.codeContainerMaxHeight?(this.codeContainerMaxHeight="".concat(t,"px"),setTimeout((function(){e.codeContainerMaxHeight="none",e.tempHidden=!1}),300)):(this.codeContainerMaxHeight="".concat(t,"px"),setTimeout((function(){e.codeContainerMaxHeight="0px",e.tempHidden=!1}),150))}}},at=rt,nt=(r("89b8"),Object(Y["a"])(at,Ze,et,!1,null,null,null)),st=nt.exports,it=r("0a35"),ot={functional:!0,name:"feather-icon",props:{icon:{required:!0},svgClasses:{type:[String,Object,Array],default:""},badge:{}},render:function(e,t){var r=t.props,a=t.data;a.staticClass?a.staticClass=a.staticClass+" feather-icon select-none relative":a.staticClass="feather-icon select-none relative";var n=e(it[r.icon],{class:r.svgClasses}),s=e("span",{class:"feather-icon-badge bg-primary text-white h-5 w-5 absolute rounded-full text-xs flex items-center justify-center",style:"top: -7px; right: -5px"},[r.badge]),i=[n];return r.badge&&i.push(s),e("span",a,i)}},ct=ot,lt=(r("9943"),Object(Y["a"])(ct,qe,Be,!1,null,null,null)),ut=lt.exports,dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"rounded-full status-ball",class:[e.status,"bg-"+e.status]})},pt=[],ft={name:"StatusBall",props:{status:{default:"success"}}},ht=ft,mt=(r("2ea2"),Object(Y["a"])(ht,dt,pt,!1,null,null,null)),vt=mt.exports,gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"coninput",staticClass:"vs-component vs-con-input-label vs-input",class:["vs-input-"+e.color,{isFocus:e.isFocus}],style:e.styleLabel},[r("div",{class:{"lm-input-group":e.isCompound,"vs-con-input":!e.isCompound,danger:e.danger},attrs:{id:"id-"+e.name}},[e.iconBefore?r("div",{staticClass:"icon-before flex"},[r("feather-icon",{attrs:{svgClasses:"h-5 w-5",icon:e.iconBefore}})],1):e._e(),e.$slots.labelBefore?r("label",{staticClass:"before-input-label flex",class:e.hasIcon},[e._t("labelBefore")],2):e._e(),r("input",e._g(e._b({ref:"vsinput",staticClass:"vs-inputx vs-input--input",class:[e.size,e.labelTrans,e.hasLeftIcon,e.hasRightIcon,{hasValue:""!==e.value}],style:e.style,attrs:{autofocus:e.autofocus,disabled:e.disabled,placeholder:null,type:e.$attrs.type?e.$attrs.type:"text"},domProps:{value:e.value}},"input",e.$attrs,!1),e.listeners)),e.$slots.labelAfter?r("label",{staticClass:"after-input-label"},[e._t("labelAfter")],2):e._e(),r("transition",{attrs:{name:"placeholderx"}},[!e.value&&e.$attrs.placeholder?r("span",{ref:"spanplaceholder",staticClass:"input-span-placeholder vs-input--placeholder",class:[e.size],style:e.styleLabel,on:{click:e.focusInput}},[e._v("\n\t\t\t\t"+e._s(e.$attrs.placeholder)+"\n\t\t\t")]):e._e()])],1)])},bt=[];r("c5f6");function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(r),!0).forEach((function(t){Object(m["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var yt={name:"VsInput",inheritAttrs:!1,props:{name:{default:""},value:{default:"",type:[String,Number]},autofocus:{default:!1,type:[Boolean,String]},disabled:{default:!1,type:Boolean},loading:{default:!1,type:Boolean},color:{default:"primary",type:String},success:{default:!1,type:Boolean},danger:{default:!1,type:Boolean},warning:{default:!1,type:Boolean},size:{default:"normal",type:String},iconBefore:{default:"",type:String},iconAfter:{default:"",type:String}},inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{isFocus:!1}},computed:{hasLeftIcon:function(){return this.iconBefore&&"hasLeftIcon"},hasRightIcon:function(){return this.iconAfter&&"hasRightIcon"},hasIcon:function(){return(this.iconBefore||this.iconAfter)&&"hasIcon"},hasLeftLabel:function(){return this.$slots.labelBefore},hasRightLabel:function(){return this.$slots.labelAfter},isCompound:function(){return this.hasLeftLabel||this.hasRightLabel||this.iconBefore||this.iconAfter},labelTrans:function(){return this.$slots.labelBefore?"has-label-before w-auto":this.$slots.labelAfter?"has-label-after w-auto":void 0},style:function(){return{border:"1px solid ".concat(this.isFocus?tt["a"].getColor(this.color,1):"rgba(0, 0, 0,.2)"),"border-left":this.hasLeftIcon&&this.hasLeftLabel&&"none !important","border-right":this.hasRightIcon&&this.hasRightLabel&&"none !important"}},styleLabel:function(){return{color:this.isFocus?tt["a"].getColor(this.color,1):null}},listeners:function(){var e=this;return wt(wt({},this.$listeners),{},{input:function(t){e.$emit("input",t.target.value)},focus:function(t){e.$emit("focus",t),e.changeFocus(!0)},blur:function(t){e.$emit("blur",t),e.changeFocus(!1)}})},isValue:function(){return this.value}},methods:{changeFocus:function(e){this.isFocus=e},beforeEnter:function(e){e.style.height=0},enter:function(e,t){var r=e.scrollHeight;e.style.height=r+"px",t()},leave:function(e){e.style.height="0px"},focusInput:function(){this.$refs.vsinput.focus()}},watch:{loading:function(e){e?this.$vs.loading({background:"transparent",container:"#id-".concat(this.name),scale:.45}):this.$vs.loading.close("#id-".concat(this.name," > .con-vs-loading"))}}},xt=yt,Ct=(r("e275"),Object(Y["a"])(xt,gt,bt,!1,null,null,null)),St=Ct.exports,kt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"laima-text-switch relative rounded-lg overflow-hidden",class:e.sizeClass[e.size]},[r("div",{staticClass:"marker absolute z-0 h-full",style:e.markerStyle}),r("ul",{staticClass:"toggle-switch h-full flex p-0 m-0 list-none rounded-lg border-solid border",style:e.ulStyling},e._l(e.options,(function(t,a){return r("li",{key:t.val,staticClass:"text-center cursor-pointer z-10 h-full flex",class:e.value===t.val?"active":"standard",style:e.lineStyle(t.val,a),on:{click:function(r){!e.disabled&&e.$emit("input",t.val)}}},[r("div",{staticClass:"self-center text-center w-full"},[e._v("\n                "+e._s(t.label)+"\n            ")])])})),0)])},Ot=[];r("20d6");function $t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(r),!0).forEach((function(t){Object(m["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Dt={props:{inversed:{type:Boolean,default:!1},options:{type:[Array,Object],default:function(){return[]}},disabled:{default:!1},value:{type:String},color:{type:String},size:{type:String,default:"default"}},data:function(){return{sizeClass:{default:"normal-size",small:"small-size",big:"big-size"}}},methods:{lineStyle:function(e,t){var r={},a={},n=this.options.length-1,s=this.color||"rgba(var(--vs-primary))";return this.inversed&&(a["color"]="".concat(this.color)),this.options.length>2&&(r["border-left"]=t>1&&t!=n&&"1px solid ".concat(s)||"none",r["border-right"]=(!t||t!=n)&&"1px solid ".concat(s)||"none"),Et(Et({width:100/this.options.length+"%"},r),a)}},computed:{ulStyling:function(){var e={};return this.color&&(this.inversed?(e["background"]=this.color,e["color"]="#fff",e["border-color"]=this.color):(e["border-color"]=this.color,e["color"]=this.color)),e},markerStyle:function(){var e=100/this.options.length,t={};return this.color&&(t.background=this.inversed?"#fff":this.color),Et({width:e+"%",left:e*this.activeIndex+"%"},t)},activeIndex:function(){var e=this;return this.options.findIndex((function(t){return t.val===e.value}))}}},Tt=Dt,It=(r("2259"),Object(Y["a"])(Tt,kt,Ot,!1,null,null,null)),jt=It.exports,At=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vx-card",{key:e.key,staticClass:"laima-form select-none shadow",class:e.sizeCls,staticStyle:{"max-width":"1440px"},attrs:{title:e.title}},[r("form",{attrs:{"data-vv-scope":e.formScope,onsubmit:"return false;"}},[e._t("before-fields",null,{errors:e.$validator.errors.all()}),e._l(e.formFieldsParsed,(function(t,a){return r("div",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!item.hidden"}],key:a,staticClass:"fields-box"},[e._t("beforefield",null,{error:e.$validator.errors.first(t.name,e.formScope),item:t}),r("div",{staticClass:"field-wrapper flex items-center"},[r("div",{staticClass:"field-desc relative"},[r("div",{staticClass:"field-label relative"},[e._t("label",[t.validators&&t.validators.required&&!t.disabled?r("span",{staticClass:"required-dot"}):e._e(),e._v("\n                            "+e._s(t.label)+"\n                        ")],{item:t})],2),t.helpText?r("div",{staticClass:"field-help"},[e._t("help-text",[e._v("\n                            "+e._s(t.helpText)+"\n                        ")],{item:t})],2):e._e()]),r("div",{staticClass:"field-value-wrap"},[r("div",{staticClass:"field-control items-center"},[e._t("fieldcontrol",[r("span",{staticClass:"field-validation"},[e.showErrorsInTooltip?r("v-popover",{directives:[{name:"show",rawName:"v-show",value:e.$validator.errors.has(t.name,e.formScope),expression:"$validator.errors.has(item.name, formScope)"}],ref:"tooltip",refInFor:!0,attrs:{popoverBaseClass:"tooltip",popoverArrowClass:"border-danger tooltip-arrow popover-arrow",popoverInnerClass:"bg-danger rounded-full text-white tracking-normal text-sm p-1 px-2",id:t.name,trigger:"click"}},[r("feather-icon",{staticClass:"text-danger animated pulse delay-1s infinite",attrs:{icon:"AlertCircleIcon"}}),r("template",{slot:"popover"},[e._v("\n                                            "+e._s(e.$validator.errors.first(t.name,e.formScope))+"\n                                        ")])],2):e._e()],1),r("div",{staticClass:"field-value",class:"switch"===t.type&&"lf-switch"},[e._t(t.name+"BeforeValue"),e._t(t.name,[e.laimaInputTypes.includes(t.type)?r("lm-input",{directives:[{name:"debounce",rawName:"v-debounce:1100ms",value:e.partial(e.backupSave,t),expression:"partial(backupSave, item)",arg:"1100ms"},{name:"validate",rawName:"v-validate",value:t.validators||{},expression:"item.validators || {}"}],class:t.classes||{},attrs:{autocomplete:t.autocomplete||"on",danger:e.$validator.errors.has(t.name,e.formScope),"data-vv-as":t.label||t.name,disabled:t.disabled||!1,loading:t.loading||!1,name:t.name,placeholder:t.placeholder||"",type:t.type},on:{change:function(r){return e.$emit("changed",[t.name,t.model])},blur:function(r){t.submitters.includes("blur")&&e.updatedField(t.name,t.model)||e.voidFn()},keypress:function(r){if(!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter"))return null;t.submitters.includes("enter")&&e.updatedField(t.name,t.model)||e.voidFn()}},model:{value:t.model,callback:function(r){e.$set(t,"model",r)},expression:"item.model"}}):"time"===t.type?r("vue-timepicker",{directives:[{name:"validate",rawName:"v-validate",value:t.validators||{},expression:"item.validators || {}"}],class:t.classes||{},attrs:{"close-on-complete":"",format:"HH:mm","hide-disabled-hours":"","hour-label":t.hourLabel||"hour","input-class":"vs-inputx vs-input--input normal","input-width":"100%","minute-label":t.minuteLabel||"minute",danger:e.$validator.errors.has(t.name,e.formScope),"data-vv-as":t.label||t.name,disabled:t.disabled||!1,"hide-clear-button":!t.clearable||!1,"hour-range":t.hourRange||[[0,23]],"minute-range":t.minuteRange||[[0,59]],"minute-interval":t.interval||1,name:t.name,placeholder:t.placeholder||"",type:t.type},on:{input:function(r){e.$emit("changed",[t.name,t.model])&&e.updatedField(t.name,t.model)||e.voidFn()}},model:{value:t.model,callback:function(r){e.$set(t,"model",r)},expression:"item.model"}}):"fancyNumber"===t.type?r("vs-input-number",{directives:[{name:"validate",rawName:"v-validate",value:t.validators||{numeric:!0},expression:"item.validators || {numeric: true}"},{name:"debounce",rawName:"v-debounce:1100ms",value:e.partial(e.backupSave,t),expression:"partial(backupSave, item)",arg:"1100ms"}],class:t.classes||{},attrs:{danger:e.$validator.errors.has(t.name,e.formScope),"data-vv-as":t.label||t.name,disabled:t.disabled||!1,min:t.min||0,max:t.max,name:t.name,placeholder:t.placeholder||"",step:t.step||1},on:{input:function(r){e.$emit("changed",[t.name,t.model])&&e.updatedField(t.name,t.model)||e.voidFn()}},model:{value:t.model,callback:function(r){e.$set(t,"model",r)},expression:"item.model"}}):"textarea"===t.type?r("vs-textarea",{directives:[{name:"debounce",rawName:"v-debounce:1100ms",value:e.partial(e.backupSave,t),expression:"partial(backupSave, item)",arg:"1100ms"},{name:"validate",rawName:"v-validate",value:t.validators||{},expression:"item.validators || {}"}],class:t.classes||{},attrs:{danger:e.$validator.errors.has(t.name,e.formScope),"data-vv-as":t.label||t.name,disabled:t.disabled||!1,name:t.name,placeholder:t.placeholder||""},on:{blur:function(r){t.submitters.includes("blur")&&e.updatedField(t.name,t.model)||e.voidFn()}},model:{value:t.model,callback:function(r){e.$set(t,"model",r)},expression:"item.model"}}):"select"===t.type?r("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:t.validators||{},expression:"item.validators || {}"}],staticClass:"w-full",class:t.classes||{},staticStyle:{height:"42px"},attrs:{autocomplete:t.autocomplete||!1,danger:e.$validator.errors.has(t.name,e.formScope),"data-vv-as":t.label||t.name,disabled:t.disabled||!1,multiple:t.multiple||!1,name:t.name,placeholder:t.placeholder},on:{input:function(r){return e.$emit("changed",[t.name,r])&&e.updatedField(t.name,r)||e.voidFn()}},model:{value:t.model,callback:function(r){e.$set(t,"model",r)},expression:"item.model"}},e._l(t.options,(function(e,t){return r("vs-select-item",{key:t,attrs:{value:e.value,text:e.text}})})),1):"date"===t.type?r("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:t.validators||{},expression:"item.validators || {}"}],class:Object.assign({},{"input-icon-validate-danger":e.$validator.errors.has(t.name,e.formScope)},t.classes||{}),attrs:{"input-class":"vs-inputx vs-input--input normal",danger:e.$validator.errors.has(t.name,e.formScope),"data-vv-as":t.label||t.name,disabled:t.disabled||!1,name:t.name,placeholder:t.placeholder||"e.g. 1970-01-01"},on:{input:function(r){return e.$emit("changed",[t.name,t.model])},selected:function(r){t.submitters.includes("change")&&e.updatedField(t.name,t.model)||e.voidFn()}},model:{value:t.model,callback:function(r){e.$set(t,"model",r)},expression:"item.model"}}):"switch"===t.type?r("vs-switch",{directives:[{name:"validate",rawName:"v-validate",value:t.validators||{},expression:"item.validators || {}"}],class:t.classes||{},attrs:{color:t.color||"success",danger:e.$validator.errors.has(t.name,e.formScope),"data-vv-as":t.label||t.name,disabled:t.disabled||!1,name:t.name},on:{input:function(r){e.$emit("changed",[t.name,t.model])&&t.submitters.includes("change")&&e.updatedField(t.name,t.model)||e.voidFn()}},model:{value:t.model,callback:function(r){e.$set(t,"model",r)},expression:"item.model"}}):"timerange"===t.type?r("time-range",{directives:[{name:"validate",rawName:"v-validate",value:{range:!0},expression:"{range: true}"}],class:t.classes||{},attrs:{errorsArray:e.$validator.errors.first(t.name,e.formScope),"data-vv-as":t.label||t.name,disabled:t.disabled||!1,name:t.name},on:{input:function(r){t.submitters.includes("change")&&e.updatedField(t.name,t.model)||e.voidFn()}},model:{value:t.model,callback:function(r){e.$set(t,"model",r)},expression:"item.model"}}):e._e()],{item:t,successCallback:e.partial(e.success,t.name),onFieldUpdated:e.updatedField,hasErrors:e.$validator.errors.has(t.name,e.formScope)})],2)],{item:t})],2)])]),r("div",[e._t("afterfield",null,{item:t})],2)],2)})),e._t("after-fields")],2),e.onSubmit?e._t("footer",[r("vs-divider",{staticClass:"mt-0 mb-0"}),r("div",{},[r("div",{staticClass:"justify-start flex items-center h-full"},[r("vs-button",{staticClass:"mx-6 my-4",attrs:{type:"filled",color:"primary",disabled:e.$store.state.stateLoading||e.isLoading},on:{click:e.onSubmitWrap}},[r("div",{staticClass:"w-full"},[r("span",{class:(e.$store.state.stateLoading||e.isLoading)&&"opacity-0"},[e._v(e._s(e.$t("buttons.save")))]),r("div",{staticClass:"w-full absolute h-full top-0"},[r("div",{staticClass:"flex justify-center  h-full"},[e.$store.state.stateLoading||e.isLoading?r("svg",{staticClass:"circle__svg w-6",attrs:{viewBox:"0 0 100 100"}},[r("circle",{staticClass:"circle__svg-circle",attrs:{cx:"50",cy:"50",r:"45"}})]):e._e()])])])])],1)])],{callback:e.onSubmitWrap}):e._e()],2)},Rt=[],Pt=(r("ffc1"),r("6762"),r("2fdb"),r("e19d")),Mt=r("fa33"),Lt=r("97fc"),Nt=r.n(Lt);r("1e11");function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){Object(m["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ft(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=Vt(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function Vt(e,t){if(e){if("string"===typeof e)return qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qt(e,t):void 0}}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var Bt={normal:"normal-size",small:"small-size",large:"large-size"},Wt={name:"laima-form",components:{Datepicker:Mt["a"],TimeRange:Pt["a"],VueTimepicker:Nt.a},props:{modelsContainer:{type:Object,required:!0},size:{type:String,default:"normal"},title:{type:String},formFields:{type:Array,required:!0,validator:function(e){var t=["type","name"];return e.every((function(e){var r,a=Ft(t);try{for(a.s();!(r=a.n()).done;){var n=r.value;if(!e[n])return console.warn("In ".concat(JSON.stringify(e),", '").concat(n,"' is required")),!1;if("select"===e.type&&!e.options)return console.warn("In ".concat(JSON.stringify(e),", 'options' is required")),!1}}catch(s){a.e(s)}finally{a.f()}return!0}))}},formScope:{type:String,default:"step-1"},onSubmit:{type:[Function,Boolean],default:!1},cleanForm:{type:Function,default:function(e){return e}},showErrorsInTooltip:{type:Boolean,default:!0},readonly:{type:[Boolean,Array],default:!1},isLoading:{type:Boolean,default:!1}},computed:{sizeCls:function(){return Bt[this.size]},localModels:function(){return this.$clone(this.modelsContainer)},formFieldsParsed:function(){var e=this,t=this.readonly;return this.formFields.map((function(r){return r.model&&(r.model=e.$parent[r.model]),r.model?r.model=e.modelsContainer[r.name]:r.model=e.localModels[r.name],r.submitters||(r.submitters=e.type2Submitters[r.type]||e.type2Submitters.default),"timerange"!==r.type||r.procureKeyFn||(r.procureKeyFn=function(e){return e?"from ".concat(e.join(" to ")):e}),t&&(!0===t||t.includes(r.name))&&(r.disabled=!0),r}))},formFieldsKeyed:function(){return Object.fromEntries(this.formFieldsParsed.slice(0).map((function(e){var t=e.name;return[t,e]})))},dynamicModel:function(){return Ut(Ut({},this.localModels),this.modelsContainer)}},data:function(){return{type2Submitters:{text:["blur","enter"],password:["blur","enter"],number:["blur","enter"],email:["blur","enter"],tel:["blur","enter"],time:["blur","enter"],default:["change"]},laimaInputTypes:["text","password","number","email","tel"],oldFieldVals:{},key:0}},methods:{execCleanForm:function(e){try{return this.cleanForm.call(this.$parent,e)}catch(r){if(r instanceof this.ValidationError){var t={scope:this.formScope,field:r.field,msg:r.msg};return this.$validator.errors.add(t),!1}throw r}},onSubmitWrap:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll(this.formScope);case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:if(r=Object.fromEntries(Object.entries(this.formFieldsKeyed).map((function(e){var t=Object(a["a"])(e,2),r=t[0],n=t[1];return[r,n.model]}))),r=this.execCleanForm(r),r){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.onSubmit(r);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),backupSave:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updatedField(t.name,t.model,"backup");case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),voidFn:function(){},updatedField:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=o.length>2&&void 0!==o[2]?o[2]:"updated",!this.onSubmit){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.$validator.validateAll(this.formScope);case 5:if(n=e.sent,n){e.next=8;break}return e.abrupt("return");case 8:if(s=this.oldFieldVals[t],!s||s!=r){e.next=11;break}return e.abrupt("return");case 11:if(this.$set(this.localModels,t,r),i=this.execCleanForm(Object(m["a"])({},t,r)),i){e.next=15;break}return e.abrupt("return");case 15:"backup"===a?this.$emit(a,[i]):this.$emit(a,[i,this.partial(this.success,t,r)]);case 16:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),executeNotification:function(e,t){t=t||e.model;var r,a=e.name,n=e.procureKeyFn,s=this.oldFieldVals[a],i=n&&n(t)||t,o=n&&n(s)||s,c=e.label;i&&i!=s&&(r=o&&o!==a?this.$t("misc.changed_field",{field:c,from:o,to:i}):this.$t("misc.set_field",{field:c,to:i}),this.oldFieldVals[a]=t,this.notifySuccess(r))},success:function(e,t){var r=this.formFieldsKeyed[e];r&&this.executeNotification(r,t)}},mounted:function(){var e=this,t=this.$parent,r=this.$watch((function(){return e.formFieldsParsed[0].model}),(function(){e.formFieldsParsed.forEach((function(r){var a=r.model;void 0!==a&&null!==a&&(Object(y["a"])(a)===String?e.$set(e.oldFieldVals,r.name,t[a]):e.$set(e.oldFieldVals,r.name,a))}))}));setTimeout(r,1e3)},watch:{"$validator.errors.items":function(){var e=this;this.showErrorsInTooltip&&this.$nextTick((function(){e.$validator.fields.items.forEach((function(t){var r=e.$refs.tooltip.find((function(e){return e.$attrs.id===t.name}));r&&(e.$validator.errors.has(t.name,e.formScope)?r.show():r.hide())}))}))}},beforeDestroy:function(){document.querySelectorAll(".vs-tooltip").forEach((function(e){return e.remove()}))}},Yt=Wt,zt=(r("56cb"),Object(Y["a"])(Yt,At,Rt,!1,null,null,null)),Gt=zt.exports,Kt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("laima-form",{ref:"lf",attrs:{title:e.title||e.defaultTitle,readonly:e.readonly||!1,size:e.size,modelsContainer:e.initialData||e.models,formFields:e.slotFields,onSubmit:!0},on:{changed:e.changedField},scopedSlots:e._u([{key:"footer",fn:function(){return[r("div")]},proxy:!0}])})},Jt=[],Xt={name:"add-edit-patient",props:{size:{},initialData:{default:null},readonly:{default:!1},title:{}},computed:{slotFields:function(){return[{name:"patient_id",placeholder:this.loadingPatient?" ":"01234567890",label:this.$i18n.t("fields.patient_id"),type:"text",validators:{numeric:!0,required:!0,min:11,max:11}},{name:"name",placeholder:this.loadingPatient?" ":this.$i18n.t("placeholders.name"),label:this.$i18n.t("fields.name"),type:"text",validators:{required:!0},loading:this.loadingPatient},{name:"last_name",placeholder:this.loadingPatient?" ":this.$i18n.t("placeholders.lastname"),label:this.$i18n.t("fields.lastname"),type:"text",validators:{required:!0},loading:this.loadingPatient},{name:"address1",label:this.$i18n.t("fields.address"),type:"text",placeholder:this.loadingPatient?" ":this.$i18n.t("placeholders.address"),loading:this.loadingPatient,validators:{required:!0}},{name:"city",label:this.$i18n.t("fields.city"),type:"text",placeholder:this.loadingPatient?" ":this.$i18n.t("placeholders.city"),loading:this.loadingPatient,validators:{required:!0}},{name:"phone",type:"tel",label:this.$i18n.t("fields.phone"),placeholder:this.loadingPatient?" ":this.$i18n.t("placeholders.phone"),loading:this.loadingPatient,validators:{required:!0}},{name:"email",type:"email",label:this.$i18n.t("fields.email"),loading:this.loadingPatient,placeholder:this.loadingPatient?" ":this.$i18n.t("placeholders.email")},{name:"has_primary_teeth",type:"switch",loading:this.loadingPatient,label:this.$i18n.t("fields.primary_teeth")},{name:"teething",type:"switch",label:this.$i18n.t("fields.teething"),loading:this.loadingPatient},{name:"pregnant",type:"switch",label:this.$i18n.t("fields.pregnant"),loading:this.loadingPatient},{name:"lactating",type:"switch",label:this.$i18n.t("fields.lactating"),loading:this.loadingPatient}]},booleanFields:function(){return this.slotFields.filter((function(e){return"switch"==e.type})).map((function(e){return e.name}))}},data:function(){var e=this.$i18n.t("headers.patient");return{defaultTitle:e,loadingPatient:!1,models:{name:"",last_name:"",address1:"",city:"",phone:"",email:"",has_primary_teeth:!1,teething:!1,lactating:!1,pregnant:!1}}},mounted:function(){if(this.initialData)for(var e=this.initialData,t=0,r=Object.keys(this.models);t<r.length;t++){var a=r[t],n=e[a];void 0!==n&&this.$set(this.models,a,n)}},methods:{changedField:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,n,s,i,o,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=Object(a["a"])(t,2),n=r[0],s=r[1],this.$set(this.models,n,s),this.initialData&&this.$emit("updatedPatient",[n,s]),"patient_id"!==n){e.next=10;break}return this.loadingPatient=!0,e.next=7,this.requestResource("get_patientresource",{no_loading:!0,data:{patient_id:s}});case 7:i=e.sent,this.loadingPatient=!1,200===i.status&&(o=i.data||{},Object.assign(o,o.actor),delete o.actor,o.patient_id=s,Object.keys(this.models).forEach((function(e){var t=o[e];void 0!=t&&(!t&&o.actor&&(t=o.actor[e]),c.$set(c.models,e,t))})));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},Qt=Xt,Zt=(r("7cfb"),Object(Y["a"])(Qt,Kt,Jt,!1,null,null,null)),er=Zt.exports;n["default"].component(st.name,st),n["default"].component(ut.name,ut),n["default"].component(vt.name,vt),n["default"].component(Gt.name,Gt),n["default"].component(er.name,er),n["default"].component("lm-input",St),n["default"].component("text-switch",jt);r("c1c3"),r("5aea");var tr=r("41cb"),rr=r("07a4"),ar=r("6591"),nr=r("7bb1"),sr=r("beaf"),ir=r.n(sr),or=r("243b"),cr=r.n(or);n["default"].use(He.a),n["default"].use(Le.a,{listenTo:["input","keyup","change","blur"]}),n["default"].use(Ge.a);var lr={install:function(e){e.mixin(Pe["a"])}};n["default"].use(lr),n["default"].component("vue-cal",Je.a),n["default"].use(Xe["a"]),n["default"].prototype.$http=Qe["a"],n["default"].use(ar["VueHammer"]),n["default"].use(nr["b"],{i18n:Ye,dictionary:{pl:ir.a,en:cr.a}}),nr["a"].extend("isGreater",{validate:function(e,t){var r=Object(a["a"])(t,1),n=r[0];return parseInt(e)>=parseInt(n)},getMessage:function(e,t){var r=Object(a["a"])(t,1),n=r[0];return"The ".concat(e," must be greater or equal to ").concat(n)}},{hasTarget:!0}),nr["a"].extend("range",{validate:function(e){return new Promise((function(t){var r=2===e.length&&e.every((function(e){return!!e})),a=e[0]<e[1];t({valid:r&&a,data:{present:[!!e[0],!!e[1]],rightOrder:a}})}))},getMessage:function(e,t,r){return r?r.present.every((function(e){return!!e}))?r.rightOrder?void 0:["Must be lesser",""]:[r.present[0]?"":"This field is required",r.present[1]?"":"This field is required"]:[""]}}),String.prototype.title=function(){return this[0].toUpperCase()+this.slice(1)},Date.prototype.clone=function(){return new Date(this.valueOf())},r("3a10"),n["default"].config.productionTip=!1;var ur=new n["default"]({router:tr["a"],store:rr["a"],i18n:Ye,render:function(e){return e(Re)}}).$mount("#app");window.app=ur},5745:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"data-list",attrs:{id:"patient-list-view"}},[r("vs-sidebar",{staticClass:"add-edit-patient",attrs:{"vs-custom-content":"","position-right":"",parent:"body","default-index":"-1",color:"primary",value:e.patientSidebarActive}},[r("div",{staticClass:"header-sidebar",attrs:{slot:"header"},slot:"header"},[r("div",{staticClass:"flex justify-between w-full h-full bg-primary text-white"},[r("h5",{staticClass:"pl-4 flex self-center text-white font-light"},[e._v(e._s(e.sideBarTitle)+" ")]),r("feather-icon",{staticClass:"pr-4 text-white cursor-pointer",attrs:{svgClasses:"w-6 h-6",icon:"XIcon"},on:{click:function(t){e.patientSidebarActive=!1}}})],1)]),r("add-edit-patient",{ref:"patient",attrs:{initialData:e.selectedPatient,title:"Patient's details",size:"small"},on:{updatedPatient:e.updatedPatient}}),e.selectedPatient?e._e():r("vs-button",{staticClass:"w-full rounded-none",attrs:{size:"large",type:"filled",color:"primary"},on:{click:e.submitPatient}},[e._v(e._s(e.$t("buttons.save")))])],1),r("vs-table",{ref:"table",attrs:{pagination:"","max-items":e.itemsPerPage,search:"",data:e.patients},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data;return[r("tbody",e._l(a,(function(t,a){return r("vs-tr",{key:a,attrs:{data:t},on:{click:function(r){return r.preventDefault(),e.onSelectedPatient(t,r)}}},[r("vs-td",[r("p",{staticClass:"product-name font-medium truncate"},[e._v(e._s(e._f("fullname")(t)))])]),r("vs-td",[r("p",{staticClass:"product-price"},[e._v(e._s(t.email))])]),r("vs-td",[r("p",{staticClass:"product-price"},[e._v(e._s(t.phone))])]),r("vs-td",[r("status-ball",{attrs:{status:1==t.status?"success":"danger"}})],1),r("vs-td",{staticClass:"whitespace-no-wrap"},[r("feather-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("headers.add_visit"),expression:"$t('headers.add_visit')"}],staticClass:"mr-4",attrs:{icon:"PlusSquareIcon",svgClasses:"w-6 h-6 hover:text-success stroke-current"},on:{click:function(r){return r.stopPropagation(),e.addNewVisit(t,r)}}}),r("v-popover",{ref:"patient-slot-selection-"+t.id,refInFor:!0,staticClass:"w-0 float-left flex",attrs:{popoverArrowClass:"no-arrow-picker"},on:{hide:function(t){e.contentOverlay.style.zIndex=-1},show:function(t){e.contentOverlay.style.zIndex=5e3}}},[r("template",{slot:"popover"},[r("monthly-slots-heatmap",{attrs:{date:(new Date).format("YYYY-MM"),set:"all"},on:{timeFrameChanged:e.updateMonthlyPicker,dateSelected:function(r){return e.datepickerDateChanged(r,t)}}})],1)],2),r("feather-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("headers.view_visits"),expression:"$t('headers.view_visits')"}],staticClass:"mr-4",attrs:{icon:"CalendarIcon",svgClasses:"w-6 h-6 hover:text-primary stroke-current"},on:{click:function(r){return r.stopPropagation(),e.viewVisits(t)}}})],1)],1)})),1)]}}]),model:{value:e.selectedPatient,callback:function(t){e.selectedPatient=t},expression:"selectedPatient"}},[r("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[r("div",{staticClass:"flex flex-wrap-reverse items-center data-list-btn-container"},[r("vs-button",{staticClass:"mb-4 cursor-pointer flex items-center justify-center text-lg font-medium",attrs:{color:"success"},on:{click:e.addNewPatient}},[r("feather-icon",{staticStyle:{top:"3px",right:"5px"},attrs:{icon:"UserPlusIcon",svgClasses:"w-5 h-5 relative"}}),r("span",{staticClass:"ml-2 text-base"},[e._v(e._s(e.$t("headers.add_new")))])],1)],1)]),r("template",{slot:"thead"},[r("vs-th",{attrs:{"sort-key":"name"}},[e._v(e._s(e.$t("fields.name")))]),r("vs-th",{attrs:{"sort-key":"email"}},[e._v(e._s(e.$t("fields.email")))]),r("vs-th",{attrs:{"sort-key":"phone"}},[e._v(e._s(e.$t("fields.phone")))]),r("vs-th",{attrs:{"sort-key":"active"}},[e._v(e._s(e.$t("fields.status")))]),r("vs-th",[e._v(e._s(e.$t("headers.actions")))])],1)],2)],1)},n=[],s=(r("7514"),r("6b54"),r("96cf"),r("3b8d")),i=r("bd86"),o=r("768b"),c=(r("456d"),r("ac6a"),r("7f7f"),r("7269")),l={data:function(){return{itemsPerPage:6,patientSidebarActive:!1,selectedPatient:null}},filters:{fullname:function(e){return e.name+" "+e.last_name}},components:{MonthlySlotsHeatmap:c["a"]},computed:{sideBarTitle:function(){var e=this.selectedPatient;return e?this.$i18n.t("headers.editing")+" "+e.name+" "+e.last_name:this.$i18n.t("headers.add_patient")},patients:function(){return this.$store.state.core.patients},clinic:function(){return this.$store.getters["core/activeClinic"]()}},methods:{addNewVisit:function(e){var t=this.$refs["patient-slot-selection-".concat(e.id)][0];this.$store.dispatch("core/fetchMonthlyHeatmap",[new Date,this]),this.contentOverlay.style.zIndex=5e3,t.show()},addNewPatient:function(){this.selectedPatient=null,this.patientSidebarActive=!0},clearForm:function(){var e=this;try{Object.keys(this.$refs.patient.models).forEach((function(t){e.$set(e.$refs.patient.models,t,"")}))}catch(t){}},datepickerDateChanged:function(e,t){this.$store.commit("core/SET_INTERIM_PATIENT",t),this.$router.push({name:"Scheduler",query:{view:"day",date:e.getTime()}})},updateMonthlyPicker:function(e){var t=e.endDate;this.$store.dispatch("core/fetchMonthlyHeatmap",[t,this])},updatedPatient:function(e){var t,r=Object(o["a"])(e,2),a=r[0],n=r[1],s={id:this.selectedPatient.id},c=(t={},Object(i["a"])(t,a,n),Object(i["a"])(t,"patient_id",this.selectedPatient.patient_id),t);this.$store.dispatch("core/editPatient",[s,c,this])},onSelectedPatient:function(){this.patientSidebarActive=!0},submitPatient:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s,i,o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.patient.$refs.lf.$validator.validateAll("step-1");case 2:if(t=e.sent,!t){e.next=15;break}return r=Object.assign({},this.$refs.patient.models),a=r.patient_id.toString(),this.$store.state.core.patients.find((function(e){return e.patient_id==a}))&&(this.patientSidebarActive=!1,this.notifyError(this.$t("notifs.patient_registered"))),n=[a.slice(0,2),a.slice(2,4)],s=n[0],i=n[1],s=parseInt(i)>12?"20"+s:"19"+s,r.year_born=s,r.country="PL",e.next=13,this.requestResource("post_patientClinicRegistration",{data:r,scope:"step-1",vm:this.$refs.patient.$refs.lf,errRespMap:{year_born:"patient_id"}});case 13:o=e.sent,200===o.status&&(c=r.name+" "+r.last_name,l=Object.assign({},this.$refs.patient.models),l.status=1,this.$store.commit("core/ADD_PATIENT",l),this.notifySuccess(this.$t("notifs.patient_added",{fullname:c})),this.patientSidebarActive=!1);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),viewVisits:function(e){var t=this,r=new Date,a=e.name+" "+e.last_name,n=this.$t("misc.filtered_patient",{fullname:a});this.$store.commit("SET_GLOBAL_MESSAGE",[n,"primary"]),this.$store.dispatch("core/listSlotsByPatient",{vm:this,patient_id:e.id,callback:function(){t.$store.commit("core/SET_FILTERED_PATIENT",e)}}),this.$router.push({name:"Scheduler",query:{view:"month",date:r.getTime()}})}},mounted:function(){this.isMounted=!0,window.pats=this,this.contentOverlay=document.querySelector("#content-overlay"),this.$store.dispatch("core/listAllPatients",{vm:this})},watch:{selectedPatient:function(e){e&&(this.patientSidebarActive=!0)},patientSidebarActive:function(e){var t=this;e?window.addEventListener("keydown",(function(e){"Escape"==e.key&&(t.patientSidebarActive=!1)}),{once:!0}):this.selectedPatient=null}}},u=l,d=(r("48f6"),r("2877")),p=Object(d["a"])(u,a,n,!1,null,null,null);t["default"]=p.exports},5813:function(e,t,r){"use strict";r("b410")},"58e1":function(e,t,r){e.exports=r.p+"img/laima-logo-symbol-only.e621da0b.png"},"5aea":function(e,t,r){},"5c0b":function(e,t,r){"use strict";r("e332")},"5eb2":function(e,t,r){},"625e":function(e,t,r){"use strict";r("dc11")},6335:function(e,t,r){e.exports=r.p+"img/nodocs.37866d07.png"},6446:function(e,t,r){"use strict";r("f6dc")},"67b2":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"h-screen flex w-full bg-img vx-row no-gutter items-center justify-center"},[e.$store.state.auth.passResetEmail?r("pass-reset-sent-dialog"):r("div",{staticClass:"vx-col w-4/5 sm:w-4/5 md:w-3/5 lg:w-3/4 xl:w-3/5 mx-auto self-center"},[r("vx-card",[r("div",{staticClass:"full-page-bg-color",attrs:{slot:"no-body"},slot:"no-body"},[r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col hidden sm:hidden md:hidden lg:block lg:w-1/2 mx-auto self-center"}),r("div",{staticClass:"vx-col sm:w-full md:w-full lg:w-1/2 mx-auto self-center d-theme-dark-bg"},[r("div",{staticClass:"p-8"},[r("div",{staticClass:"vx-card__title mb-8"},[r("h4",{staticClass:"mb-4"},[e._v(e._s(e.$t("headers.reset_pass"))+" ")]),r("p",[e._v(e._s(e.$t("headers.email_prompt_pass_reset")))])]),r("div",{staticClass:"vx-col mb-8"},[r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"w-full",attrs:{name:"email",type:"email","label-placeholder":e.$t("fields.email")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.reset(t)}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("email")))])],1),r("vs-button",{staticClass:"px-4 w-full md:w-auto",attrs:{type:"border",to:"/pages/account/login"}},[e._v(e._s(e.$t("headers.back_to_login")))]),r("vs-button",{staticClass:"float-right px-4 w-full md:w-auto mt-3 mb-8 md:mt-0 md:mb-0",on:{click:e.reset}},[e._v(e._s(e.$t("headers.reset_pass"))+" ")])],1)])])])])],1)],1)},n=[],s=r("768b"),i=(r("ffc1"),r("ac6a"),r("96cf"),r("3b8d")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vx-col "},[r("statistics-card-line",{staticClass:"mb-base",attrs:{hideChart:"",icon:"SmileIcon",statisticTitle:e.message,statistic:e.$t("headers.pass_reset"),color:"success"}})],1)},c=[],l=r("43ca"),u={components:{StatisticsCardLine:l["a"]},computed:{message:function(){var e=this.$store.state.auth.passResetEmail;return e=e||this.$t("misc.your_address"),this.$t("headers.reset_pass_email_sent",{email:e})}}},d=u,p=r("2877"),f=Object(p["a"])(d,o,c,!1,null,null,null),h=f.exports,m={data:function(){return{email:""}},components:{PassResetSentDialog:h},methods:{reset:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validate();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.$http.post("/api/actor/pass/reset/",JSON.stringify({email:this.email}),{headers:{Range:"post"}});case 7:if(r=e.sent,422!==r.status){e.next=13;break}return a=this.errors,e.abrupt("return",Object.entries(r.data).forEach((function(e){var t=Object(s["a"])(e,2),r=t[0],n=t[1];n.forEach((function(e){a.add({field:r,msg:e})}))})));case 13:if(204===r.status){e.next=15;break}return e.abrupt("return",this.notifyWarning(this.$t("notifs.failed_reset_pass")));case 15:this.$store.commit("auth/PASSWORD_RESET_LINK_SENT",this.email);case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},v=m,g=Object(p["a"])(v,a,n,!1,null,null,null);t["default"]=g.exports},"67b9":function(e,t,r){},"6bac":function(e,t,r){},"6c48":function(e,t,r){},"6e49":function(e,t,r){},"6f5e":function(e,t,r){"use strict";r("b1a7")},"703b":function(e,t,r){},7269:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.disabled?e._e():r("div",{staticClass:"bg-white"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.core.heatMapLoading,expression:"$store.state.core.heatMapLoading"}],staticClass:"loading-heatmap absolute top-0 w-full h-full",staticStyle:{"z-index":"50002"}},[e._m(0)]),r("vue-cal",{ref:"cal",staticClass:"heatmap vuecal--blue-theme vuecal--rounded-theme",attrs:{"active-view":"month","hide-view-selector":"",small:"","disable-views":["years","year","week","day"],events:e.events,"hide-weekdays":[7],locale:e.$i18n.locale,"min-date":e.minDate,"selected-date":e.date,time:!1},on:{"cell-click":e.cellClicked,"view-change":e.viewChanged},scopedSlots:e._u([{key:"cell-content",fn:function(t){var a=t.cell,n=(t.view,t.events);return[n.length?r("v-popover",{staticClass:"month-picker-popover",attrs:{trigger:"hover",popoverBaseClass:"tooltip"}},[r("span",{staticClass:"h-full w-full rounded-full flex self-center items-center justify-center vuecal__cell-date heat",class:n.length&&n[0].class},[e._v("\n                    "+e._s(a.content)+"\n                ")]),r("template",{slot:"popover"},[e._v("\n                    "+e._s(e.hours(n[0].content))+"\n                ")])],2):a.outOfScope?e._e():r("span",{staticClass:"vuecal__cell-date closed rounded-full h-full w-full"},[e._v("\n                "+e._s(a.content)+"\n            ")])]}}],null,!1,1552029632)})],1)},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex justify-center h-full"},[r("div",{staticClass:"spinner justify-center self-center"},[r("div",{staticClass:"double-bounce1"}),r("div",{staticClass:"double-bounce2"})])])}],s={props:{set:{default:"all"},date:{type:String},doctor:{default:null},minDate:{default:""},disabled:{default:!1}},computed:{events:function(){try{var e=this.localDate||this.date,t=this.$store.state.core.monthlyHeatmapSlots[e][this.set];return"docs"===this.set&&this.doctor?t[this.doctor]:t}catch(r){return[]}}},data:function(){return{cells:[],localDate:null}},mounted:function(){window.month=this},methods:{cellClicked:function(e){this.disabled||this.$emit("dateSelected",e)},hours:function(e){var t=e/60;return 100===t?this.$t("misc.no_visits"):"".concat(Math.floor(t)," ")+this.$t("misc.hours")},viewChanged:function(e){this.disabled||(this.$emit("timeFrameChanged",e),this.localDate=e.startDate.format("YYYY-MM"))}}},i=s,o=(r("83ec"),r("2877")),c=Object(o["a"])(i,a,n,!1,null,null,null);t["a"]=c.exports},"72f0":function(e,t,r){},"73f5":function(e,t,r){"use strict";r("512a")},"743f":function(e,t,r){},"78da":function(e,t,r){},"7cfb":function(e,t,r){"use strict";r("06d6")},"80d8":function(e,t,r){},"80fc":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{key:e.componentKey,staticClass:"vx-row w-full  ml-auto mr-auto pr-4",attrs:{id:"sms"}},[r("div",{staticClass:"mr-auto mt-5 w-1/3"},[r("vx-card",{staticClass:" w-full "},[r("div",{staticClass:"relative w-full h-full",attrs:{id:"send-text"}},[r("div",{staticClass:"send-text-card w-full h-full"},[r("div",{staticClass:"vx-row w-full mb-2"},[r("div",{staticClass:"vx-col w-full ml-auto mr-auto"},[r("h4",[e._v(e._s(e.$t("headers.send_sms")))])])]),r("div",{staticClass:"vx-row mb-2 mt-12"},[r("div",{staticClass:"vx-col w-full ml-auto mr-auto"},[r("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{placeholder:e.$t("placeholders.select_rec"),multiple:"",autocomplete:"",name:"Recipients","data-vv-as":e.$t("fields.recipients").toLowerCase(),danger:e.$validator.errors.has("Recipients")},model:{value:e.selectedPatients,callback:function(t){e.selectedPatients=t},expression:"selectedPatients"}},e._l(e.patients,(function(e,t){return r("vs-select-item",{key:t,attrs:{value:e.value,text:e.text}})})),1),r("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("Recipients")))])],1)]),r("div",{staticClass:"vx-row mt-6 mb-6"},[r("div",{staticClass:"vx-col w-full  ml-auto mr-auto"},[r("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:200",expression:"'required|max:200'"}],staticClass:"w-full text-msg",attrs:{counter:"200",type:"content",height:"10rem",danger:e.$validator.errors.has("Message"),"icon-pack":"feather",icon:"icon-mail","icon-no-border":"",name:"Message","data-vv-as":e.$t("fields.message").toLowerCase(),placeholder:e.$t("placeholders.message")},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),r("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("Message")))])],1)]),r("div",{staticClass:"vx-row w-full ml-auto mr-0 mt-16"},[r("vs-button",{staticClass:"mr-3 w-1/4",attrs:{"icon-pack":"feather",icon:"icon-send","icon-no-border":""},on:{click:e.sendText}},[e._v(e._s(e.$t("buttons.send")))]),r("vs-button",{staticClass:"w-1/4",attrs:{color:"danger","icon-pack":"feather",icon:"icon-trash","icon-no-border":"",type:"border"},on:{click:e.resetForm}},[e._v(e._s(e.$t("buttons.reset")))])],1)])])])],1),r("div",{staticClass:"mt-5 w-2/3 sms-reports"},[r("vx-card",{staticClass:"ml-6 w-full"},[r("div",{staticClass:"vx-col w-full ml-auto mr-auto mb-8"},[r("div",{staticClass:"flex justify-between"},[r("h4",[e._v(e._s(e.$t("headers.text_reports")))]),r("feather-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("buttons.refresh"),expression:"$t('buttons.refresh')"}],staticClass:"text-black pr-1 cursor-pointer hover:text-primary",attrs:{svgClasses:"w-5 h-5",icon:"RefreshCwIcon"},on:{click:e.refresh}})],1)]),r("div",{staticClass:"vx-col sms-col",attrs:{id:"sms-list"}},[r("vs-table",{staticClass:"reports-table",attrs:{"max-items":"10",data:e.smsStatuses,hoverFlat:"",notSpacer:"",stripe:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data;return e._l(a,(function(t,a){return r("vs-tr",{key:a,attrs:{data:t}},[r("vs-td",[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e._f("formatDate")(t.date))+"\n\t\t\t\t\t\t\t")]),r("vs-td",[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.number)+"\n\t\t\t\t\t\t\t")]),r("vs-td",[r("status-ball",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.statusDetails(t),classes:"text-sm tracking-normal"},expression:"{\n\t\t\t\t\t\t\t\t\tcontent: statusDetails(tr),\n\t\t\t\t\t\t\t\t\tclasses: 'text-sm tracking-normal'\n\t\t\t\t\t\t\t\t}"}],attrs:{status:e.TEXT_STATUS_MAP[t.status]}})],1),r("vs-td",[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.subject)+"\n\t\t\t\t\t\t\t")])],1)}))}}])},[r("template",{slot:"thead"},[r("vs-th",[e._v(e._s(e.$t("headers.date")))]),r("vs-th",[e._v(e._s(e.$t("fields.phone")))]),r("vs-th",[e._v(e._s(e.$t("fields.status")))]),r("vs-th",[e._v(e._s(e.$t("headers.subject")))])],1)],2),r("div",{staticClass:"flex justify-center mt-12"},[r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("misc.older"),expression:"$t('misc.older')"}],staticClass:"vs-pagination--buttons hover:bg-primary mx-2 w-12 h-12",on:{click:e.prevTimeframe}},[r("i",{staticClass:"vs-icon notranslate icon-scale material-icons",staticStyle:{"font-size":"1.6rem"}},[e._v("chevron_left")])]),r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("misc.newer"),expression:"$t('misc.newer')"}],staticClass:"vs-pagination--buttons hover:bg-primary mx-2 w-12 h-12",attrs:{disabled:1==e.page},on:{click:e.nextTimeframe}},[r("i",{staticClass:"vs-icon notranslate icon-scale material-icons",staticStyle:{"font-size":"1.6rem"}},[e._v("chevron_right")])])])],1)])],1)])},n=[],s=(r("7f7f"),r("55dd"),r("96cf"),r("3b8d")),i={accepted:"primary",queued:"primary",sending:"success",sent:"success",failed:"danger",delivered:"primary",undelivered:"danger",receiving:"success",received:"success"},o={data:function(){return{msg:"",page:1,selectedPatients:[],componentKey:0,TEXT_STATUS_MAP:i}},filters:{formatDate:function(e){var t=e.toLocaleString("default",{month:"short"});return e.format("DD ".concat(t," 'YY HH:MM"))}},mounted:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.$store,this.patients[0]||t.dispatch("core/listAllPatients",{vm:this}),this.$store.dispatch("core/listTextStatuses",{vm:this,page:this.page});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{smsStatuses:function(){return this.$store.state.core.textStatuses},patients:function(){return this.$store.state.core.patients.map((function(e){return{text:e.name+" "+e.last_name,value:e.actor_id}})).sort((function(e,t){var r=e.text.toLowerCase(),a=t.text.toLowerCase();return r<a?-1:r>a?1:0}))}},methods:{sendText:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.requestResource("post_sendText",{data:{recipients:this.selectedPatients,msg:this.msg},vm:this,loadingIn:".send-text-card"});case 7:r=e.sent,200===r.status?(a=+(r.data.scheduled_count||"0"),a?this.notifySuccess(this.$t("notifs.scheduled_text_submission",{count:a})):this.notifyError(this.$t("notifs.zero_texted")),this.resetForm()):this.notifyError(this.$t("notifs.text_failed"));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetForm:function(){this.selectedPatients=[],this.msg="",this.componentKey++},refresh:function(){this.$store.dispatch("core/listTextStatuses",{vm:this,page:this.page})},statusDetails:function(e){return"failed"===e.status?e.error:e.status},prevTimeframe:function(){this.page++,this.$store.dispatch("core/listTextStatuses",{vm:this,page:this.page})},nextTimeframe:function(){this.page--,this.$store.dispatch("core/listTextStatuses",{vm:this,page:this.page})}}},c=o,l=(r("4574"),r("2877")),u=Object(l["a"])(c,a,n,!1,null,null,null);t["default"]=u.exports},8319:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"h-screen flex w-full bg-img"},[a("div",{staticClass:"vx-col flex items-center justify-center flex-col sm:w-1/2 md:w-3/5 lg:w-3/4 xl:w-1/2 mx-auto text-center"},[a("img",{staticClass:"mx-auto mb-4 max-w-full",attrs:{src:r("4a50"),alt:"graphic-404"}}),a("h1",{staticClass:"sm:mx-0 mx-4 mb-12 text-5xl d-theme-heading-color text-danger"},[e._v(e._s(e.params.title))]),a("h3",{staticClass:"sm:mx-0 mx-4 mb-4 sm:mb-16 "},[e._v(e._s(e.params.message))]),a("vs-button",{attrs:{size:"large",color:"dark",to:"/"}},[e._v(e._s(e.$t("menu.home")))])],1)])},n=[],s={computed:{params:function(){return this.$route.query}}},i=s,o=r("2877"),c=Object(o["a"])(i,a,n,!1,null,null,null);t["default"]=c.exports},"83ec":function(e,t,r){"use strict";r("502c")},8572:function(e,t,r){},"89b8":function(e,t,r){"use strict";r("e8ae")},"8a04":function(e,t,r){"use strict";r("6c48")},"8c65":function(e,t,r){"use strict";r("703b")},"8d6b":function(e,t,r){"use strict";r("ff0d")},9091:function(e,t,r){"use strict";r("e6c9")},9260:function(e,t,r){"use strict";r("af8a")},9943:function(e,t,r){"use strict";r("4363")},"9c48":function(e,t,r){"use strict";r("8e6e"),r("6b54"),r("2397"),r("3b2b"),r("4917"),r("8615"),r("6762"),r("2fdb"),r("7f7f");var a=r("bd86"),n=(r("a481"),r("96cf"),r("768b")),s=(r("ffc1"),r("7514"),r("3b8d")),i=(r("28a5"),r("7618")),o=(r("ac6a"),r("456d"),r("d225")),c=r("4e2b"),l=r("308d"),u=r("6bb5"),d=r("f28b"),p=r("bb36"),f=r("07a4"),h=r("4396"),m=r.n(h),v=r("17e1");function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e){var t=w();return function(){var r,a=Object(u["a"])(e);if(t){var n=Object(u["a"])(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Object(l["a"])(this,r)}}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(c["a"])(r,e);var t=_(r);function r(e,a){var n;Object(o["a"])(this,r);var s="".concat(e,": ").concat(a);return n=t.call(this,s),n.field=e,n.msg=a,n.name="ValidationError",n}return r}(Object(d["a"])(Error));function x(e,t){for(var r=Object.keys(e),a=new Array(r.length),n=0;n<r.length;n++){var s=r[n],o=e[s];"object"!==Object(i["a"])(o)||null===o?a[s]=o:o instanceof Date?a[s]=new Date(o):a[s]=t(o)}return a}function C(e){if("object"!==Object(i["a"])(e)||null===e)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return x(e,C);var t={};for(var r in e)if(!1!==Object.hasOwnProperty.call(e,r)){var a=e[r];"object"!==Object(i["a"])(a)||null===a?t[r]=a:a instanceof Date?t[r]=new Date(a):t[r]=C(a)}return t}function S(e,t){var r=[],a=e[t];while(a&&9!==a.nodeType)1===a.nodeType&&r.push(a),a=a[t];return r}function k(e){return e&&e.parentNode?S(e,"previousSibling").length:-1}function O(e,t){if(t=t||[],!e||"html"===D(e))return t;var r=[D,E,$,T].map((function(t){return t(e)})).filter((function(e){return!!e})).join("").trim();return t.unshift(r),O(e.parentNode,t)}function $(e){return e.className&&e.className.split(" ").map((function(e){return"."+e})).join("")}function E(e){return e.id?"#"+e.id:""}function D(e){return e.nodeName.toLowerCase()}function T(e){var t=k(e);return~t&&"BODY"!==e.tagName?":nth-child("+(t+1)+")":""}function I(e){return O(e).join(" > ").trim()}function j(e){return A.apply(this,arguments)}function A(){return A=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,1e3*t)})));case 1:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}t["a"]={components:{MaskedInput:m.a},data:function(){return{db:v["a"],ValidationError:y,http:p["a"],countries:[{value:"CZ",text:"esk republika"},{value:"DE",text:"Deutschland"},{value:"FR",text:"France"},{value:"HR",text:"Hrvatska"},{value:"HU",text:"Magyarorszg"},{value:"AT",text:"sterreich"},{value:"PL",text:"Polska"}]}},computed:{spec:function(){return this.$store.state.auth.spec},timezoneOffset:function(){var e=new Date,t=function(e){return e<10?"0"+e:e},r=e.getTimezoneOffset()>0?"-":"+",a=Math.abs(e.getTimezoneOffset()),n=t(Math.floor(a/60)),s=t(a%60);return r+n+":"+s},procCategories:function(){return[{text:this.$t("options.visits"),value:this.$i18n.messages.en.options.visits},{text:this.$t("options.xray"),value:this.$i18n.messages.en.options.xray},{text:this.$t("options.maintainers"),value:this.$i18n.messages.en.options.maintainers},{text:this.$t("options.restor"),value:this.$i18n.messages.en.options.restor},{text:this.$t("options.surgery"),value:this.$i18n.messages.en.options.surgery},{text:this.$t("options.endo"),value:this.$i18n.messages.en.options.endo},{text:this.$t("options.periodontics"),value:this.$i18n.messages.en.options.periodontics},{text:this.$t("options.prosthodontics"),value:this.$i18n.messages.en.options.prosthodontics}]}},methods:{cssPath:I,sleep:j,currencyFormat:function(e){var t=this.$store.state.auth.currency,r=this.$store.state.auth.langs[0];return e.toLocaleString(r,{style:"currency",currency:t})},getCountryObjectByCode:function(e){return this.countries.find((function(t){return t.value===e}))},toggleBodyOverflow:function(e){return document.body.style.overflowY=e||"auto"},notifyInfo:function(e){var t=this.$store.state.windowWidth>=1780,r=t?"top-center":"bottom-right";this.$vs.notify({position:r,text:e,color:"primary",iconPack:"feather",icon:"icon-info",time:4e3})},notifySuccess:function(e){var t=this.$store.state.windowWidth,r=t>=1780?"top-center":"bottom-right";this.$vs.notify({position:r,text:e,color:"success",iconPack:"feather",icon:"icon-check",time:4e3})},notifyError:function(e){var t=this.$store.state.windowWidth,r=t>=1780?"top-center":"bottom-right";this.$vs.notify({position:r,text:e,color:"danger",iconPack:"feather",icon:"icon-alert-octagon",time:4e3})},notifyWarning:function(e){var t=this.$store.state.windowWidth,r=t>=1780?"top-center":"bottom-right";this.$vs.notify({position:r,text:e,color:"warning",iconPack:"feather",icon:"icon-alert-octagon",time:4e3})},cleanEmptyData:function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(n["a"])(e,2),r=t[0],a=t[1];if(a)return[r,a]})).filter((function(e){return e})))},partial:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return function(){return e.apply(void 0,r)}},$clone:function(e){return C(e)},requestResource:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,s,i,o,c,l,u,d,h,m,v,g,_,w,y,x,C,S,k,O,$=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=$.length>1&&void 0!==$[1]?$[1]:{},a=r.query,s=r.data,i=r.vm,o=r.headers||{},c=r.scope||null,l=r.errRespMap||{},u=r.errTransMap||{},d=r.similarErrMsgMap||{},e.prev=7,h=this.spec[t],e.next=14;break;case 11:throw e.prev=11,e.t0=e["catch"](7),new Error("resource ".concat(t," does not exist"));case 14:if(h){e.next=17;break}return console.warn("Endpoint (".concat(t,") undefined, exit")),e.abrupt("return",{});case 17:m=h.method,v=h.url,r.format&&Object.entries(r.format).forEach((function(e){var t=Object(n["a"])(e,2),r=t[0],a=t[1];v=v.replace("{".concat(r,"}"),a)}));try{g=i.$root.syncManager.fingerprint}catch(E){g=window.localStorage.getItem("app.laima:fngprt")}return _=b({Range:m,Pragma:g},o),_.Overwrite||(_.Overwrite=this.$store.state.auth.selectedWorkspace.id),s&&(_["Content-Type"]="application/json"),r.no_loading||r.loadingIn||f["a"].commit("STATE_LOADING_ON",{}),r.loadingIn&&i&&(y=document.querySelector(r.loadingIn)||{},x=y.parentElement,x&&x.id?(w="#".concat(x.id),y.classList.add("blur-3"),i.$vs.loading({container:w})):(w=r.loadingIn,i.$vs.loading({container:w}))),e.next=28,p["a"].request({url:v,data:s,headers:_,method:"POST",params:a,withCredentials:!0});case 28:if(C=e.sent,r.no_loading||r.loadingIn||f["a"].commit("STATE_LOADING_OFF",{}),r.loadingIn&&w&&i&&(i.$vs.loading.close("".concat(w," > .con-vs-loading")),y.classList.remove("blur-3")),423!==C.status){e.next=36;break}return delete r.vm,f["a"].commit("auth/RESOURCE_UNLOCK"),f["a"].commit("auth/RESOURCE_LOCKED",{opts:r,resource:t,data:C.data}),e.abrupt("return",C);case 36:if(422!==C.status||!i.$validator){e.next=47;break}if(S=C.data||{},k=Object.assign({},S),k.payload&&(k=k.payload),O=i.$validator.fields.items.map((function(e){return e.name})),Object.entries(k).forEach((function(e){var t=Object(n["a"])(e,2),r=t[0],a=t[1],s=l[r]||r,o=u[s];O.includes(s)&&(Array.isArray(a)||(a=Object.values(a)),a.forEach((function(e){Array.isArray(e)&&(e=e.join(", ")),d[s]&&Object.entries(d[s]).some((function(t){var r=Object(n["a"])(t,2),a=r[0],s=r[1];if(e.match(new RegExp(a)))return o="",e=s,!0})),i.$validator.errors.add({scope:c,field:s,msg:o||e})})),delete k[r],delete k[s])})),k.length){e.next=44;break}return e.abrupt("return",C);case 44:Object.values(k).map((function(e){var t=e.join(", ");i.notifyError(t)})),e.next=48;break;case 47:200!==C.status&&i&&i.notifyError(C.data);case 48:return e.abrupt("return",C);case 49:case"end":return e.stop()}}),e,this,[[7,11]])})));function t(t){return e.apply(this,arguments)}return t}()}}},"9e6a":function(e,t,r){},"9e82":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"data-list-container",attrs:{id:"data-list-thumb-view"}},[r("vs-table",{ref:"table",attrs:{multiple:"",pagination:"","max-items":e.itemsPerPage,search:"",data:e.products},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data;return[r("tbody",e._l(a,(function(t,a){return r("vs-tr",{key:a,attrs:{data:t}},[r("vs-td",{staticClass:"img-container"},[r("img",{staticClass:"product-img",attrs:{src:t.img}})]),r("vs-td",[r("p",{staticClass:"product-name font-medium truncate"},[e._v(e._s(t.name))])]),r("vs-td",[r("p",{staticClass:"product-category"},[e._v(e._s(t.category))])]),r("vs-td",[r("vs-progress",{staticClass:"shadow-md",attrs:{percent:Number(t.quantity),color:e.getquantityColor(Number(t.quantity))}})],1),r("vs-td",[r("vs-chip",{staticClass:"product-order-status",attrs:{color:e.getOrderStatusColor(t.order_status)}},[e._v(e._s(e._f("title")(t.order_status)))])],1),r("vs-td",[r("p",{staticClass:"product-price"},[e._v("$"+e._s(t.price))])]),r("vs-td",{staticClass:"whitespace-no-wrap"},[r("feather-icon",{attrs:{icon:"EditIcon",svgClasses:"w-5 h-5 hover:text-primary stroke-current"},on:{click:function(r){return r.stopPropagation(),e.editData(t)}}}),r("feather-icon",{staticClass:"ml-2",attrs:{icon:"TrashIcon",svgClasses:"w-5 h-5 hover:text-danger stroke-current"},on:{click:function(r){return r.stopPropagation(),e.deleteData(t.id)}}})],1)],1)})),1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[r("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[r("div",{staticClass:"flex flex-wrap-reverse items-center"},[r("vs-dropdown",{staticClass:"cursor-pointer mr-4 mb-4",attrs:{"vs-trigger-click":""}},[r("div",{staticClass:"p-4 shadow-drop rounded-lg d-theme-dark-bg cursor-pointer flex items-center justify-center text-lg font-medium w-32"},[r("span",{staticClass:"mr-2"},[e._v("Actions")]),r("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),r("vs-dropdown-menu",[r("vs-dropdown-item",[r("span",{staticClass:"flex items-center"},[r("feather-icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",svgClasses:"h-4 w-4"}}),r("span",[e._v("Delete")])],1)]),r("vs-dropdown-item",[r("span",{staticClass:"flex items-center"},[r("feather-icon",{staticClass:"mr-2",attrs:{icon:"ArchiveIcon",svgClasses:"h-4 w-4"}}),r("span",[e._v("Archive")])],1)]),r("vs-dropdown-item",[r("span",{staticClass:"flex items-center"},[r("feather-icon",{staticClass:"mr-2",attrs:{icon:"FileIcon",svgClasses:"h-4 w-4"}}),r("span",[e._v("Print")])],1)]),r("vs-dropdown-item",[r("span",{staticClass:"flex items-center"},[r("feather-icon",{staticClass:"mr-2",attrs:{icon:"SaveIcon",svgClasses:"h-4 w-4"}}),r("span",[e._v("Another Action")])],1)])],1)],1),r("vs-button",{staticClass:"mr-3 mb-5",on:{click:e.addNewData}},[r("feather-icon",{attrs:{icon:"PlusIcon",svgClasses:"h-4 w-4"}}),r("span",{staticClass:"text-base"},[e._v("Add New")])],1)],1),r("vs-dropdown",{staticClass:"cursor-pointer mb-4 mr-4",attrs:{"vs-trigger-click":""}},[r("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[r("span",{staticClass:"mr-2"},[e._v(e._s(e.currentPage*e.itemsPerPage-(e.itemsPerPage-1))+" - "+e._s(e.products.length-e.currentPage*e.itemsPerPage>0?e.currentPage*e.itemsPerPage:e.products.length)+" of "+e._s(e.queriedItems))]),r("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),r("vs-dropdown-menu",[r("vs-dropdown-item",{on:{click:function(t){e.itemsPerPage=5}}},[r("span",[e._v("5")])]),r("vs-dropdown-item",{on:{click:function(t){e.itemsPerPage=10}}},[r("span",[e._v("10")])]),r("vs-dropdown-item",{on:{click:function(t){e.itemsPerPage=15}}},[r("span",[e._v("15")])]),r("vs-dropdown-item",{on:{click:function(t){e.itemsPerPage=20}}},[r("span",[e._v("20")])])],1)],1)],1),r("template",{slot:"thead"},[r("vs-th",[e._v("Product")]),r("vs-th",{attrs:{"sort-key":"name"}},[e._v("Name")]),r("vs-th",{attrs:{"sort-key":"category"}},[e._v("Category")]),r("vs-th",{attrs:{"sort-key":"quantity"}},[e._v("Quantity")]),r("vs-th",{attrs:{"sort-key":"order_status"}},[e._v("Order Status")]),r("vs-th",{attrs:{"sort-key":"price"}},[e._v("Price")]),r("vs-th",[e._v("Action")])],1)],2)],1)},n=[],s={data:function(){return{selected:[],itemsPerPage:5,isMounted:!1,addNewDataSidebar:!1,sidebarData:{}}},computed:{currentPage:function(){return this.isMounted?this.$refs.table.currentx:0},products:function(){return this.$store.state.dataList.products},queriedItems:function(){return this.$refs.table?this.$refs.table.queriedResults.length:this.products.length}},methods:{addNewData:function(){this.sidebarData={},this.toggleDataSidebar(!0)},deleteData:function(e){this.$store.dispatch("dataList/removeItem",e).catch((function(e){console.error(e)}))},editData:function(e){this.sidebarData=e,this.toggleDataSidebar(!0)},getOrderStatusColor:function(e){return"on_hold"===e?"warning":"delivered"===e?"success":"canceled"===e?"danger":"primary"},getquantityColor:function(e){return e>90?"success":e>70?"primary":e>=50?"warning":e<50?"danger":"primary"},toggleDataSidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=e}},created:function(){},mounted:function(){this.isMounted=!0}},i=s,o=(r("9260"),r("2877")),c=Object(o["a"])(i,a,n,!1,null,null,null);t["default"]=c.exports},a249:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"page-user-edit"}},[r("vx-card",[r("div",{staticClass:"tabs-container",attrs:{slot:"no-body"},slot:"no-body"},[r("vs-tabs",{staticClass:"open-overflow",attrs:{position:"top"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("vs-tab",{staticClass:"open-overflow",attrs:{label:e.$t("headers.user_settings"),"icon-pack":"feather",icon:"icon-info"}},[r("div",{staticClass:"tab-text open-overflow"},[r("user-edit-tab-information",{staticClass:"open-overflow"})],1)]),r("vs-tab",{attrs:{label:e.$t("headers.security"),"icon-pack":"feather",icon:"icon-lock"}},[r("div",{staticClass:"tab-text"},[r("user-security")],1)])],1)],1)])],1)},n=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"user-edit-tab-info"}},[r("vs-prompt",{staticClass:"prompt-no-cancel",attrs:{title:e.$t("headers.enter_verif_code"),buttonsHidden:!0,type:e.smsPromptExpired?"alert":"dialog",active:e.phoneVerifPrompt},on:{"update:active":function(t){e.phoneVerifPrompt=t}}},[r("div",{},[r("h5",{staticClass:"mb-2"},[e._v(e._s(e.$t("headers.texted_verif_code")))]),r("div",{staticClass:"vx-col w-full mt-5"},[e._v(e._s(e.$t("headers.enter_verif_code_cta")))]),r("vac",{attrs:{"left-time":6e4},on:{finish:function(t){e.smsPromptExpired=!0}},scopedSlots:e._u([{key:"process",fn:function(t){var a=t.timeObj;return r("div",{},[r("div",{staticClass:"vx-col w-full mt-5"},[r("vs-avatar",{staticStyle:{left:"50%","font-size":"23px",transform:"translateX(-50%)"},attrs:{size:"large",color:"danger","text-color":"danger",text:a.ceil.s.toString()+"s"}})],1),r("masked-input",{staticClass:"vs-inputx vs-input--input hasValue text-center font-big",attrs:{type:"text",name:"pin",mask:[/\d/,/\d/,/\d/,/\d/],guide:!0,autocomplete:"off",placeholder:"----",placeholderChar:"-"},on:{click:function(e){return e.target.select()}},model:{value:e.smsVerifyCode,callback:function(t){e.smsVerifyCode=t},expression:"smsVerifyCode"}})],1)}}])},[r("h3",{staticClass:"pt-4 text-center text-danger",attrs:{slot:"finish"},slot:"finish"},[e._v(e._s(e.$t("headers.too_late"))+" ")])])],1)]),r("div",{staticClass:"inline-flex w-full"},[r("photo-uploader",{staticClass:"mr-12"}),r("laima-form",{ref:"laima",staticStyle:{"max-height":"194px"},attrs:{title:e.$t("headers.personal_info"),cleanForm:e.cleanPersonalPayload,onSubmit:!e.isProfileComplete&&e.savePersonalData,formFields:e.personalInfoFields,modelsContainer:e.$store.getters["auth/getUserContext"]||{}},on:{updated:e.onUpdatedPersonal}})],1),r("laima-form",{staticClass:"mt-8",attrs:{title:e.$t("fields.account"),formScope:"step-2",modelsContainer:e.accountContext,formFields:e.accountFields},on:{updated:e.onUpdatedAccount},scopedSlots:e._u([{key:"beforefield",fn:function(t){var a=t.item;return[e.emailConfirmed||"email"!==a.name?e.phoneConfirmed||"phone"!==a.name?e._e():r("vs-alert",{staticClass:"form-alert flex warning",attrs:{active:"true","icon-pack":"feather",icon:"icon-alert-triangle"}},[r("div",{staticClass:"flex items-center"},[r("span",{staticClass:"alert-text font-normal"},[e._v("\n                       "+e._s(e.$t("headers.phone_not_verif"))+"\n                       "),r("b",{staticClass:"font-normal hover:underline cursor-pointer"},[r("a",{on:{click:e.manageSmsPrompt}},[e._v("\n                               "+e._s(e.$t("headers.click_to_verif"))+" \n                            ")])])])])]):r("vs-alert",{staticClass:"form-alert flex primary",attrs:{active:"true","icon-pack":"feather",icon:"icon-info"}},[r("span",{staticClass:"alert-text font-normal"},[e._v("\n                    "+e._s(e.$t("headers.verify_email_cta"))+"\n                ")])])]}}])})],1)},i=[],o=(r("ac6a"),r("456d"),r("28a5"),r("768b")),c=(r("4917"),r("96cf"),r("3b8d")),l=r("eea2"),u=r("c986"),d=r.n(u),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("VueFileAgent",{ref:"profilePicRef",staticClass:"mx-auto",attrs:{id:"vuefileagent",uploadWithCredentials:"",averageColor:!1,multiple:!1,disabled:e.isLoading,deletable:!0,meta:!1,compact:!0,accept:"image/*",helpText:e.$t("help_texts.dragndrop_here")},on:{select:function(t){return e.onSelect(t)}},nativeOn:{mouseenter:function(t){e.hoverOn=!0},mouseleave:function(t){e.hoverOn=!1}},scopedSlots:e._u([{key:"before-outer",fn:function(){},proxy:!0},e.avatar?{key:"file-preview-new",fn:function(){return[r("div",{key:"1",staticClass:"relative"},[r("img",{staticClass:"rounded-lg shadow object-cover",attrs:{width:"154",height:"154",src:e.avatar}}),r("div",{staticClass:"transition-opacity duration-200 absolute top-0 bg-primary rounded-full",class:e.hoverOn?"opacity-75":"opacity-0",staticStyle:{width:"154px",height:"154px"}},[r("div",{staticClass:"flex justify-center items-center h-full z-40"},[r("svg",{staticClass:"h-12 text-white",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}}),r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"}})])])])])]},proxy:!0}:null,{key:"after-inner",fn:function(){return[e.profilePic?r("vs-button",{staticClass:"mx-0 my-0 text-md w-full p-2",staticStyle:{"z-index":"999"},attrs:{type:"filled",color:"primary",disabled:e.isLoading},on:{click:e.upload}},[r("div",{staticClass:"w-full"},[r("span",{class:e.isLoading&&"opacity-0"},[e._v(e._s(e.$t("buttons.upload")))]),r("div",{staticClass:"w-full absolute h-full top-0"},[r("div",{staticClass:"flex justify-center  h-full"},[e.isLoading?r("svg",{staticClass:"circle__svg w-6",attrs:{viewBox:"0 0 100 100"}},[r("circle",{staticClass:"circle__svg-circle",attrs:{cx:"50",cy:"50",r:"45"}})]):e._e()])])])]):r("a",{staticClass:"text-sm",attrs:{color:"primary",type:"border"}},[e._v("\n            "+e._s(e.selectBtn)+"\n        ")])]},proxy:!0}],null,!0),model:{value:e.profilePic,callback:function(t){e.profilePic=t},expression:"profilePic"}})},f=[],h=r("a026"),m=r("7924"),v=r.n(m);r("bd75");h["default"].use(v.a);var g={data:function(){return{uploaded:!1,hoverOn:!1,profilePic:null,isLoading:!1}},props:["avatartop","urltop"],computed:{avatar:function(){return this.avatartop||this.$store.state.auth.userContext.avatar},fingerprint:function(){return this.$root.syncManager.fingerprint},selectBtn:function(){return this.avatar?this.$t("buttons.change_avatar"):this.$t("buttons.select_avatar")},uploadHeaders:function(){return{Range:"post",Pragma:this.fingerprint}},uploadUrl:function(){return this.urltop||this.$root.spec.post_uploadAvatar.url}},mounted:function(){window.ii=this},methods:{removePic:function(){this.profilePic=null,this.uploaded=!1},upload:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this.$refs.profilePicRef.upload(this.uploadUrl,this.uploadHeaders,[this.profilePic]);case 3:if(t=e.sent[0],200!==t.status){e.next=11;break}return r=t.data.cdn_url,a={avatar:r},e.next=9,this.$parent.onUpdatedPersonal([a,function(){}]);case 9:n=e.sent,200===n.status&&this.notifySuccess(this.$t("notifs.avatar_updated"));case 11:this.isLoading=!1,this.uploaded=!0;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSelect:function(){this.uploaded=!1,document.querySelector(".file-delete").addEventListener("click",this.removePic)}}},b=g,_=(r("9091"),r("2877")),w=Object(_["a"])(b,p,f,!1,null,null,null),y=w.exports;h["default"].use(d.a,"vac");var x={components:{CountryFlag:l["a"],PhotoUploader:y},data:function(){return{accountContext:{},datePickerActivated:!1,fullnameRaw:"",phoneVerifPrompt:null,smsPromptExpired:!1,smsVerifyCode:null}},computed:{emailConfirmed:function(){return this.$store.state.auth.actorContext.email_confirmed},phoneConfirmed:function(){return this.$store.state.auth.actorContext.phone_confirmed},actorContext:function(){return this.$store.state.auth.actorContext},personalInfoFields:function(){return[{name:"fullname",type:"text",validators:{required:!0},helpText:this.$t("help_texts.fullname"),label:this.$t("fields.name"),placeholder:this.$t("placeholders.fullname")},{name:"dob",type:"date",validators:{required:!0},label:this.$t("fields.dob")}]},accountFields:function(){return[{name:"username",type:"text",validators:{required:!0},label:"Username"},{name:"email",type:"email",validators:{required:!0},label:this.$t("fields.email")},{name:"phone",type:"tel",validators:{required:!0},helpText:this.$t("help_texts.phone_why"),label:this.$t("fields.phone")}]},isProfileComplete:function(){return!!this.$store.getters["auth/getUserContext"]}},watch:{datePickerActivated:function(e){var t=document.querySelector(".con-vs-tabs"),r=document.querySelector(".con-slot-tabs");e?(t.style.overflow="visible",r.style.overflow="visible"):(t.style.overflow="",r.style.overflow="")},smsVerifyCode:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t||t.match("-")){e.next=3;break}return e.next=3,this.verifySmsCode(t);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},methods:{onUpdatedAccount:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=Object(o["a"])(t,2),a=r[0],n=r[1],s=this.$store.state.auth.actorContext.id,i={select:{id:s},payload:this.cleanEmptyData(a)},e.next=5,this.requestResource("patch_principalactor",{data:i,vm:this,scope:"step-2"});case 5:c=e.sent,200===c.status&&(a.phone&&(a.phone_confirmed=!1,this.accountContext.phone_confirmed=!1),a.email&&(a.email_confirmed=!1,this.accountContext.email_confirmed=!1),n(),this.$store.commit("auth/UPDATE_ACTOR_CONTEXT",a));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onUpdatedPersonal:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=Object(o["a"])(t,2),a=r[0],n=r[1],s=this.$store.state.auth.actorContext.id,a=this.cleanEmptyData(a),i={select:{actor:s},payload:a},e.next=6,this.requestResource("patch_user",{vm:this,data:i});case 6:if(c=e.sent,200!==c.status){e.next=11;break}return this.$store.commit("auth/UPDATE_USER_CONTEXT",a),n(),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),cleanPersonalPayload:function(e){if(e.fullname){var t=e.fullname.split(" "),r=Object(o["a"])(t,2),a=r[0],n=r[1];if(!n)throw new this.ValidationError("fullname","Last name is required");e=Object.assign(e,{name:a,last_name:n}),delete e.fullname}return e.dob&&(e.dob=new Date(e.dob).toISOString().split("T")[0]),e},savePersonalData:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.requestResource("post_user",{data:t,vm:this,scope:"step-1",similarErrMsgMap:{fullname:{".*?already exists":this.$t("notifs.user_exists")}},errRespMap:{actor:"fullname"}});case 2:r=e.sent,200===r.status&&(this.$store.dispatch("auth/updateUserContext",t),this.notifySuccess(this.$t("notifs.saved_user_details")));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),manageSmsPrompt:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.smsVerifyCode=null,this.$store.commit("STATE_LOADING_ON",{}),e.next=4,this.$http.post("/api/actor/activate/phone/send/",JSON.stringify({phone:this.accountContext.phone}),{headers:{Range:"post"}});case 4:if(t=e.sent,this.$store.commit("STATE_LOADING_OFF",{}),!(t.status>=400)){e.next=9;break}return console.error(t.data),e.abrupt("return",this.notifyError(this.$t("notifs.failed_send_verif")));case 9:this.phoneVerifPrompt=!0;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),verifySmsCode:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post("/api/actor/activate/phone/".concat(t,"/"),{},{headers:{Range:"get"}});case 2:if(r=e.sent,!(r.status>=422)){e.next=7;break}return this.notifyError(this.$t("notifs.verif_code_invalid")),this.phoneVerifPrompt=!1,e.abrupt("return");case 7:this.notifySuccess(this.$t("notifs.verif_code_ok")),this.phoneVerifPrompt=!1,this.accountContext.phone_confirmed=!0,this.$store.commit("auth/UPDATE_ACTOR_CONTEXT",{phone_confirmed:!0});case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;window.ll=this;var t=Object.fromEntries(Object.keys(this.spec.get_principalactor.schema).map((function(t){var r=e.actorContext[t]||null;return[t,r]})));this.accountContext=Object.assign({},t)}},C=x,S=(r("bbd0"),Object(_["a"])(C,s,i,!1,null,null,null)),k=S.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"user-security"}},[r("laima-form",{attrs:{formScope:"step-1",formFields:e.screenLockFields,modelsContainer:e.screenLockPayload,title:e.$t("headers.screen_lock")},scopedSlots:e._u([{key:"beforefield",fn:function(t){var a=t.item;return["screenlock"===a.name&&e.useScreenLock?r("vs-alert",{staticClass:"form-alert flex primary",attrs:{active:"true","icon-pack":"feather",icon:"icon-info"}},[r("div",{staticClass:"alert-text font-normal"},[e._v("\n                    "+e._s(e.$t("headers.lockscreen_code_disclaimer"))+"\n                ")]),r("div",{staticClass:"alert-text font-normal"},[e._v("\n                    "+e._s(e.$t("headers.otp_app_cta"))+"\n                ")])]):e._e()]}},{key:"screenlock",fn:function(t){t.item;var a=t.successCallback;return[r("vs-switch",{on:{input:function(t){return e.toggleScreenLock(a)}},model:{value:e.useScreenLock,callback:function(t){e.useScreenLock=t},expression:"useScreenLock"}})]}},{key:"pin",fn:function(t){var a=t.item,n=t.hasErrors,s=t.successCallback;return[r("lm-input",{directives:[{name:"validate",rawName:"v-validate",value:a.validators,expression:"item.validators"},{name:"debounce",rawName:"v-debounce:1100ms",value:e.partial(e.changedScreenLock,a.name,s),expression:"partial(changedScreenLock, item.name, successCallback)",arg:"1100ms"}],ref:"pin",staticClass:"pin-field",class:n&&"input-icon-validate-danger",attrs:{name:a.name,type:"password",maxlength:"4",minlength:"4"},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changedScreenLock(a.name,s)},focus:function(e){return e.target.select()},click:function(e){return e.target.select()}},model:{value:e.pin,callback:function(t){e.pin=t},expression:"pin"}})]}},{key:"defaultIdleTime",fn:function(t){var a=t.item,n=t.hasErrors,s=t.successCallback;return[r("lm-input",{directives:[{name:"validate",rawName:"v-validate",value:a.validators,expression:"item.validators"},{name:"debounce",rawName:"v-debounce:500ms",value:e.partial(e.changedScreenLock,a.name,s),expression:"partial(changedScreenLock, item.name, successCallback)",arg:"500ms"}],class:n&&"input-icon-validate-danger",attrs:{disabled:!e.pin||4!=e.pin.length,name:a.name,type:"number","data-vv-as":a.label.toLowerCase()},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changedScreenLock(a.name,s)}},model:{value:e.defaultIdleTime,callback:function(t){e.defaultIdleTime=t},expression:"defaultIdleTime"}})]}}])}),r("laima-form",{staticClass:"mt-8",attrs:{formScope:"step-1",formFields:e.OTPFields,validator:e.$validator,title:e.$t("headers.otp_setup"),modelsContainer:{}},scopedSlots:e._u([{key:"beforefield",fn:function(){return[r("vs-alert",{staticClass:"form-alert flex primary",attrs:{active:"true","icon-pack":"feather",icon:"icon-info"}},[r("div",{staticClass:"alert-text font-normal"},[e._v("\n                    "+e._s(e.$t("headers.lockscreen_code_disclaimer"))+"\n                ")]),r("div",{staticClass:"alert-text font-normal"},[e._v("\n                    "+e._s(e.$t("headers.otp_app_cta"))+"\n                ")])])]},proxy:!0},{key:"otpSecret",fn:function(){return[r("vs-button",{staticClass:"w-32 justify-end",on:{click:e.requestOTPQR}},[e._v(e._s(e.$t("headers.view")))])]},proxy:!0}])}),r("vs-prompt",{staticStyle:{"z-index":"10000000"},attrs:{title:e.$t("misc.totp_pin_prompt"),buttonsHidden:!0,active:!!e.otpSecret},on:{close:function(t){e.otpSecret=null}}},[r("div",{staticClass:"text-center"},[r("p",[e._v(e._s(e.$t("headers.scan_code_cta")))])]),r("div",{attrs:{id:"qr-dialog"}},[r("qrcode",{ref:"qr",staticClass:"qr",attrs:{value:e.TOTPval,options:{size:300}}})],1)])],1)},$=[],E=(r("8e6e"),r("6762"),r("2fdb"),r("bd86")),D=(r("7f7f"),r("2f62")),T=r("f8aa");function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){Object(E["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}h["default"].component(T["a"].name,T["a"]);var A={data:function(){return{otpSecret:null,screenLockPayload:{}}},computed:j(j(j({},Object(D["c"])({actorContext:function(e){return e.auth.actorContext},userContext:function(e){return e.auth.userContext||{}}})),Object(D["b"])(["auth/getUserContext"])),{},{OTPFields:function(){return[{model:"otpSecret",name:"otpSecret",type:"button",label:this.$t("fields.otp_qr"),helpText:this.$t("help_texts.otp")}]},pin:{get:function(){return this.screenLockPayload.pin||"0000"},set:function(e){this.$set(this.screenLockPayload,"pin",e)}},useScreenLock:{get:function(){return this.$store.state.screenLock.isSet},set:function(e){e?this.$store.commit("ENABLE_SCREEN_LOCK"):this.$store.commit("DISABLE_SCREEN_LOCK")}},defaultIdleTime:{get:function(){return this.screenLockPayload.defaultIdleTime||this.$store.state.screenLock.defaultIdleTime},set:function(e){this.$set(this.screenLockPayload,"defaultIdleTime",e)}},screenLockFields:function(){return[{model:"useScreenLock",name:"screenlock",type:"switch",label:this.$t("fields.use_lock")},{hidden:!this.useScreenLock,name:"pin",type:"number",validators:{required:!0,integer:!0,length:4},label:this.$t("fields.lock_pin"),helpText:this.$t("help_texts.lock_pin")},{model:"defaultIdleTime",hidden:!this.useScreenLock,type:"number",validators:{required:!0,integer:!0,min_value:30},name:"defaultIdleTime",label:this.$t("fields.time2lock"),helpText:this.$t("help_texts.time2lock")}]},isAuthed:function(){return this.$store.state.auth.actorContext.roles.includes("Owner")},TOTPval:function(){var e=this.$store.state.auth.actorContext;return"otpauth://totp/".concat(e.email,"?secret=").concat(this.otpSecret,"&issuer=laima.app")}}),methods:{requestOTPQR:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.requestResource("get_getOtpSecret",{data:{}});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),toggleScreenLock:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=+this.useScreenLock,a={select:{actor:this.$store.state.auth.actorContext.id},payload:{status:r}},e.next=4,this.requestResource("patch_screenlock",{data:a,vm:this});case 4:if(n=e.sent,422!==n.status||"Update failed"!==n.statusText){e.next=8;break}return e.next=8,this.requestResource("post_screenlock",{data:{time_to_lock:this.defaultIdleTime,status:1},vm:this});case 8:if(!r){e.next=10;break}return e.abrupt("return",this.notifySuccess(this.$t("notifs.lock_on")));case 10:this.notifySuccess(this.$t("notifs.lock_off"));case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),changedScreenLock:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll("step-1");case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return a=t,"defaultIdleTime"===t&&(a="time_to_lock"),n={select:{actor:this.$store.state.auth.actorContext.id},payload:Object(E["a"])({},a,this[t])},e.next=9,this.requestResource("patch_screenlock",{data:n,vm:this});case 9:s=e.sent,200===s.status&&("defaultIdleTime"===t&&this.$store.commit("SET_LOCK_SCREEN_IDLE_TIME",this.defaultIdleTime),r());case 11:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.ii=this;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{"$store.state.auth.shieldedResponse":function(e){"get_getOtpSecret"===e.source&&(this.otpSecret=e.data.otp_secret)}}},R=A,P=(r("ea8d"),Object(_["a"])(R,O,$,!1,null,null,null)),M=P.exports,L={components:{UserEditTabInformation:k,UserSecurity:M},data:function(){return{activeTab:0}}},N=L,H=(r("1b2c"),Object(_["a"])(N,a,n,!1,null,null,null));t["default"]=H.exports},a472:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("vs-prompt",{attrs:{title:e.currentUser.name,buttonsHidden:!0,active:e.userDetailsPrompt},on:{"update:active":function(t){e.userDetailsPrompt=t}}},[r("div",[r("div",{staticClass:"vx-row mb-3"},[r("div",{staticClass:"vx-col w-full"},[r("vs-input",{staticClass:"w-full",attrs:{disabled:"","icon-pack":"feather",icon:"icon-user","icon-no-border":"",value:e.currentUser.name+" "+e.currentUser.last_name}})],1)]),r("div",{staticClass:"vx-row mb-3"},[r("div",{staticClass:"vx-col w-full"},[r("vs-input",{staticClass:"w-full",attrs:{disabled:"",type:"text","icon-pack":"feather",icon:"icon-home","icon-no-border":"",value:e.currentUser.address1}})],1)]),r("div",{staticClass:"vx-row mb-3"},[r("div",{staticClass:"vx-col w-full"},[r("vs-input",{staticClass:"w-full",attrs:{disabled:"","icon-pack":"feather",icon:"icon-map","icon-no-border":"",value:e.currentUser.city}})],1)]),r("vs-row",{attrs:{"vs-align":"flex-start","vs-type":"flex","vs-justify":"center","vs-w":"12"}},[r("vs-col",{attrs:{"vs-align":"center","vs-justify":"center","vs-type":"flex","vs-w":"2"}},[r("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-mail"}})],1),r("vs-col",{attrs:{"vs-align":"center","vs-justify":"center","vs-type":"flex","vs-w":"2"}},[r("vs-button",{attrs:{color:"dark",type:"relief","icon-pack":"feather",icon:"icon-message-square"}})],1)],1)],1)]),r("vx-card",{staticClass:"better-table"},[r("div",{staticClass:"mb-8"},[r("vs-select",{staticClass:"mb-4",attrs:{width:"300px",label:"Clinic"},model:{value:e.workspaceSelected,callback:function(t){e.workspaceSelected=t},expression:"workspaceSelected"}},e._l(e.$store.state.auth.availableWorkspaces,(function(e,t){return r("vs-select-item",{key:t,attrs:{value:e.id,text:e.name}})})),1)],1),r("div",{staticClass:"flex flex-wrap justify-between items-center"},[r("div",{staticClass:"table-wrap"},[r("vue-good-table",{key:e.key,ref:"table",attrs:{mode:"remote",styleClass:"vgt-table condensed",columns:e.columns,totalRecords:e.totalRecords,totalRows:e.totalRecords,"pagination-options":e.paginationOptions,rows:e.rows},on:{"on-page-change":e.onPageChange,"on-per-page-change":e.onPerPageChange,"on-column-filter":e.onColumnFilter,"on-sort-change":e.onSortChange,"on-selected-rows-change":e.selectionChanged,"on-row-click":e.onRowClicked},scopedSlots:e._u([{key:"table-row",fn:function(t){return[e.roles.includes(t.column.field)?r("span",{staticClass:"role-flag"},[r("vs-checkbox",{attrs:{color:"success",value:e.rows[t.index][t.column.field]},on:{input:function(r){return e.roleChanged(t)}}})],1):r("span",[e._v("\n\t\t\t\t\t\t\t"+e._s(t.formattedRow[t.column.field])+"\n\t\t\t\t\t\t")])]}}])})],1)])])],1)},n=[],s=(r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("7f7f"),r("6b54"),r("6762"),r("2fdb"),r("768b")),i=(r("ffc1"),r("75fc")),o=(r("55dd"),r("ac6a"),r("96cf"),r("3b8d")),c=r("f617");r("dac4");function l(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function u(e,t){if(e){if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var p={components:{VueGoodTable:c["a"]},data:function(){return{bool:[],totalRecords:0,localWorkspaceSelected:null,rows:[],page:1,perPage:8,order_by:["email"],order_dir:"asc",filter:{},userDetailsPrompt:!1,key:0,currentUser:{name:"df"}}},computed:{columnDefsBase:function(){var e=this.$store.state.auth.actorContext.username,t=this.$store.state.auth.scopes;return[{field:"id",hidden:!0},{label:this.$t("fields.email"),field:"email",sortable:!1,filterOptions:{enabled:!0,placeholder:"user@example.com"}},{label:this.$t("fields.username"),field:"username",filterOptions:{enabled:!0,placeholder:e}},{label:this.$t("fields.phone"),field:"phone",width:"200px",sortable:!1,filterOptions:{enabled:!0,placeholder:"+48123456789"}},{label:this.$t("fields.scope"),field:"scope",width:"150px",filterOptions:{enabled:!0,filterDropdownItems:t,placeholder:this.$t("misc.show_all")}}]},workspaceSelected:{get:function(){return this.localWorkspaceSelected||this.$store.state.auth.selectedWorkspace.id},set:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.localWorkspaceSelected=t,e.next=3,this.fetchRows();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},roles:function(){return this.$store.state.auth.roles},columns:function(){var e=[];return this.roles.forEach((function(t){e.push({label:t[0].toUpperCase()+t.slice(1),field:t,type:"boolean",sortable:!1})})),e.sort((function(e,t){return e.field<t.field?-1:e.field>t.field?1:0})),[].concat(Object(i["a"])(this.columnDefsBase),e)},paginationOptions:function(){return{perPage:this.perPage,enabled:!0}}},methods:{onPageChange:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.page=t.currentPage,e.next=3,this.fetchRows();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onPerPageChange:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.perPage=t.currentPerPage,e.next=3,this.fetchRows();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onColumnFilter:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.filter=Object.fromEntries(Object.entries(t.columnFilters).filter((function(e){var t=Object(s["a"])(e,2),r=(t[0],t[1]);return!!r}))),e.next=3,this.fetchRows();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onSortChange:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.order_dir=t[0].type,this.order_by=[t[0].field],e.next=4,this.fetchRows();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onRowClicked:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("checkbox"!==t.event.target.type){e.next=2;break}return e.abrupt("return");case 2:return r={actor:t.row.id},e.next=5,this.requestResource("get_user",{data:r,vm:this});case 5:a=e.sent,200===a.status&&(this.currentUser=Object.assign({},this.currentUser,a.data),this.userDetailsPrompt=!0);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadingOn:function(){this.$vs.loading({container:".vgt-wrap",type:"default"})},loadingOff:function(){this.$vs.loading.close(".vgt-wrap > .con-vs-loading")},selectionChanged:function(e){var t,r=this,a=l(this.$refs.table.$refs.table.rows);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.classList.remove("highlighted")}}catch(i){a.e(i)}finally{a.f()}var s=e.selectedRows.map((function(e){return e.originalIndex}));s.forEach((function(e){var t=r.$refs.table.$refs.table.rows[e+2];t.classList.add("highlighted")}))},roleChanged:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.$store.state.auth.roles,a=this.rows[t.index],a[t.column.field]^=!0,this.$set(this.rows,t.index,a),n={actor_id:a.id},s={roles:r.filter((function(e){return!!a[e]}))},e.next=8,this.requestResource("post_grantRole",{format:n,data:s,vm:this,no_loading:!0});case 8:i=e.sent,200===i.status?this.notifySuccess(this.$t("notifs.changes_saved")):(a[t.column.field]=!1,this.$set(this.rows,t.index,a),this.key+=1);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),fetchRows:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingOn(),e.next=3,this.$http.post("/api/actor/list/members/".concat(this.workspaceSelected,"/"),JSON.stringify({page:this.page,limit:this.perPage,order_by:this.order_by,order_dir:this.order_dir,filter:this.filter,select:["id","email","username","roles","scope","phone"]}),{headers:{Range:"get"}});case 3:if(t=e.sent,r=t.data.data,r){e.next=10;break}return this.rows=[],this.totalRecords=0,this.loadingOff(),e.abrupt("return");case 10:try{this.rows=t.data.data.map((function(e){return a.roles.forEach((function(t){e[t]=e.roles.includes(t)})),delete e.roles,e})),this.totalRecords=t.data.total_count}finally{this.loadingOff()}case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchRows();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},f=p,h=(r("b070"),r("2877")),m=Object(h["a"])(f,a,n,!1,null,null,null);t["default"]=m.exports},a489:function(e,t,r){},a5c0:function(e,t,r){"use strict";r("72f0")},a6f7:function(e,t,r){e.exports=r.p+"img/laima-logo-plain.9ea464b8.png"},a92a:function(e,t,r){},aaf8:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"h-screen flex w-full bg-img vx-row no-gutter items-center justify-center"},[e.$store.state.auth.pendingEmail?r("email-verif-sent"):r("div",{staticClass:"vx-col sm:w-1/2 md:w-1/2 lg:w-3/4 xl:w-3/5 sm:m-0 m-4"},[r("vx-card",[r("div",{staticClass:"full-page-bg-color",attrs:{slot:"no-body"},slot:"no-body"},[r("div",{staticClass:"vx-row no-gutter"},[r("div",{staticClass:"vx-col hidden sm:hidden md:hidden lg:block lg:w-1/2 mx-auto self-center"}),r("div",{staticClass:"vx-col sm:w-full md:w-full lg:w-1/2 mx-auto self-center  d-theme-dark-bg"},[r("div",{staticClass:"px-8 pt-8 register-tabs-container"},[r("div",{staticClass:"vx-card__title mb-4"},[r("h4",{staticClass:"mb-4"},[e._v(e._s(e.$t("headers.create_account")))]),r("p",[e._v(e._s(e.$t("headers.create_account_cta")))])]),e.$store.state.auth.phoneVerificationNeeded?r("verify-phone"):r("register-helper")],1)])])])])],1)],1)},n=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"h-screen flex w-full bg-img"},[r("div",{staticClass:"vx-col flex items-center justify-center flex-col sm:w-1/2 md:w-3/5 lg:w-3/4 xl:w-1/2 mx-auto text-center"},[r("h2",{staticClass:"sm:mx-0 mx-4 sm:mb-12 mb-8 text-5xl d-theme-heading-color"},[e._v(e._s(e.$t("headers.account_registered"))+" ")]),r("h3",{staticClass:"sm:mx-0 mx-4 sm:mb-12 mb-8 d-theme-text-inverse",staticStyle:{color:"#567156"}},[e._v(e._s(e.message))])])])},i=[],o={computed:{message:function(){var e=this.$store.state.auth.pendingEmail,t=this.$t("misc.activ_instr");return t+e?" (".concat(e,")"):""}}},c=o,l=r("2877"),u=Object(l["a"])(c,s,i,!1,null,null,null),d=u.exports,p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"clearfix"},[r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|alpha_dash|min:3",expression:"'required|alpha_dash|min:3'"}],staticClass:"w-full",attrs:{autocomplete:"off","data-vv-validate-on":"blur",name:"username","data-vv-as":e.$t("fields.username").toLowerCase(),"label-placeholder":e.$t("fields.name"),placeholder:e.$t("fields.username")},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("username")))]),e.isInvited?e._e():r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"w-full mt-6",attrs:{autocomplete:"off","data-vv-validate-on":"blur",name:"email",type:"email","data-vv-as":e.$t("fields.email").toLowerCase(),"label-placeholder":e.$t("fields.email"),placeholder:e.$t("fields.email")},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("email")))]),e.isInvited?r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full mt-6",attrs:{autocomplete:"off","data-vv-validate-on":"blur",name:"phone",type:"text","data-vv-as":e.$t("fields.phone").toLowerCase(),"label-placeholder":e.$t("fields.phone"),placeholder:e.$t("fields.phone")},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}):e._e(),r("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("phone")))]),r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:10",expression:"'required|min:6|max:10'"}],ref:"password",staticClass:"w-full mt-6",attrs:{type:"password","data-vv-validate-on":"blur",name:"password","data-vv-as":e.$t("fields.password").toLowerCase(),"label-placeholder":e.$t("fields.password"),placeholder:e.$t("fields.password")},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("password")))]),r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:10|confirmed:password",expression:"'required|min:6|max:10|confirmed:password'"}],staticClass:"w-full mt-6",attrs:{type:"password","data-vv-validate-on":"blur","data-vv-as":e.$t("fields.password").toLowerCase(),name:"confirm_password","label-placeholder":e.$t("fields.confirm_pass"),placeholder:e.$t("fields.confirm_pass")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.registerUser(t)}},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}}),r("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("confirm_password")))]),r("vs-checkbox",{staticClass:"mt-6",model:{value:e.isTermsConditionAccepted,callback:function(t){e.isTermsConditionAccepted=t},expression:"isTermsConditionAccepted"}},[e._v(e._s(e.$t("headers.tc_accepted")))]),r("vs-button",{staticClass:"mt-6",attrs:{type:"border",to:"/pages/account/login"}},[e._v(e._s(e.$t("headers.login")))]),r("vs-button",{staticClass:"float-right mt-6",attrs:{disabled:!e.validateForm},on:{click:e.registerUser}},[e._v(e._s(e.$t("headers.register")))])],1)},f=[],h=(r("96cf"),r("3b8d")),m={data:function(){return{username:"",email:"",password:"",phone:"",confirm_password:"",isTermsConditionAccepted:!0}},computed:{validateForm:function(){return!this.errors.any()},isInvited:function(){return this.$route.query.inv}},methods:{checkLogin:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),registerUser:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validate();case 2:if(e.t0=!this.validateForm,e.t0){e.next=7;break}return e.next=6,this.checkLogin();case 6:e.t0=!e.sent;case 7:if(!e.t0){e.next=9;break}return e.abrupt("return");case 9:t={userDetails:{username:this.username,email:this.email,password:this.password},errors:this.errors},this.phone&&(t.userDetails.phone=this.phone),this.isInvited&&(t["isInvited"]=this.isInvited),this.$store.dispatch("auth/registerUser",[t,this]);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},v=m,g=Object(l["a"])(v,p,f,!1,null,null,null),b=g.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"clearfix"},[r("h5",{staticClass:"mb-2"},[e._v(e._s(e.$t("headers.texted_verif_code")))]),r("div",{staticClass:"vx-col w-full mt-5"},[e._v(e._s(e.$t("headers.enter_verif_code_cta")))]),r("vac",{attrs:{"left-time":6e4},on:{finish:function(t){e.smsPromptExpired=!0}},scopedSlots:e._u([{key:"process",fn:function(t){var a=t.timeObj;return r("div",{},[r("div",{staticClass:"vx-col w-full mt-5"},[r("vs-avatar",{staticStyle:{left:"50%","font-size":"23px",transform:"translateX(-50%)"},attrs:{size:"large",color:"danger","text-color":"danger",text:a.ceil.s.toString()+"s"}})],1),r("masked-input",{staticClass:"vs-inputx vs-input--input hasValue text-center font-big",attrs:{type:"text",name:"pin",mask:[/\d/,/\d/,/\d/,/\d/],guide:!0,autocomplete:"off",placeholder:"----",placeholderChar:"-"},on:{click:function(e){return e.target.select()}},model:{value:e.smsVerifyCode,callback:function(t){e.smsVerifyCode=t},expression:"smsVerifyCode"}})],1)}}])},[r("h3",{staticClass:"pt-4 text-center text-danger",attrs:{slot:"finish"},slot:"finish"},[e._v(e._s(e.$t("headers.too_late"))+" ")])])],1)},w=[],y=(r("4917"),r("c986")),x=r.n(y),C=r("a026");C["default"].use(x.a,"vac");var S={data:function(){return{smsVerifyCode:null}},methods:{verifySmsCode:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post("/api/actor/activate/phone/".concat(t,"/"),{},{headers:{Range:"get"}});case 2:if(r=e.sent,!(r.status>=422)){e.next=5;break}return e.abrupt("return",this.notifyError(this.$t("notifs.verif_code_invalid")));case 5:this.notifySuccess(this.$t("notifs.verif_code_ok")),this.$store.commit("auth/UPDATE_ACTOR_CONTEXT",{phone_confirmed:!0}),this.$router.push("/"),this.$store.commit("auth/SET_NEEDED_PHONE_VERIF",!1);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},watch:{smsVerifyCode:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t||t.match("-")){e.next=3;break}return e.next=3,this.verifySmsCode(t);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},k=S,O=Object(l["a"])(k,_,w,!1,null,null,null),$=O.exports,E={components:{EmailVerifSent:d,RegisterHelper:b,VerifyPhone:$}},D=E,T=(r("73f5"),Object(l["a"])(D,a,n,!1,null,null,null));t["default"]=T.exports},ae4d:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"data-list-container",attrs:{id:"data-list-list-view"}},[r("vs-table",{ref:"table",attrs:{multiple:"",pagination:"","max-items":e.itemsPerPage,search:"",data:e.products},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data;return[r("tbody",e._l(a,(function(t,a){return r("vs-tr",{key:a,attrs:{data:t}},[r("vs-td",[r("p",{staticClass:"product-name font-medium truncate"},[e._v(e._s(t.name))])]),r("vs-td",[r("p",{staticClass:"product-category"},[e._v(e._s(e._f("title")(t.id)))])]),r("vs-td",[r("p",{staticClass:"product-price"},[e._v(e._s(t.client))])]),r("vs-td",[r("p",{staticClass:"product-price"},[e._v(e._s(t.value))])]),r("vs-td",[r("p",{staticClass:"product-price"},[e._v(e._s(t.valueTax))])]),r("vs-td",{staticClass:"whitespace-no-wrap"},[r("feather-icon",{attrs:{icon:"EditIcon",svgClasses:"w-5 h-5 hover:text-warning stroke-current"},on:{click:function(r){return r.stopPropagation(),e.editData(t)}}}),r("feather-icon",{staticClass:"ml-2",attrs:{icon:"MailIcon",svgClasses:"w-5 h-5 hover:text-primary stroke-current"},on:{click:function(r){return r.stopPropagation(),e.smsData(t.id)}}}),r("feather-icon",{staticClass:"ml-2",attrs:{icon:"AtSignIcon",svgClasses:"w-5 h-5 hover:text-primary stroke-current"},on:{click:function(r){return r.stopPropagation(),e.emailData(t.id)}}}),r("feather-icon",{staticClass:"ml-2",attrs:{icon:"PrinterIcon",svgClasses:"w-5 h-5 hover:text-primary stroke-current"},on:{click:function(r){return r.stopPropagation(),e.printData(t.id)}}}),r("feather-icon",{staticClass:"ml-2",attrs:{icon:"XIcon",svgClasses:"w-5 h-5 hover:text-danger stroke-current"},on:{click:function(r){return r.stopPropagation(),e.printData(t.id)}}})],1)],1)})),1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[r("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[r("div",{staticClass:"flex flex-wrap-reverse items-center data-list-btn-container"},[r("vs-dropdown",{staticClass:"dd-actions cursor-pointer ml-6 mr-4 mb-4",attrs:{"vs-trigger-click":""}},[r("vs-button",{staticClass:"p-3 shadow-drop rounded-lg cursor-pointer flex items-center justify-center text-lg font-medium w-32 w-full"},[r("span",{staticClass:"mr-2"},[e._v("Actions")]),r("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),r("vs-dropdown-menu",[r("vs-dropdown-item",[r("span",{staticClass:"flex items-center"},[r("feather-icon",{staticClass:"mr-2",attrs:{icon:"AtSignIcon",svgClasses:"h-4 w-4"}}),r("span",[e._v("Send mail")])],1)]),r("vs-dropdown-item",[r("span",{staticClass:"flex items-center"},[r("feather-icon",{staticClass:"mr-2",attrs:{icon:"FileIcon",svgClasses:"h-4 w-4"}}),r("span",[e._v("Print")])],1)])],1)],1),r("vs-button",{staticClass:"p-3 mb-4 mr-4 cursor-pointer flex items-center justify-center text-lg font-medium",attrs:{color:"danger"},on:{click:e.addNewData}},[r("feather-icon",{attrs:{icon:"PlusIcon",svgClasses:"h-4 w-4"}}),r("span",{staticClass:"ml-2 text-base"},[e._v("Add New")])],1)],1)]),r("template",{slot:"thead"},[r("vs-th",{attrs:{"sort-key":"name"}},[e._v("Date")]),r("vs-th",{attrs:{"sort-key":"id"}},[e._v("ID")]),r("vs-th",{attrs:{"sort-key":"client"}},[e._v("Client")]),r("vs-th",{attrs:{"sort-key":"value"}},[e._v("Value")]),r("vs-th",{attrs:{"sort-key":"value-tax"}},[e._v("Value TAX")]),r("vs-th",[e._v("Action")])],1)],2)],1)},n=[],s={data:function(){return{selected:[],itemsPerPage:10,isMounted:!1,addNewDataSidebar:!1,sidebarData:{}}},computed:{currentPage:function(){return this.isMounted?this.$refs.table.currentx:0},products:function(){return this.$store.state.dataList.products},queriedItems:function(){return this.$refs.table?this.$refs.table.queriedResults.length:this.products.length}},methods:{addNewData:function(){this.sidebarData={},this.toggleDataSidebar(!0)},deleteData:function(e){this.$store.dispatch("dataList/removeItem",e).catch((function(e){console.error(e)}))},editData:function(e){this.sidebarData=e,this.toggleDataSidebar(!0)},toggleDataSidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=e}},created:function(){},mounted:function(){this.isMounted=!0}},i=s,o=(r("25bb"),r("2877")),c=Object(o["a"])(i,a,n,!1,null,null,null);t["default"]=c.exports},af8a:function(e,t,r){},b070:function(e,t,r){"use strict";r("edb4")},b1a7:function(e,t,r){},b410:function(e,t,r){},b6ad:function(e,t,r){"use strict";r("fe42")},b74e:function(e,t,r){},b824:function(e,t,r){},bae5:function(e,t,r){"use strict";r("00fa")},bb36:function(e,t,r){"use strict";var a=r("bc3a"),n=r.n(a),s=r("d3e3"),i=r("07a4"),o=n.a.create({headers:{"Content-Type":"application/json"},validateStatus:function(e){return e>=200&&e<500}});o.interceptors.response.use((function(e){var t=e.headers.etag;return t&&i["a"].state.auth.localSpecHashsum!==t&&console.info(e,"Spec hashsum changed or missing, fetching new spec version... TODO!!!"),401===e.status&&s["a"].$emit("unauthed"),e}),(function(e){return Promise.reject(e)})),t["a"]=o},bb51:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h4",[e._v("You are in home.")])},n=[],s=r("2877"),i={},o=Object(s["a"])(i,a,n,!1,null,null,null);t["default"]=o.exports},bbd0:function(e,t,r){"use strict";r("5eb2")},c0ba:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"h-screen flex w-full bg-img"},[a("div",{staticClass:"vx-col flex items-center justify-center flex-col sm:w-1/2 md:w-3/5 lg:w-3/4 xl:w-1/2 mx-auto text-center"},[a("img",{staticClass:"mx-auto mb-4 max-w-full",attrs:{src:r("4a50"),alt:"graphic-404"}}),a("h1",{staticClass:"sm:mx-0 mx-4 mb-12 text-5xl d-theme-heading-color"},[e._v(e._s(e.$t("headers.e404"))+" ")]),a("vs-button",{attrs:{size:"large",to:"/"}},[e._v(e._s(e.$t("menu.home")))])],1)])},n=[],s=r("2877"),i={},o=Object(s["a"])(i,a,n,!1,null,null,null);t["default"]=o.exports},c1c3:function(e,t,r){},c1eb:function(e,t,r){},c4d4:function(e,t,r){"use strict";r("fc94")},cdc0:function(e,t,r){},ce01:function(e,t,r){e.exports=r.p+"img/laima-logo-plain-vertical.c8f1ce5a.png"},ce98:function(e,t,r){},d054:function(e,t,r){"use strict";r("6e49")},d3e3:function(e,t,r){"use strict";var a=r("a026");t["a"]=new a["default"]},d4b1:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"knowledge-base-page"}},[r("div",{staticClass:"knowledge-base-jumbotron"},[r("div",{staticClass:"knowledge-base-jumbotron-content sm:p-8 p-8 rounded-lg mb-base"},[r("h1",{staticClass:"mb-1 text-white"},[e._v("Check how to use Laima.app fast and efficient!")]),r("p",{staticClass:"text-white"},[e._v("You can also use search box below to find solution.")]),r("vs-input",{staticClass:"w-full mt-6",attrs:{"icon-no-border":"",placeholder:"Search Topic or Keyword","icon-pack":"feather",icon:"icon-search",size:"large"},model:{value:e.knowledgeBaseSearchQuery,callback:function(t){e.knowledgeBaseSearchQuery=t},expression:"knowledgeBaseSearchQuery"}})],1)]),r("div",{staticClass:"vx-row"},e._l(e.filteredKB,(function(t){return r("div",{key:t.id,staticClass:"vx-col w-full md:w-1/3 sm:w-1/2 mb-base",on:{click:function(r){e.$router.push(t.url).catch((function(){}))}}},[r("vx-card",{staticClass:"text-center cursor-pointer"},[r("img",{staticClass:"mx-auto mb-4",attrs:{src:t.graphic,alt:"graphic",width:"180"}}),r("h4",{staticClass:"mb-2"},[e._v(e._s(t.title.toUpperCase()))]),r("small",[e._v(e._s(t.description))])])],1)})),0)])},n=[],s=(r("6762"),r("2fdb"),{data:function(){return{knowledgeBaseSearchQuery:"",kb:[{id:1,title:"Add new patient",description:"Muffin lemon drops chocolate carrot cake chocolate bar sweet roll.",graphic:r("4a50"),url:"/pages/knowledge-base/category"},{id:2,title:"Update patients data",description:"Gingerbread sesame snaps wafer souffl. Macaroon brownie ice cream",graphic:r("4a50"),url:"/pages/knowledge-base/category"},{id:3,title:"Rescheduling",description:"cotton candy caramels danish chocolate cake pie candy. Lemon drops tart.",graphic:r("4a50"),url:"/pages/knowledge-base/category"},{id:4,title:"Add new staff member",description:"Pudding oat cake carrot cake lemon drops gummies marshmallow.",graphic:r("4a50"),url:"/pages/knowledge-base/category"},{id:5,title:"How to set up working hours?",description:"Gummi bears pudding icing sweet caramels chocolate",graphic:r("4a50"),url:"/pages/knowledge-base/category"},{id:6,title:"How to correct a invoice?",description:"Drage jelly beans candy canes pudding cake wafer. Muffin croissant.",graphic:r("4a50"),url:"/pages/knowledge-base/category"}]}},computed:{filteredKB:function(){var e=this;return this.kb.filter((function(t){return t.title.toLowerCase().includes(e.knowledgeBaseSearchQuery.toLowerCase())||t.description.toLowerCase().includes(e.knowledgeBaseSearchQuery.toLowerCase())}))}},methods:{},components:{}}),i=s,o=(r("b6ad"),r("2877")),c=Object(o["a"])(i,a,n,!1,null,null,null);t["default"]=c.exports},dc11:function(e,t,r){},e11f:function(e,t,r){},e19d:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"time-range flex justify-around",class:e.$attrs.disabled&&"disabled"},[r("div",{staticClass:"range-side relative"},[r("span",{staticClass:"field-validation"},[r("v-popover",{directives:[{name:"show",rawName:"v-show",value:!!e.leftErrors,expression:"!!leftErrors"}],ref:"tooltipl",attrs:{popoverBaseClass:"tooltip",popoverArrowClass:"border-danger tooltip-arrow popover-arrow",popoverInnerClass:"bg-danger rounded-full text-white tracking-normal text-sm p-1 px-2",trigger:"click"}},[r("feather-icon",{staticClass:"text-danger animated pulse delay-1s infinite",attrs:{icon:"AlertCircleIcon"}}),r("template",{slot:"popover"},[e._v("\n                        "+e._s(e.leftErrors)+"\n                    ")])],2)],1),r("lm-input",{attrs:{autocomplete:"off",name:"from_hour",type:"time",disabled:e.$attrs.disabled,danger:!!e.leftErrors,iconBefore:"ClockIcon"},on:{input:function(t){return e.$emit("input",[t,e.value[1]])}},scopedSlots:e._u([{key:"labelBefore",fn:function(){return[r("span",[e._v("From")])]},proxy:!0}]),model:{value:e.value[0],callback:function(t){e.$set(e.value,0,t)},expression:"value[0]"}})],1),r("div",{staticClass:"range-side relative"},[r("span",{staticClass:"field-validation"},[r("v-popover",{directives:[{name:"show",rawName:"v-show",value:!!e.rightErrors,expression:"!!rightErrors"}],ref:"tooltipr",attrs:{popoverBaseClass:"tooltip",popoverArrowClass:"border-danger tooltip-arrow popover-arrow",popoverInnerClass:"bg-danger rounded-full text-white tracking-normal text-sm p-1 px-2",trigger:"click"}},[r("feather-icon",{staticClass:"text-danger animated pulse delay-1s infinite",attrs:{icon:"AlertCircleIcon"}}),r("template",{slot:"popover"},[e._v("\n                        "+e._s(e.rightErrors)+"\n                    ")])],2)],1),r("lm-input",{attrs:{autocomplete:"off",label:e.$t(e.fields.to_hour),name:"to_hour",type:"time",disabled:e.$attrs.disabled,danger:!!e.rightErrors,iconBefore:"ClockIcon"},on:{input:function(t){return e.$emit("input",[e.value[0],t])}},scopedSlots:e._u([{key:"labelBefore",fn:function(){return[r("span",[e._v(e._s(e.$t("headers.to"))+" ")])]},proxy:!0}]),model:{value:e.value[1],callback:function(t){e.$set(e.value,1,t)},expression:"value[1]"}})],1)])},n=[],s={inheritAttrs:!1,props:{value:{default:function(){return[]},type:Array},errorsArray:{default:function(){return["",""]},type:Array}},computed:{leftErrors:function(){return this.errorsArray[0]},rightErrors:function(){return this.errorsArray[1]}},mounted:function(){window.ooo=this},methods:{},watch:{errorsArray:function(){var e=this;this.$nextTick((function(){e.leftErrors?e.$refs.tooltipl.show():e.$refs.tooltipl.hide(),e.rightErrors?e.$refs.tooltipr.show():e.$refs.tooltipr.hide()}))}}},i=s,o=(r("6f5e"),r("2877")),c=Object(o["a"])(i,a,n,!1,null,null,null);t["a"]=c.exports},e275:function(e,t,r){"use strict";r("2175")},e332:function(e,t,r){},e6c9:function(e,t,r){},e8ae:function(e,t,r){},ea8d:function(e,t,r){"use strict";r("c1eb")},eb2a:function(e,t,r){"use strict";r("0f28")},ed54:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vuecal",class:e.mainClasses,attrs:{id:"VueCal"}},["scheduler"===e.$store.state.core.calendarMode?a("add-new-slot",{ref:"newslot",attrs:{doctorID:e.splitSelectedDoctor,scheduleID:e.scheduleID,endHour:e.newSlotHourEnd,startHour:e.newSlotHourStart}}):e._e(),"scheduler"===e.$store.state.core.calendarMode?a("slot-details",{attrs:{refs:"viewSlot"}}):e._e(),a("schedule-header",{ref:"header",attrs:{calendar:e.activeCalendar,currentView:e.currentView,isMounted:e.isMounted,currentDate:e.currentDate,currentViewChanged:e.currentViewChanged}}),e.searchbarOn?a("div",{staticClass:"calendar-mask absolute w-full h-full top-0 left-0"}):e._e(),"month"!==e.currentView&&e.$store.state.core.emptyTimeframe?a("div",[a("div",{staticClass:"relative center"},[a("img",{staticClass:"mx-auto center",attrs:{src:r("6335"),alt:"not-found",width:"324"}}),a("h3",{staticClass:"text-center font-light mb-16",staticStyle:{color:"#718096"}},[e._v(e._s(e.$t("headers.no_visits_in_timeframe")))])])]):e._e(),a("vue-cal",{directives:[{name:"show",rawName:"v-show",value:"month"==e.currentView||"scheduler"===e.$store.state.core.calendarMode&&!e.$store.state.core.emptyTimeframe,expression:"currentView == 'month' || $store.state.core.calendarMode === 'scheduler' && !$store.state.core.emptyTimeframe"}],ref:"vuecal",class:[e.currentView+"-mode",e.searchbarOn&&"searchbar-on"],attrs:{"active-view":e.currentView,"cell-click-hold":!1,dblclickToNavigate:!1,"disable-views":["years","year"],dragToCreateThreshold:5,"editable-events":{drag:!0,resize:!0,create:!0},events:"month"===e.currentView&&e.monthlyEvens||e.allEvents,"hide-weekdays":[7],locale:e.$i18n.locale,"min-event-width":100,"on-event-create":e.onGenericEventCreate,"on-event-dblclick":e.onEventDBClick,"selected-date":e.currentDate,showWeekNumbers:!1,"snap-to-time":15,splitDays:e.splitDays,"time-from":e.minHour,"time-to":e.maxHour,"time-step":e.default_visit_interval,hideViewSelector:"","hide-title-bar":"",showAllDayEvents:"","show-week-numbers":"","sticky-split-labels":"","today-button":"","week-number-cell":""},on:{"cell-dblclick":function(t){return e.addNewEvent(t)},"event-drag-create":function(t){return e.dragCreateEvent(t)},"event-drop":e.onSlotMoved,"event-duration-change":e.onDurationChange,"view-change":e.calendarChangedTimeframe},scopedSlots:e._u([{key:"cell-content",fn:function(t){var r=t.cell,n=t.view,s=(t.split,t.events);return["month"!==e.currentView&&e.daysClosed.includes(r.specialHours.day-1)?a("div",[a("div",{staticClass:"closed w-full h-full absolute"},[a("span",[e._v(e._s(e.$t("headers.clinic_closed")))])])]):e.scheduleLoading?a("div",{staticClass:"loading-box h-full w-full flex z-50"},[a("div",{staticClass:"spinner justify-center self-center"},[a("div",{staticClass:"double-bounce1"}),a("div",{staticClass:"double-bounce2"})])]):"week"===n.id?a("div",{staticClass:"vuecal__no-event h-full flex",class:s.length||e.currentScheduleMeta.find((function(e){return r.formattedDate===e.date.format("YYYY-MM-DD")}))?"no-visits":"no-schedule",attrs:{"data-displaytext":e.noScheduleDisplayText}}):"month"===n.id?a("div",[n.endDate.format("MM")==r.startDate.format("MM")?a("div",{staticClass:"vuecal__cell-date",class:s[0]&&[s[0].status,"cell-with-events"],on:{click:function(t){s[0]&&e.selectDayFromMonthly(s[0])}}},[a("div",{staticClass:"vuecal__event-title",class:s[0]&&"has-events"},[a("h4",{staticClass:"font-light"},[a("div",[e._v(e._s(r.content))])]),a("div",{staticClass:"w-full absolute left-0 mt-1"},[a("div",{staticClass:"text-center center text-white"},[e._v(e._s(e.statusMap[s[0]&&s[0].status]))])])]),s[0]?a("div",{staticClass:"absolute top-0 left-0"},[a("div",{staticClass:"relative m-2"},[a("img",{directives:[{name:"tooltip",rawName:"v-tooltip.top-center",value:e.getDocsName(e.docs[s[0].split]),expression:"getDocsName(docs[events[0].split])",modifiers:{"top-center":!0}}],staticClass:"m-0 rounded-full shadow-md cursor-pointer absolute z-30",attrs:{src:e.docs[s[0].split].avatar,alt:"doctor-img",width:"32",height:"32"}})])]):e._e()]):a("div",{staticClass:"vuecal__cell-date"},[a("div",{staticClass:"vuecal__event-title"},[a("h4",{staticClass:"text-grey font-light"},[e._v(e._s(r.content))])])])]):e._e()]}},{key:"no-event",fn:function(){return[a("div",{staticClass:"w-full flex h-full no-visits"})]},proxy:!0},"month"!==e.currentView?{key:"weekday-heading",fn:function(t){var r=t.heading;return[a("p",{staticClass:"cursor-pointer hover:underline hover:text-primary",on:{click:function(t){return e.selectDay(r)}}},[e._v("\n\t\t\t\t\t"+e._s(r.label)+" "+e._s(r.date.format("DD"))+"\n\t\t\t\t")])]}}:null,{key:"event",fn:function(t){var r=t.event;return["main"===r.class?a("div",{staticClass:"h-full",class:e.slotDynClass(r)},[a("div",{staticClass:"vuecal__event-title text-black truncate",domProps:{innerHTML:e._s(r.title)}}),a("div",{staticClass:"vuecal__event-time truncate"},[e._v("\n\t\t\t\t\t\t"+e._s(new Date(r.start).formatTime("HH:mm"))+"\n\t\t\t\t\t\t"),a("span",[e._v("- "+e._s(new Date(r.end).formatTime("HH:mm")))])]),new Date(r.start)>=e.currentDate?[a("div",{staticClass:"schedule-control-btns right-0 top-0 absolute"},[a("div",{staticClass:"flex",staticStyle:{margin:"5px 2px 0 0"}},[a("span",{staticClass:"control-btn no-rotation ",staticStyle:{"z-index":"12",opacity:"0"},on:{click:function(t){return e.showSlotDetails(r)}}},[a("feather-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("buttons.show_details"),classes:"text-sm"},expression:"{content: $t('buttons.show_details'), classes: 'text-sm'}"}],staticClass:"text-primary",staticStyle:{height:"inherit",bottom:"3px"},attrs:{icon:"InfoIcon",svgClasses:"w-6"}})],1),a("span",{staticClass:"control-btn delete-schedule ",staticStyle:{"z-index":"12",opacity:"0"},on:{click:function(t){return e.openCancelAppointmentPrompt(r)}}},[a("feather-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("buttons.cancel"),classes:"text-sm"},expression:"{content: $t('buttons.cancel'), classes: 'text-sm'}"}],staticClass:"text-danger",staticStyle:{height:"inherit",bottom:"3px"},attrs:{icon:"XCircleIcon",svgClasses:"w-6"}})],1)])])]:e._e()],2):"lunch"===r.class?a("div",[a("div",{staticClass:"vuecal__event-time"},[a("span",{staticClass:"font-medium"},[e._v(e._s(e.$t("headers.break"))+": ")]),e._v("\n\t\t\t\t\t\t"+e._s(new Date(r.start).formatTime("HH:mm"))+"\n\t\t\t\t\t\t"),a("span",[e._v(" - "+e._s(new Date(r.end).formatTime("HH:mm")))])])]):r.class&&r.class.match("closed-morning|closed-evening")?a("div",[a("div",{staticClass:"vuecal__event-time"},["closed-morning"===r.class?[a("span",{staticClass:"font-medium"},[e._v(e._s(e.$t("headers.unavailable_until"))+": ")]),a("span",[e._v(e._s(new Date(r.end).formatTime("HH:mm")))])]:[a("div",{style:{"margin-top":(r.end-r.start)/6e4<=20?"-10px":0}},[a("span",{staticClass:"font-medium"},[e._v(e._s(e.$t("headers.unavailable_from"))+": ")]),a("span",[e._v(e._s(new Date(r.start).formatTime("HH:mm")))])])]],2)]):"slot-loading"===r.class?a("div",{staticClass:"h-full"},[a("div",{staticClass:"loading-box slot-loading w-full h-full flex z-50"},[a("div",{staticClass:"spinner justify-center self-center"},[a("div",{staticClass:"double-bounce1"}),a("div",{staticClass:"double-bounce2"})])])]):r.class&&r.class.match("interim-slot|interim-overlap")?a("div",[a("div",{staticClass:"vuecal__event-title text-black truncate",domProps:{innerHTML:e._s(r.title)}}),a("div",{staticClass:"vuecal__event-time truncate"},[e._v("\n\t\t\t\t\t\t"+e._s(new Date(r.start).formatTime("HH:mm"))+"\n\t\t\t\t\t\t"),a("span",[e._v("- "+e._s(new Date(r.end).formatTime("HH:mm")))])])]):a("span",{staticClass:"hidden"})]}},{key:"split-label",fn:function(t){var r=t.split;return[a("div",[a("div",{staticClass:"items-center justify-center flex"},[e.docs[r.id]&&e.docs[r.id].avatar?a("img",{staticClass:"m-0 rounded-full shadow-md cursor-pointer absolute z-30 doctor-avatar border-solid",class:"doctor-avatar-"+(r.index+1),attrs:{src:e.docs[r.id].avatar,alt:"doctor-img",width:"50",height:"50"}}):a("vs-avatar",{staticClass:"m-0",class:"doctor-avatar-"+(r.index+1),staticStyle:{"font-size":"23px"},attrs:{size:"35px",text:""+e.docs[r.id].name[0]+e.docs[r.id].last_name[0]}})],1),a("h5",{staticClass:"doc-header text-center mt-10 font-normal",style:"color: "+r.color},[e._v(e._s(r.label))])])]}}],null,!0)}),a("schedule-planner",{directives:[{name:"show",rawName:"v-show",value:"planner"===e.$store.state.core.calendarMode,expression:"$store.state.core.calendarMode === 'planner'"}],ref:"planner"})],1)},n=[],s=(r("96cf"),r("3b8d")),i=(r("7514"),r("ffc1"),r("75fc")),o=r("768b"),c=(r("456d"),r("14b9"),r("5df3"),r("1c4c"),r("ac6a"),r("8615"),r("6762"),r("28a5"),r("7f7f"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vs-sidebar",{staticClass:"add-edit-slot",attrs:{"vs-custom-content":"","position-right":"",parent:"body","default-index":"-1",color:"primary",value:e.addSlotPrompt}},[r("div",{staticClass:"header-sidebar",attrs:{slot:"header"},slot:"header"},[r("div",{staticClass:"flex justify-between w-full h-full bg-primary text-white"},[r("h5",{staticClass:"pl-4 flex self-center text-white font-light"},[e._v(e._s(e.$t("headers.add_visit")))]),r("feather-icon",{staticClass:"pr-4 text-white cursor-pointer",attrs:{svgClasses:"w-6 h-6",icon:"XIcon"},on:{click:function(t){return e.closeSidebar()}}})],1)]),e.addSlotPrompt?r("laima-form",{ref:"lf",attrs:{size:"small",formScope:"step-1",formFields:e.slotFields,onSubmit:!0,modelsContainer:e.initModelsContainer,title:e.$t("headers.visit")},on:{changed:e.changedField},scopedSlots:e._u([{key:"footer",fn:function(){return[r("div")]},proxy:!0}],null,!1,3545152822)}):e._e(),r("add-edit-patient",{ref:"patient",attrs:{size:"small"}}),r("vs-button",{staticClass:"w-full rounded-none",attrs:{size:"large",type:"filled",color:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("buttons.save")))])],1)}),l=[],u=(r("4917"),r("6b54"),r("c5f6"),r("9d63")),d=r.n(u),p={components:{VuePerfectScrollbar:d.a},mounted:function(){var e=this;window.add=this;var t=this.$store.state.core.interimPatient;t&&this.$nextTick((function(){e.$refs.patient.models=Object.assign({},t)}))},props:{startHour:{type:Date},endHour:{type:Date},scheduleID:{type:Number},doctorID:{type:Number}},data:function(){return{slot:{}}},computed:{slotsPerDoctor:function(){return this.$store.getters["core/allSchedulerSlotsByDoctor"](this.doctorID,this)},allSlots:function(){return Object.values(this.$store.state.core.schedulerSlots).flatMap((function(e){return e}))},hourRange:function(){var e=this.startHour.getDay()-1,t=this.$store.state.core._schedulerClosureHoursEachDoc[e].doctors[this.doctorID].scheduleDuring.map((function(e){return new Date(e).format("HH")})),r=Object(o["a"])(t,2),a=r[0],n=r[1];return[parseInt(a),parseInt(n)]},overlapMessages:function(){return{main:this.$t("overlapMessages.main"),lunch:this.$t("overlapMessages.lunch"),noOffices:this.$t("overlapMessages.noOffices"),closedMorning:this.$t("overlapMessages.closedMorning"),closedEvening:this.$t("overlapMessages.closedEvening")}},slotFields:function(){return[{name:"startTime",label:this.$i18n.t("fields.startTime"),type:"time",interval:this.default_visit_interval,hourRange:[this.hourRange],validators:{required:!0}},{name:"duration",label:this.$i18n.t("fields.duration"),helpText:this.$i18n.t("help_texts.duration"),classes:["duration-input"],type:"fancyNumber",step:this.default_visit_interval,min:this.default_visit_interval,max:180},{name:"procedure_category",label:this.$i18n.t("fields.procedure_category"),type:"select",options:this.procCategories}]},slotDetails:function(){var e=this.endHour-this.startHour;return{startTime:this.startHour,duration:e/6e4}},initModelsContainer:function(){var e=this.endHour-this.startHour;return{duration:e/6e4,startTime:this.startHour.format("HH:mm")}},addSlotPrompt:function(){return this.$store.state.core.addSlotPrompt},default_visit_interval:function(){var e=this.$store.getters["core/activeClinic"]();return e&&e.default_visit_interval}},methods:{closeSidebar:function(){this.clearForm(),this.toggleBodyOverflow(),this.$store.commit("core/SET_ADD_SLOT_PROMPT",!1)},clearForm:function(){var e=this;try{Object.keys(this.$refs.patient.models).forEach((function(t){e.$set(e.$refs.patient.models,t,"")}))}catch(t){}},submit:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s,i,o,c,l,u,d,p,f,h,m,v,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.patient.$refs.lf.$validator.validateAll("step-1");case 2:if(t=e.sent,r=!this.$refs.lf.$validator.errors.items.length,!t||!r){e.next=30;break}return a=this.$refs.patient.models,n=a.patient_id.toString(),s=[n.slice(0,2),n.slice(2,4)],i=s[0],o=s[1],i=parseInt(o)>12?"20"+i:"19"+i,a.year_born=i,a.country="PL",e.next=13,this.requestResource("post_patientClinicRegistration",{data:a,scope:"step-1",vm:this.$refs.patient.$refs.lf,errRespMap:{year_born:"patient_id"}});case 13:if(c=e.sent,200!==c.status){e.next=26;break}return l=c.data.actor_id,u=[this.slotDetails.startTime,this.slotDetails.startTime.addMinutes(this.slotDetails.duration)],d=u[0],p=u[1],f={patient:l,schedule:this.scheduleID,during:[d.format("YYYY-MM-DD HH:mm".concat(this.timezoneOffset)),p.format("YYYY-MM-DD HH:mm".concat(this.timezoneOffset))]},this.slotDetails.procedure_category&&(f.procedure_category=this.slotDetails.procedure_category),e.next=21,this.requestResource("post_scheduleslot",{data:f,scope:"step-1",vm:this.$refs.lf});case 21:h=e.sent,422===h.status&&(m=h.data.during,m&&(m[0].match("office")?this.notifyError(this.$t("misc.no_avail_offices")):this.notifyError(h.data.during[0]))),200===h.status&&(v=h.data.id,g={doctorID:this.doctorID,start:d,end:p,class:"main",status:"booked",id:v,split:parseInt(this.doctorID),draggable:!0,title:[a.name,a.last_name].join(" ")},this.notifySuccess(this.$t("notifs.new_visit",{title:g.title})),this.$store.commit("core/ADD_SCHEDULER_SLOT",g)),e.next=27;break;case 26:return e.abrupt("return",this.notifyError(this.$t("notifs.server_error")));case 27:this.$store.commit("SET_GLOBAL_MESSAGE",null),this.$store.commit("core/RESET_INTERIM_PATIENT"),this.closeSidebar();case 30:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changedField:function(e){var t=this,r=Object(o["a"])(e,2),a=r[0],n=r[1],s=this.$store.state.core.interimEvents[0].split;if(this.$set(this.slotDetails,a,n),"procedure_category"!==a){var i,c,l=this.startHour.format("MM-DD");if("startTime"===a){var u=n.split(":"),d=Object(o["a"])(u,2),p=d[0],f=d[1];i=this.startHour.clone(),i.setHours(p),i.setMinutes(f),c=i.addMinutes(this.slotDetails.duration),this.$set(this.slotDetails,a,i)}else"duration"===a&&(i=this.slotDetails.startTime,c=i.addMinutes(n));var h=i.getTime(),m=c.getTime(),v=this.slotsPerDoctor.filter((function(e){var t=e.start,r=e.end;return t instanceof Date&&l===t.format("MM-DD")&&!e.class.match("interim-slot|interim-overlap")&&t.getTime()!=r.getTime()})),g=v.find((function(e){if(s!=e.doctorID)return!1;var t=e.start,r=e.end;return t=t.getTime(),r=r.getTime(),t<=h&&r>h||t<m&&r>=m||t>=h&&r<=m})),b=this.$parent.clinic.office_count,_=this.allSlots.reduce((function(e,t){if(s==t.doctorID||"main"!=t.class)return e;var r=t.start,a=t.end;r=r.getTime(),a=a.getTime();var n=r<=h&&a>h||r<m&&a>=m||r>=h&&a<=m;return n+e}),0),w=_>=b,y=g||w?"interim-overlap":"interim-slot";this.$store.commit("core/UPDATE_INTERIM_SLOT",{start:i,end:c,class:y}),g||w?setTimeout((function(){t.$refs.lf.$validator.errors.add({field:a,scope:"step-1",msg:t.overlapMessages[g&&g.class||"noOffices"]})}),0):this.$refs.lf.$validator.errors.remove(a,"step-1")}}},beforeDestroy:function(){var e=this;window.removeEventListener("keydown",(function(t){"Escape"==t.key&&e.closeSidebar()}))},watch:{addSlotPrompt:function(e){var t=this;e&&window.addEventListener("keydown",(function(e){"Escape"==e.key&&t.closeSidebar()}))}}},f=p,h=(r("bae5"),r("2877")),m=Object(h["a"])(f,c,l,!1,null,null,null),v=m.exports,g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vs-sidebar",{staticClass:"add-edit-slot slot-details",attrs:{"vs-custom-content":"","position-right":"",parent:"body","default-index":"-1",color:"primary",value:e.slotID}},[r("div",{staticClass:"header-sidebar",attrs:{slot:"header"},slot:"header"},[r("div",{staticClass:"flex justify-between w-full h-full bg-primary text-white"},[r("h5",{staticClass:"pl-4 flex self-center text-white font-light"},[e._v(e._s(e.slot.name)+" "+e._s(e.slot.last_name))]),r("feather-icon",{staticClass:"pr-4 text-white cursor-pointer",attrs:{svgClasses:"w-6 h-6",icon:"XIcon"},on:{click:function(t){return e.closeSidebar()}}})],1)]),e.slotID?r("laima-form",{ref:"visitForm",attrs:{title:"Appointment",size:"small",formScope:"step-1",formFields:e.slotFields,showErrorsInTooltip:!1,onSubmit:!1,modelsContainer:e.initModelsContainer},on:{updated:e.changedField,changed:function(t){var r,a=t[0],n=t[1];a.match("duration")&&e.changedField([(r={},r[a]=n,r)])}},scopedSlots:e._u([{key:"before-fields",fn:function(t){var a=t.errors;return[e.readonly?r("vs-alert",{staticClass:"form-alert flex warning",attrs:{"icon-pack":"feather",icon:"icon-archive"}},[r("div",{staticClass:"flex items-center"},[r("ul",[r("li",[r("h4",{staticClass:"w-full inline-flex text-black shadow-none"},[e._v(" "+e._s(e.$t("headers.archived_visit"))+" ")])]),r("li",[r("span",{staticClass:"w-full inline-flex alert-text font-normal pt-2"},[e._v("\n                                "+e._s(e.$t("headers.archived_visit_desc"))+"\n                            ")])])])])]):e._e(),a[0]?r("vs-alert",{staticClass:"form-alert flex danger",attrs:{active:"true","icon-pack":"feather",icon:"icon-alert-octagon"}},[r("div",{staticClass:"flex h-100"},[r("span",{staticClass:"alert-text font-normal"},[e._v("\n                        "+e._s(a[0])+"\n                    ")])])]):e._e()]}},{key:"beforefield",fn:function(t){var a=t.item;return["status"===a.name?r("vs-alert",{staticClass:"form-alert flex",class:e.statuses[e.slot.status].class,attrs:{active:"true","icon-pack":"feather",icon:e.statuses[e.slot.status].icon}},[r("div",{staticClass:"flex items-center"},[r("ul",[r("li",[r("h5",{staticClass:"w-full inline-flex text-black shadow-none"},[e._v(" "+e._s(e.statusHeadlines[e.slot.status])+" ")])]),r("li",[r("span",{staticClass:"w-full inline-flex alert-text font-normal text-sm pt-2",domProps:{innerHTML:e._s(e.statuses[e.slot.status].msg)}})])])])]):e._e()]}},{key:"date",fn:function(t){var a=t.item,n=t.hasErrors;t.successCallback,t.onFieldUpdated;return[r("vs-dropdown",{staticClass:"heatmap-dropdown cursor-pointer hover:underline",attrs:{"vs-custom-content":"","vs-trigger-click":""}},[r("lm-input",{attrs:{danger:n,"data-vv-as":a.label||a.name,disabled:a.disabled||!1,name:a.name,placeholder:a.placeholder||"",value:e.initModelsContainer.date.format("YYYY-MM-DD")}}),r("vs-dropdown-menu",{directives:[{name:"show",rawName:"v-show",value:!a.disabled,expression:"!item.disabled"}],staticClass:"notification-dropdown dropdown-custom",staticStyle:{"z-index":"60004"}},[r("monthly-slots-heatmap",{attrs:{date:e.initModelsContainer.date.format("YYYY-MM"),disabled:a.disabled,doctor:e.$parent.selectedDoctor.actor,minDate:new Date,set:"week"===e.$parent.currentView?"docs":"all"},on:{dateSelected:function(t){return e.changedField([{date:t}])}}})],1)],1)]}},{key:"footer",fn:function(){return[r("div")]},proxy:!0}],null,!1,2704581654)}):e._e(),r("add-edit-patient",{ref:"patient",attrs:{initialData:e.slot,readonly:!0,size:"small"}})],1)},b=[],_=r("7269"),w={components:{MonthlySlotsHeatmap:_["a"]},data:function(){return{initModelsContainer:{},overridingSchedule:null,overridingDoctor:null,oldSlot:null}},computed:{default_visit_interval:function(){var e=this.$store.getters["core/activeClinic"]();return e&&e.default_visit_interval},during:function(){var e=this.slot.during||[];return e.map((function(e){return e.format("HH:mm")})).join(" - ")},hourRange:function(){var e=this.slot.during,t=this.slot.schedule.doctor;if(e){var r=e[0].getDay()-1,a=this.$store.state.core._schedulerClosureHoursEachDoc[r].doctors[t].scheduleDuring.map((function(e){return new Date(e).format("HH")})),n=Object(o["a"])(a,2),s=n[0],i=n[1];return[parseInt(s),parseInt(i)]}return[8,18]},notifOffset:function(){return this.$parent.clinic.send_confirmation_before},readonly:function(){return this.slot.during[0]<new Date},slot:function(){return this.$store.state.core.selectedSlotDetails},slotID:function(){return this.$store.state.core.viewSlotPrompt},slotDate:function(){var e=this.slot.during||[new Date(0)];return e[0].format("DD/MM/YY")},slotFields:function(){return[{name:"status",disabled:this.readonly||"confirmed"===this.slot.status,label:this.$t("fields.confirmed"),type:"switch"},{name:"doctor",label:this.$t("fields.doctor"),disabled:this.readonly,type:"select",options:Object.values(this.$parent.docs).map((function(e){return{value:e.actor,text:e.name+" "+e.last_name}})),validators:{required:!0}},{name:"date",label:this.$t("fields.visit_date"),disabled:this.readonly,type:"date",validators:{required:!0}},{name:"startTime",label:this.$t("fields.startTime"),disabled:this.readonly,type:"time",interval:this.default_visit_interval,hourRange:[this.hourRange],validators:{required:!0}},{name:"duration",helpText:this.$t("help_texts.duration"),label:this.$t("fields.duration"),disabled:this.readonly,classes:["duration-input"],type:"fancyNumber",step:this.default_visit_interval,min:this.default_visit_interval,max:180},{name:"category",label:this.$t("fields.procedure_category"),disabled:this.readonly,type:"select",options:this.procCategories}]},statusHeadlines:function(){return{booked:this.$t("misc.visit_booked"),confirmation_pending:this.$t("misc.confirmation_pending"),confirmed:this.$t("misc.visit_confirmed")}},statuses:function(){return{booked:{icon:"icon-info",class:"primary",msg:this.$t("misc.booked_msg",{notifOffset:24*this.notifOffset})},confirmation_pending:{icon:"icon-alert-triangle",class:"warning",msg:this.$t("misc.pending_msg")},confirmed:{icon:"icon-check",class:"success",msg:this.$t("misc.confirmed_msg")}}}},methods:{changedField:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i,c,l,u,d,p,f,h,m,v,g,b,_,w,y,x,C,S,k,O,$,E,D,T,I,j,A,R,P,M,L,N,H,U,F,V,q,B,W,Y=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=Object(o["a"])(t,1),a=r[0],n=a.startTime,s=a.duration,i=a.date,c=a.category,l=a.doctor,u=a.status,document.body.click(),this.prepareShadowInterimSlot(),d=[],p={},f=Object(o["a"])(this.slot.during,2),h=f[0],m=f[1],v=this.slot.during.map((function(e){return e.clone()})),g=Object(o["a"])(v,2),b=g[0],_=g[1],w=h.format("HH:mm").split(":"),y=Object(o["a"])(w,2),x=y[0],C=y[1],S=this.slot.schedule.doctor,k=(_-b)/6e4,!i){e.next=44;break}if(this.$set(this.initModelsContainer,"date",i),O=i.format("YYYY:MM:DD").split(":"),$=Object(o["a"])(O,3),E=$[0],D=$[1],T=$[2],D=parseInt(D)-1,h.setDate(T),h.setMonth(D),h.setYear(E),h.setHours(x),h.setMinutes(C),m=h.addMinutes(k),m.setDate(T),m.setMonth(D),m.setYear(E),this.$store.commit("core/UPDATE_SLOT_DETAILS",{during:[h,m]}),p={during:[h,m]},this.$parent.currentDate=i,I={min_date:i.format("YYYY-MM-DD")},this.$store.dispatch("core/fetchSlots",{data:I,currentDate:i,bh:this.$parent.clinic.business_hours,vm:this.$parent}),T==b.getDate()){e.next=41;break}return e.next=31,this.sleep(1);case 31:j=this.$store.getters["core/docToDateToScheduleMap"][S],A=h.format("DD/MM");case 33:if(j[A]){e.next=38;break}return e.next=36,this.sleep(.1);case 36:e.next=33;break;case 38:R=j[A],this.overridingSchedule=R,this.$store.commit("core/UPDATE_SLOT_DETAILS",{schedule:{id:R,doctor:S}});case 41:d=["date",h],e.next=84;break;case 44:if(!n){e.next=55;break}this.$set(this.initModelsContainer,"startTime",n),P=n.split(":"),M=Object(o["a"])(P,2),L=M[0],N=M[1],h.setHours(L),h.setMinutes(N),m=h.addMinutes(this.initModelsContainer.duration||k),this.$store.commit("core/UPDATE_SLOT_DETAILS",{during:[h,m]}),p={during:[h,m]},d=["start",h],e.next=84;break;case 55:if(!s){e.next=63;break}this.$set(this.initModelsContainer,"duration",s),m=h.clone().addMinutes(s),this.$store.commit("core/UPDATE_SLOT_DETAILS",{during:[h,m]}),p={during:[h,m]},d=["during",(m-h)/1e3],e.next=84;break;case 63:if(!c){e.next=69;break}this.$set(this.initModelsContainer,"category",c),p={procedure_category:c},d=["category",c],e.next=84;break;case 69:if(!l){e.next=82;break}H=l,U=this.$parent.docs[H],F=this.$store.getters["core/docToDateToScheduleMap"][H],V=h.format("DD/MM"),q=F[V],this.overridingSchedule=q,this.overridingDoctor=H,this.$store.commit("core/SET_ACTIVE_DOCTOR",U),this.$store.commit("core/UPDATE_SLOT_DETAILS",{schedule:{id:q,doctor:H}}),d=["doctor",U],e.next=84;break;case 82:if(!u){e.next=84;break}return e.abrupt("return",this.$store.dispatch("core/confirmAppointment",{vm:this,slotID:this.slotID,doctorID:S}));case 84:B={id:this.slotID,start:h,end:m,class:"interim-slot",title:this.slot.name+" "+this.slot.last_name,split:parseInt(this.slot.schedule.doctor)},l&&(B.split=l),(h.getTime()!=b.getTime()||m.getTime()!=_.getTime()||c||l)&&(this.$store.commit("core/UPDATE_INTERIM_SLOT",B),this.oldSlot||(W=this.$store.state.core.schedulerSlots[S].find((function(e){return e.id===Y.slotID})),this.oldSlot=W),this.$store.commit("core/REMOVE_SCHEDULE_SLOT",[null,this.slotID]),this.overridingSchedule&&(p={during:[h,m],schedule:this.overridingSchedule},B["scheduleID"]=this.overridingSchedule),this.$store.dispatch("core/editSlot",[this.slotID,B,p,d,this]));case 87:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),closeSidebar:function(){this.oldSlot&&(this.$store.commit("core/ADD_SCHEDULER_SLOT",this.oldSlot),this.oldSlot=null),this.toggleBodyOverflow(),this.overridingSchedule=null,this.overridingDoctor=null,this.$store.commit("core/RESET_INTERIM_SLOT"),this.$store.commit("core/SET_VIEW_SLOT_PROMPT",!1)},prepareShadowInterimSlot:function(){if(!this.$store.state.core.interimEvents.length){var e=Object(o["a"])(this.slot.during,2),t=e[0],r=e[1],a={start:t,end:r,class:"interim-slot",title:this.slot.name+" "+this.slot.last_name,split:parseInt(this.slot.schedule.doctor)};this.$store.commit("core/UPDATE_INTERIM_SLOT",a)}}},mounted:function(){window.slot=this},watch:{slot:function(e){var t,r,a,n,s,i=e.during;i[0]&&(n=new Date(i[0]),t=i[1]-i[0],r=i[0],a=e.procedure_category,s=e.schedule.doctor);this.$parent.docs[s];this.initModelsContainer={category:a,date:n,status:"confirmed"===e.status,doctor:s,duration:t/6e4,startTime:r.format("HH:mm")}},slotID:function(e){var t=this;e&&window.addEventListener("keydown",(function(e){"Escape"==e.key&&t.closeSidebar()}),{once:!0})}}},y=w,x=(r("01a4"),Object(h["a"])(y,g,b,!1,null,null,null)),C=x.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"calendar-menu-wrap"},[r("div",{staticClass:"vuecal__menu justify-between vx-row shadow relative mb-6",staticStyle:{top:"-15px","max-height":"67px"}},[r("section",{staticClass:"action-buttons flex ml-4",staticStyle:{"max-height":"48px",height:"67px"}},[e.currentView.match("day|month")?e._e():r("div",{staticClass:"con-img flex mr-3"},[r("div",{staticClass:"flex calendar-mode border-2 bg-white shadow-md border-solid cursor-pointer self-center",class:e.calendarMode},[r("vs-dropdown",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.selectedDoctor.name+" "+e.selectedDoctor.last_name,expression:"`${selectedDoctor.name} ${selectedDoctor.last_name}`"}],ref:"dropdown",staticClass:"cursor-pointer ml-4",attrs:{"vs-custom-content":"","vs-trigger-click":""}},[e.selectedDoctor.avatar?r("div",{staticClass:"relative",staticStyle:{width:"48px",height:"3rem"}},[r("img",{staticClass:"m-0 rounded-full shadow-md cursor-pointer absolute z-30",attrs:{src:e.selectedDoctor.avatar,alt:"doctor-img",width:"48",height:"48"}})]):r("vs-avatar",{staticClass:"m-0 relative",staticStyle:{"font-size":"23px"},attrs:{size:"35px",color:"white",text:e.selectedDoctorInitials}}),e.availableDoctors.length>1?r("vs-dropdown-menu",{staticClass:"calendar-menu-wrap notification-dropdown dropdown-custom",staticStyle:{width:"auto","margin-left":"-5px","margin-top":"3px"}},[r("div",{staticClass:"notification-top text-center px-5 py-2 bg-primary text-white"},[r("h5",{staticClass:"text-white tracking-wider font-light py-1 px-4",staticStyle:{"letter-spacing":"0","font-size":"15px"}},[e._v(e._s(e.$t("misc.select_doctor")))])]),r("div",{staticClass:"flex"},[r("ul",{staticClass:"bordered-items w-full"},e._l(e.availableDoctors,(function(t){return r("li",{key:t.name,staticClass:"flex justify-between px-4 py-4 notification cursor-pointer doc-line-wrap",class:t.actor===e.selectedDoctor.actor&&"docLineActive",on:{click:function(r){return e.selectDoctor(t)}}},[r("div",{staticClass:"flex items-center doc-line"},[t.avatar?r("img",{key:"onlineImg",staticClass:"m-0 rounded-full shadow-md cursor-pointer relative",class:t.actor===e.selectedDoctor.actor&&"activeAvatar",attrs:{src:t.avatar,alt:"doctor-img",width:"30",height:"30"}}):r("vs-avatar",{staticClass:"m-0",class:t.actor===e.selectedDoctor.actor&&"activeAvatar",style:{"font-size":"17px"},attrs:{size:"28px",color:"#444","text-color":"white",text:""+t.name[0]+t.last_name[0]}}),r("div",{staticClass:" mx-2 ml-4",staticStyle:{"font-size":"14px"}},[e._v("\n                                                "+e._s(t.name)+" "+e._s(t.last_name)+"\n                                            ")])],1)])})),0)])]):e._e()],1),r("text-switch",{ref:"text",staticClass:"transition-colors ml-10",staticStyle:{width:"170px",background:"transparent","margin-top":"0px",left:"7px","margin-left":"-7px"},attrs:{inversed:"",size:"big",color:e.calendarSwitchColor,options:[{label:this.$t("misc.scheduler"),val:"scheduler"},{label:this.$t("misc.planner"),val:"planner"}]},model:{value:e.calendarMode,callback:function(t){e.calendarMode=t},expression:"calendarMode"}})],1)]),"scheduler"===e.calendarMode?r("section",{staticClass:"flex ml-4"},[r("scheduler-searchbar",{staticStyle:{"z-index":"50000000"},on:{on:function(t){e.$parent.searchbarOn=!0},off:function(t){e.$parent.searchbarOn=!1}}})],1):e._e()]),r("section",{staticClass:"flex",staticStyle:{"max-height":"48px"}},["scheduler"===e.calendarMode?r("section",{staticClass:"range-button flex mr-4",staticStyle:{"max-height":"46px"}},[r("vs-button",{staticClass:"border border-solid rounded-r-none",class:"month"==e.currentView&&"active-view",on:{click:function(t){return e.activeCalendar.switchView("month")}}},[e._v(e._s(e.$t("datetime.month")))]),r("vs-button",{class:["week"==e.currentView&&"active-view","day"===e.currentView&&e.penultimateDayCtrlBtnClasses||e.lastDayCtrlBtnClasses],on:{click:function(t){return e.activeCalendar.switchView("week")}}},[e._v(e._s(e.$t("datetime.week")))]),"day"===e.currentView?r("vs-button",{class:["day"==e.currentView&&"active-view","day"===e.currentView&&e.lastDayCtrlBtnClasses||e.penultimateDayCtrlBtnClasses],on:{click:function(t){return e.activeCalendar.switchView("day")}}},[e._v(e._s(e.$t("datetime.day")))]):e._e()],1):e._e(),r("vs-button",{staticClass:"ctrl-btn my-auto h-full w-16",attrs:{type:"relief","icon-pack":"feather",icon:"icon-arrow-left-circle text-3xl"},on:{click:function(t){return e.getPrevTimeFrame()}}}),r("vs-dropdown",{staticClass:"heatmap-dropdown cursor-pointer hover:underline",attrs:{"vs-custom-content":"","vs-trigger-click":""}},[e.isMounted?r("div",{staticClass:"date-display inline-grid cursor-pointer",domProps:{innerHTML:e._s(e.currentDateTitle)}}):e._e(),r("vs-dropdown-menu",{staticClass:"notification-dropdown dropdown-custom",staticStyle:{"z-index":"50001"}},[r("monthly-slots-heatmap",{attrs:{doctor:e.$parent.selectedDoctor.actor,date:e.$parent.currentDate.format("YYYY-MM"),set:"week"===e.currentView?"docs":"all"},on:{timeFrameChanged:e.updateMonthlyPicker,dateSelected:e.datepickerDateChanged}})],1)],1),r("vs-button",{staticClass:"ctrl-btn my-auto ml-2 h-full w-16",attrs:{"icon-pack":"feather",icon:"icon-arrow-right-circle text-3xl",type:"relief"},on:{click:function(t){return e.getNextTimeFrame()}}})],1)])])},k=[],O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scheduler-searchbar"},[r("div",{staticClass:"flex patient-searchbar h-full"},[r("feather-icon",{staticClass:"cursor-pointer pr-2",attrs:{icon:"SearchIcon",svgClasses:"h-5 w-5"}}),e.selectedPatient?r("div",{staticClass:"selected-patient-mask absolute h-full top-0 bg-white ml-6",staticStyle:{width:"240px","z-index":"50000"}},[r("div",{staticClass:"selected-patient flex h-full"},[r("h3",{staticClass:"self-center pl-4",staticStyle:{"font-weight":"300","font-size":"1.2rem"}},[e._v(" "+e._s(e.selectedPatient.name)+" "+e._s(e.selectedPatient.last_name))]),r("div",{staticClass:"closure absolute right-0 h-full"},[r("div",{staticClass:"flex h-full"},[r("feather-icon",{staticClass:"self-center",attrs:{icon:"XIcon",svgClasses:"w-5 h-5 hover:text-danger pointer-cursor"},on:{click:e.closeSelectedPatient}})],1)])])]):e._e(),r("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"},{name:"debounce",rawName:"v-debounce:300ms",value:e.submitPhrase,expression:"submitPhrase",arg:"300ms"}],staticClass:"border-none w-full pl-3",class:e.selectedPatient&&"opacity-0",attrs:{autocomplete:"false",type:"text",placeholder:e.$t("placeholders.patient_searchbar_prompt"),id:"patient-searchbar-input"},domProps:{value:e.query},on:{blur:e.onBlur,input:[function(t){t.target.composing||(e.query=t.target.value)},function(t){e.query&&e.query.length>=2&&e.$store.commit("core/SET_PATIENT_SEARCHBAR_LOADING",!0)}],click:function(t){return e.$emit("on")}}}),e.isLoadingPatients?r("div",{staticClass:"relative h-full",staticStyle:{width:"50px"}},[e._m(0)]):e._e()],1),e.query.length>=2&&e.searchedPatients[0]?r("div",{staticClass:"results absolute bg-white rounded-lg mt-6 shadow-md"},e._l(e.searchedPatients,(function(t){return r("div",{key:t.id,staticClass:"flex font-light p-2 cursor-pointer patient-line",on:{click:function(r){return e.selectPatient(t.id)}}},[r("feather-icon",{staticClass:"pl-1 pr-3",attrs:{icon:"UserIcon",svgClasses:"h-5 w-5"}}),r("ul",[r("li",{staticClass:"patient-name",domProps:{innerHTML:e._s(e.embolden(t.name+" "+t.last_name))}}),r("li",{staticClass:"patient-id",domProps:{innerHTML:e._s(e.embolden(t.patient_id))}})])],1)})),0):e._e()])},$=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"loading default"},[r("div",{staticClass:"effect-1 effects"}),r("div",{staticClass:"effect-2 effects"}),r("div",{staticClass:"effect-3 effects"})])}],E=(r("386d"),{data:function(){return{query:"",isActive:!1}},computed:{isDisabled:function(){return!1},isLoadingPatients:function(){return this.$store.state.core.patientSearchbarLoading},searchedPatients:function(){return this.$store.state.core.searchedPatients||[]},selectedPatient:function(){return this.$store.state.core.filteredPatient}},methods:{embolden:function(e){var t=this.query.length,r=e.toLowerCase().search(this.query.toLowerCase()),a=r+t;if(r+1){var n=e.split(" "),s="";return r&&2==n.length&&(s=n[0]),s+' <b class="text-primary">'+e.substring(r,a)+"</b>"+e.slice(a)}return e},submitPhrase:function(){var e={query:this.query};this.query&&this.query.length>=2&&this.$store.dispatch("core/findPatient",{query:e,vm:this})},onBlur:function(e){var t=this;setTimeout((function(){t.$emit("off"),t.query=""}),500)},selectPatient:function(e){var t=this.searchedPatients.find((function(t){return t.id===e})),r="Showing appointments for <b class='font-medium'>".concat(t.name," ").concat(t.last_name,"</b>");this.$store.commit("SET_GLOBAL_MESSAGE",[r,"primary"]),this.$store.dispatch("core/listSlotsByPatient",{vm:this,patient_id:e}),this.$parent.$parent.$refs.vuecal.switchView("month")},closeSelectedPatient:function(){this.$store.commit("SET_GLOBAL_MESSAGE",null),this.$store.commit("core/RESELECT_FILTERED_PATIENT"),this.$store.commit("core/RESET_SEARCHED_PATIENT_SLOTS")}}}),D=E,T=(r("8a04"),Object(h["a"])(D,O,$,!1,null,null,null)),I=T.exports,j={props:{calendar:{},currentView:{default:"week"},isMounted:{default:!1},currentDate:{},currentViewChanged:{}},data:function(){return{lastDayCtrlBtnClasses:"rounded-l-none border border-solid border-l-0",penultimateDayCtrlBtnClasses:"rounded-r-none rounded-l-none border border-solid border-l-0"}},components:{MonthlySlotsHeatmap:_["a"],SchedulerSearchbar:I},computed:{activeCalendar:function(){return"scheduler"===this.calendarMode?this.$parent.$refs.vuecal:this.$parent.$refs.planner.$refs.vuecal},calendarMode:{get:function(){return this.$store.state.core.calendarMode},set:function(e){this.$store.dispatch("core/switchCalendarMode",{mode:e,vm:this})}},calendarSwitchColor:function(){return"scheduler"===this.calendarMode?"rgba(var(--vs-primary, 1))":"rgba(var(--vs-success, 1))"},clinic:function(){return this.$store.getters["core/activeClinic"]()},currentDateTitle:function(){var e,t=this.$i18n.locale;this.currentViewChanged;try{e=this.activeCalendar.view}catch(m){return"MM/YYYY"}if("month"===e.id){var r=e.startDate.toLocaleString(t,{month:"long"});return r+" "+e.startDate.format("YYYY")}if("week"===e.id){var a=e.startDate.toLocaleString(t,{month:"short"}),n=e,s=n.startDate,i=n.endDate,c=i.format("MM");i=i.clone().subtractDays(1);var l=[s,i].map((function(e){return e.format("DD")})),u=Object(o["a"])(l,2),d=u[0],p=u[1];return s.format("MM")!=c?(c=i.toLocaleString(t,{month:"short"}),"".concat(d," ").concat(a," - ").concat(p," ").concat(c," <br> ").concat(e.startDate.format("YYYY"))):"".concat(d,"-").concat(p," ").concat(a," <br> ").concat(e.startDate.format("YYYY"))}if("day"===e.id){var f=this.$parent.currentDate,h=f.toLocaleString(t,{weekday:"long"});return h+" "+f.format("DD/MM/YY")}},availableDoctors:function(){return Object.values(this.$store.state.core.docs)},selectedDoctor:{get:function(){var e=this.$store.state.core;return e.calendarActiveDoctor||e.docs[Object.keys(e.schedulerSlots)[0]]||e.docs[Object.keys(e.docs)[0]]||{}},set:function(e){this.$store.commit("core/SET_ACTIVE_DOCTOR",e)}},selectedDoctorName:function(){return"".concat(this.selectedDoctor.name," ").concat(this.selectedDoctor.last_name)},selectedDoctorInitials:function(){try{return"".concat(this.selectedDoctor.name[0]).concat(this.selectedDoctor.last_name[0])}catch(e){return""}}},methods:{datepickerDateChanged:function(e){this.$parent.currentDate=e;var t={min_date:e.toJSON().split("T")[0]};this.$store.dispatch("core/fetchSlots",{data:t,currentDate:e,bh:this.$parent.clinic.business_hours,vm:this.$parent})},getNextTimeFrame:function(){var e;"day"===this.currentView?(e=this.$parent.currentDate.clone().addDays(1),this.$parent.currentDate=e):(this.activeCalendar.next(),e=this.activeCalendar.view.endDate);var t={min_date:e.toJSON().split("T")[0]};"month"!==this.currentView&&this.$store.dispatch("core/fetchSlots",{vm:this.$parent,data:t,bh:this.$parent.clinic.business_hours,currentDate:this.currentDate})},getPrevTimeFrame:function(){var e;"day"===this.currentView?(e=this.$parent.currentDate.clone().addDays(-1),this.$parent.currentDate=e):(this.activeCalendar.previous(),e=this.activeCalendar.view.endDate);var t={min_date:e.toJSON().split("T")[0]};"month"!==this.currentView&&this.$store.dispatch("core/fetchSlots",{vm:this.$parent,data:t,bh:this.$parent.clinic.business_hours,currentDate:this.currentDate})},selectDoctor:function(e){this.selectedDoctor=e,document.body.click()},updateMonthlyPicker:function(e){var t=e.endDate;this.$store.dispatch("core/fetchMonthlyHeatmap",[t,this])}}},A=j,R=(r("211f"),Object(h["a"])(A,S,k,!1,null,null,null)),P=R.exports,M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"planner-wrap"},[r("vue-cal",{ref:"vuecal",attrs:{activeView:"week",hideViewSelector:"","hide-title-bar":"","show-week-numbers":"","today-button":"","week-number-cell":"","cell-click-hold":!1,dblclickToNavigate:!1,"editable-events":{title:!1,drag:!1,resize:!0,delete:!1,create:!1},"disable-views":["years","year","day","month"],events:e.slots,locale:e.$i18n.locale,"min-event-width":100,"hide-weekdays":[7],"snap-to-time":e.roundTo,"time-from":e.minHour,"time-to":e.maxHour,selectedDate:e.currentDate},on:{"event-duration-change":e.onDurationChange,"view-change":e.$parent.calendarChangedTimeframe},scopedSlots:e._u([{key:"event",fn:function(t){var a=t.event;return["schedule"===a.class?r("div",{staticClass:"h-full planner-event-wrap",staticStyle:{"z-index":"11"},attrs:{"data-schedule-id":a.id}},[r("time-marker",{ref:"timemarker-"+a.id,staticClass:"relative w-full h-full",attrs:{event:a,roundTo:e.roundTo},on:{eventcreated:e.addNewBreak}}),r("div",{class:a.endTimeMinutes-a.startTimeMinutes<=30&&"is-brief",attrs:{id:"slot-"+a.id}},[r("div",{staticClass:"vuecal__event-title py-1"},[e._v("\n                        "+e._s(e.$t("headers.available"))+"\n                        "),r("span",{staticClass:"font-normal"},[e._v("\n                            ("+e._s(new Date(a.start).formatTime("HH:mm"))+"- "+e._s(new Date(a.end).formatTime("HH:mm"))+")\n                        ")])]),new Date(a.start)>=e.today?[r("div",{staticClass:"schedule-control-btns right-0 top-0 absolute"},[r("div",{staticClass:"flex",staticStyle:{margin:"5px 2px 0 0"}},[r("span",{staticClass:"control-btn add-break",staticStyle:{"z-index":"12",opacity:"0"},on:{click:function(t){e.startTimemarker("timemarker-"+a.id,e.$t("buttons.add_new_break"))}}},[r("feather-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("buttons.add_new_break"),classes:"text-sm"},expression:"{content: $t('buttons.add_new_break'), classes: 'text-sm' }"}],staticClass:"text-primary",staticStyle:{height:"inherit",bottom:"3px"},attrs:{icon:"PlusCircleIcon",svgClasses:"w-6"}})],1),r("span",{staticClass:"control-btn delete-schedule ",staticStyle:{"z-index":"12",opacity:"0"},on:{click:function(t){return e.removeScheduleOpenConfirm(a)}}},[r("feather-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("buttons.remove_schedule"),classes:"text-sm"},expression:"{content: $t('buttons.remove_schedule'), classes: 'text-sm' }"}],staticClass:"text-danger",staticStyle:{height:"inherit",bottom:"3px"},attrs:{icon:"XCircleIcon",svgClasses:"w-6"}})],1)])])]:e._e()],2)],1):"appointment-shadow"===a.class?r("div",{staticClass:"w-full"}):"lunch"===a.class?r("div",{staticClass:"text-left w-full pl-1"},[r("div",{staticClass:"vuecal__event-time"},[new Date(a.start)>=e.today?r("span",{staticClass:"control-btn absolute right-0 mt-1",staticStyle:{"z-index":"12",opacity:"0"},on:{click:function(t){return e.removeBreak(a)}}},[r("feather-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("buttons.remove_break"),classes:"text-sm"},expression:"{content: $t('buttons.remove_break'), classes: 'text-sm'}"}],staticClass:"text-danger",staticStyle:{height:"inherit",bottom:"3px"},attrs:{icon:"XCircleIcon",svgClasses:"w-6"}})],1):e._e(),e._v("\n                    Break\n                    "),r("span",{staticClass:"lunch-details",staticStyle:{opacity:"0"}},[e._v("("+e._s(new Date(a.start).formatTime("HH:mm"))+" - "+e._s(new Date(a.end).formatTime("HH:mm"))+")")])])]):"closed"===a.class?r("div",[r("div",{staticClass:"vuecal__event-title"},[e._v(e._s(e.$t("headers.clinic_closed")))])]):a.class.match("closed-morning|closed-evening")?r("div",[r("div",{staticClass:"vuecal__event-time"},["closed-morning"===a.class?[r("span",{staticClass:"font-medium"},[e._v(e._s(e.$t("headers.clinic_openes_at")))]),r("span",{staticClass:"pl-1"},[e._v(e._s(new Date(a.end).formatTime("HH:mm")))])]:[r("span",{staticClass:"font-medium"},[e._v(e._s(e.$t("headers.clinic_closes_at")))]),r("span",{staticClass:"pl-1"},[e._v(e._s(new Date(a.start).formatTime("HH:mm")))])]],2)]):e._e()]}},{key:"cell-content",fn:function(t){var a=t.cell,n=(t.view,t.events);return[e.$parent.daysClosed.includes(a.specialHours.day-1)?r("div",[r("div",{staticClass:"closed w-full h-full absolute"},[r("span",[e._v(e._s(e.$t("headers.clinic_closed")))])])]):"planner"!==e.calendarMode||n.find((function(e){return"schedule"===e.class}))?e._e():r("div",{staticClass:"vuecal__no-event no-schedule h-full flex"},[r("div",{staticClass:"h-full w-full"},[r("time-marker",{ref:"schedule-tm-"+a.specialHours.day,staticClass:"relative w-full h-full",attrs:{event:e.viewToEvent(a),roundTo:e.roundTo},on:{closed:function(t){e.addingScheduleToDay=-1},eventcreated:e.addNewSchedule}}),e.addingScheduleToDay!=a.specialHours.day?r("div",{staticClass:"flex justify-center h-full"},[r("div",{staticClass:"inline-block self-center "},[r("div",{staticClass:"flex flex-col"},[r("span",{staticClass:"text-xl missing-schedule mb-6 text-dark"},[e._v(e._s(e.$t("headers.no_schedules")))]),r("div",[r("vs-button",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.$t("headers.add_schedule"),expression:"$t('headers.add_schedule')",modifiers:{bottom:!0}}],staticClass:"inline-block cursor-pointer",staticStyle:{"z-index":"14"},attrs:{color:"success","icon-pack":"feather",icon:"icon-plus",size:"large",type:"border",disabled:n[0]&&new Date(n[0].start)<e.today},on:{click:function(t){return e.startTimemarkerForSchedule(a)}}})],1)])])]):e._e()],1)])]}}])})],1)},L=[],N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticStyle:{height:"inherit","z-index":"110",width:"inherit"},attrs:{id:"s-"+e.event.id}},[r("div",{staticClass:"time-mark absolute bg-dark",staticStyle:{width:"inherit"},attrs:{id:"line-"+e.event.id}},[r("span",{staticClass:"absolute left-0 text-dark",staticStyle:{top:"-16px"}},[r("small",[e._v(e._s(e.text))])]),r("div",{staticClass:"w-full",staticStyle:{height:"15px",cursor:"copy"}},[r("span",{staticClass:"current-clock text-black"},[e._v(e._s((e.timemark||e.event.start).format("HH:mm")))])])])])},H=[],U={props:["event","roundTo"],data:function(){return{active:!1,timemark:null,text:"",scrollBias:0}},mounted:function(){this.$emit("mounted")},methods:{mouseMoveTimemark:function(e,t,r,a){var n=this,s=this;return function(i){var o=i.clientY-a+s.scrollBias;e.style.top="".concat(o,"px");var c=Math.round(o*r),l=c%n.roundTo;n.timemark=t.addMinutes(c-l)}},startTimemarker:function(e){var t=this;this.active=!0,this.text=e;var r=this.event,a=document.querySelector("#line-".concat(r.id)),n=document.querySelector("#s-".concat(r.id)).parentElement,s=n.id||Math.random().toString(36).slice(2);n.id||(n.id=s);var i=n.getBoundingClientRect().top,o=(r.end-r.start)/6e4,c=o/n.offsetHeight,l=this.mouseMoveTimemark(a,r.start.clone(),c,i),u=this,d=function(){u.scrollBias=window.scrollY};window.addEventListener("scroll",d);var p=function(){t.$emit("eventcreated",[r,t.timemark]),t.active=!1,t.scrollBias=0,t.timemark=null,n.removeEventListener("mousemove",l),window.removeEventListener("scroll",d)};n.addEventListener("mousemove",l,{passive:!0,capture:!0}),document.body.addEventListener("click",(function e(t){t.path.find((function(e){return e.id==s}))||(document.body.removeEventListener("click",e),u.timemark=null,u.active=!1,u.scrollBias=0,window.removeEventListener("scroll",d),n.removeEventListener("click",p),n.removeEventListener("mousemove",l))})),setTimeout((function(){n.addEventListener("click",p,{once:!0})}),1e3)}},watch:{active:function(e){e||this.$emit("closed")}}},F=U,V=Object(h["a"])(F,N,H,!1,null,null,null),q=V.exports,B=(r("6486"),{components:{ScheduleHeader:P,TimeMarker:q},data:function(){return{today:new Date,eventCreationId:0,timemark:null,roundTo:15,breakDefaultDuration:30,scheduleDefaultDuration:300,addingScheduleToDay:-1}},computed:{calendarMode:function(){return this.$store.state.core.calendarMode},currentDate:function(){return this.$parent.currentDate},clinic:function(){return this.$store.getters["core/activeClinic"]()},slots:function(){var e=this.selectedDoctor.actor;return Object(i["a"])(this.$store.getters["core/allPlannerSlotsByDoctorPlannerSlots"](e))},selectedDoctor:function(){var e=this.$store.state.core;return e.calendarActiveDoctor||e.docs[Object.keys(e.schedulerSlots)[0]]||e.docs[Object.keys(e.docs)[0]]||{}},minHour:function(){return this.$store.getters["core/activeClinicsTimeLimits"].min[1]},maxHour:function(){return this.$store.getters["core/activeClinicsTimeLimits"].max[1]}},methods:{emitSchedulerUpdate:function(){var e=this;this.$store.dispatch("core/recalculateOutliers",this.selectedDoctor.actor),setTimeout((function(){e.$parent.limsChanged++}),200)},viewToEvent:function(e){var t=e.specialHours.day,r=e.startDate.clone(),a=[r,r.clone()],n=a[0],s=a[1],i=this.$store.getters["core/activeClinicsTimeLimits"].min[0].split(":"),c=Object(o["a"])(i,2),l=c[0],u=c[1],d=this.$store.getters["core/activeClinicsTimeLimits"].max[0].split(":"),p=Object(o["a"])(d,2),f=p[0],h=p[1];return n.setHours(l),n.setMinutes(u),s.setHours(f),s.setMinutes(h),{start:n,end:s,id:t,doctorID:this.selectedDoctor.actor}},removeScheduleOpenConfirm:function(e){var t=e.id,r=this.$store.state.core.schedulerSlots[this.selectedDoctor.actor]||[],a=r.filter((function(e){return e.scheduleID==t})).length,n=this.$t("misc.delete_schedule_prompt");a&&(n+=this.$t("misc.delete_schedule_confirmation",{visitsCount:a})),this.$vs.dialog({text:n,acceptText:this.$t("buttons.accept"),cancelText:this.$t("buttons.cancel"),type:"confirm",color:"danger",title:this.$t("headers.delete_schedule"),accept:this.acceptAlert(e,a)})},acceptAlert:function(e,t){var r=this;return function(){r.$store.dispatch("core/removeSchedule",[e,r,t])}},onDurationChange:function(e){var t=e.event.class;"lunch"===t?this.$store.dispatch("core/resizeBreak",[e,this]):"schedule"===t&&this.$store.dispatch("core/resizeSchedule",[e,this])},addNewBreak:function(e){var t=Object(o["a"])(e,2),r=t[0],a=t[1];this.$store.dispatch("core/createBreak",[r,a,this.breakDefaultDuration,this])},addNewSchedule:function(e){var t=Object(o["a"])(e,2),r=t[0],a=t[1];this.$store.dispatch("core/createSchedule",[r,a,this.scheduleDefaultDuration,this])},startTimemarker:function(e,t){var r=this.$refs[e];r.startTimemarker(t)},startTimemarkerForSchedule:function(e){var t=e.specialHours.day,r="schedule-tm-".concat(t);this.addingScheduleToDay=t,this.startTimemarker(r,this.$t("headers.add_schedule"))},removeBreak:function(e){this.$store.dispatch("core/removeBreak",[e,this])}},mounted:function(){window.plan=this}}),W=B,Y=(r("3336"),Object(h["a"])(W,M,L,!1,null,null,null)),z=Y.exports,G=(r("55dd"),{addOutliers:function(e){var t="week"===e.currentView,r=e.$store.state.core._currentScheduleLims,a=e.selectedDoctor.actor;if(!r)return[];var n=t?[a]:Object.values(e.docs).map((function(e){return e.actor}));return n?n.flatMap((function(a){var n=e.$store.getters["core/scheduleDurationsPerDoctor"][a],s=r[a].flatMap((function(e){return e.split(":")})),i=Object(o["a"])(s,4),c=i[0],l=i[1],u=i[2],d=i[3];if(!t){var p=e.currentDate.format("DD/MM");n=n.filter((function(e){var t=Object(o["a"])(e,2),r=(t[0],Object(o["a"])(t[1],2)),a=r[0];r[1];return a.format("DD/MM")==p}));var f=Object.values(r).map((function(e){return e[0]})).sort()[0].split(":"),h=Object(o["a"])(f,2);c=h[0],l=h[1];var m=Object.values(r).map((function(e){return e[1]})).sort().reverse()[0].split(":"),v=Object(o["a"])(m,2);u=v[0],d=v[1]}return n.flatMap((function(e){var t=Object(o["a"])(e,2),r=t[0],n=Object(o["a"])(t[1],2),s=n[0],i=n[1],p=s.clone(),f=i.clone(),h=a;p.setHours(c),p.setMinutes(l),f.setHours(u),f.setMinutes(d);var m={split:h,scheduleID:r,background:!0,class:"closed-morning",start:p,end:s},v={split:h,scheduleID:r,background:!0,class:"closed-evening",start:i,end:f};return[m,v]}))})):[]}});function K(e,t){var r=+e+(void 0===t?.5:t/2);return r-r%(void 0===t?1:+t)}var J=["day","week","month"],X={components:{AddNewSlot:v,SlotDetails:C,ScheduleHeader:P,SchedulePlanner:z},beforeDestroy:function(){this.$store.commit("SET_GLOBAL_MESSAGE",null),this.$store.commit("core/RESELECT_FILTERED_PATIENT"),this.$store.commit("core/RESET_INTERIM_PATIENT"),this.$store.commit("core/RESET_SEARCHED_PATIENT_SLOTS")},mounted:function(){var e=this;this.$nextTick((function(){e.$store.commit("UPDATE_VERTICAL_NAV_MENU_ITEMS_MIN",!0)})),this.isMounted=!0,window.cal=this;var t=this.$store.state.core.interimPatient;if(t){var r=t.name+" "+t.last_name,a="Adding new appointment for <b class='font-medium'>".concat(r,"</b>");this.$store.commit("SET_GLOBAL_MESSAGE",[a,"primary"])}var n=this.$router.currentRoute.query,s=n.view,i=n.date&&new Date(parseInt(n.date));i&&this.$nextTick((function(){e.currentDate=i;var t={min_date:i.toJSON().split("T")[0]};e.$store.dispatch("core/fetchSlots",{data:t,view:e.currentView,vm:e,bh:e.clinic.business_hours,currentDate:i});var r=e.clinic.business_hours;e.$store.commit("core/SET_BUSINESS_HOURS",[r,e.$refs.vuecal.view.startDate])})),s&&J.includes(s)&&this.$nextTick((function(){e.$refs.vuecal.switchView(s)})),window.location.href=window.location.href.split("?")[0],this.$watch("this.$refs.vuecal.view.startDate",(function(){e.currentViewChanged++,e.$store.dispatch("core/fetchSlots",{view:e.currentView,vm:e,bh:e.clinic.business_hours,currentDate:e.currentDate});var t=e.clinic.business_hours;e.$store.commit("core/SET_BUSINESS_HOURS",[t,e.$refs.vuecal.view.startDate])}),{immediate:!0})},data:function(){return{searchbarOn:!1,outlierEvents:[],currentDate:new Date,currentViewChanged:0,isMounted:!1,limsChanged:0,newSlotHourStart:null,newSlotHourEnd:null,roundTo:15,rawSelectedDoctor:null,splitSelectedDoctor:null,scheduleID:null,deleteEventFunction:function(){},selectedSlotID:null,dailyMinHour:"08:00",dailyMaxHour:"18:00",lastEventDBClick:null}},computed:{activeCalendar:function(){return this.currentViewChanged,"scheduler"===this.calendarMode?this.$refs.vuecal:this.$refs.planner&&this.$refs.planner.$refs.cal},allSlots:function(){return Object.values(this.$store.state.core.schedulerSlots).flatMap((function(e){return e}))},calendarMode:function(){return this.$store.state.core.calendarMode},clinic:function(){return this.$store.getters["core/activeClinic"]()||{}},currentScheduleMeta:function(){try{return this.$store.state.core.scheduleMetaMap[this.selectedDoctor.actor]||[]}catch(e){return[]}},currentView:function(e){this.currentViewChanged;try{e=this.$refs.vuecal.view.id}catch(t){e="week"}return"day"===e&&this.adjustDailyView(),e},daysClosed:function(){var e=this.clinic.business_hours;return Array.from("x".repeat(6),(function(e,t){return t})).filter((function(t){return!e[t]}))},default_visit_interval:function(){return this.clinic.default_visit_interval},docs:function(){return this.$store.state.core.docs},mainClasses:function(){return{compressed:"day"===this.currentView&&this.sidebarOn,singleDoc:1===Object.keys(this.docs).length}},minHour:function(e){this.limsChanged;try{e="day"===this.currentView?this.dailyMinHour:this.$store.state.core._currentScheduleLims[this.selectedDoctor.actor][0]}catch(s){e="08:00"}var t=e.split(":"),r=Object(o["a"])(t,2),a=r[0],n=r[1];return 60*parseInt(a)+parseInt(n)},maxHour:function(e){this.limsChanged;try{e="day"===this.currentView?this.dailyMaxHour:this.$store.state.core._currentScheduleLims[this.selectedDoctor.actor][1]}catch(s){e="18:00"}var t=e.split(":"),r=Object(o["a"])(t,2),a=r[0],n=r[1];return 60*parseInt(a)+parseInt(n)},noScheduleDisplayText:function(){return this.$t("headers.no_schedules")},scheduleLoading:function(){return this.$store.state.core.scheduleLoading},selectedDoctor:function(){var e=this.$store.state.core;return e.calendarActiveDoctor||e.docs[Object.keys(e.schedulerSlots)[0]]||e.docs[Object.keys(e.docs)[0]]||{}},sidebarOn:function(){return this.$store.state.core.addSlotPrompt||this.$store.state.core.viewSlotPrompt},allEvents:function(){return[].concat(Object(i["a"])(this.mainEvents),Object(i["a"])(this.outlierEvents))},monthlyEvens:function(){return this.$store.state.core.searchedPatientSlots},mainEvents:function(){if("week"===this.currentView){var e=this.selectedDoctor.actor;return this.$store.getters["core/allSchedulerSlotsByDoctor"](e,this)}if("day"===this.currentView){var t=this.$store.getters["core/aggregateAllSchedulerEvents"](this.currentDate,this);return t}},splitDays:function(){return"day"===this.currentView?Object.entries(this.$store.state.core.docs).map((function(e,t){var r=Object(o["a"])(e,2),a=r[0],n=r[1],s=[n.name,n.last_name].join(" ");return{index:t,id:parseInt(a),class:"doctor-split",label:s}})):[]},statusMap:function(){return{confirmation_pending:this.$t("misc.visit_pending"),confirmed:this.$t("misc.visit_confirmed"),booked:this.$t("misc.visit_booked")}}},methods:{addNewEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("month"!==this.currentView){var a=new Date,n=Math.round(a.getTime()/1e3);if(this.lastEventDBClick!=n&&this.lastEventDBClick-1!=n&&this.lastEventDBClick+1!=n){if(e<a)return this.$store.commit("core/RESET_INTERIM_SLOT"),this.notifyError(this.$t("notifs.no_visits_in_past"));var s=this.selectedDoctor.actor;"day"!==this.currentView||e instanceof Date?r&&(s=r):(s=e.split,e=e.date),this.splitSelectedDoctor=s;var i=parseInt(e.format("HH")),o=K(e.format("mm"),15);60==o&&(i++,o="00"),this.newSlotHourStart=new Date(e.getFullYear(),e.getMonth(),e.getDate(),i,o);var c=this.newSlotHourStart.format("MM-DD"),l=t||this.newSlotHourStart.addMinutes(this.default_visit_interval);this.newSlotHourEnd=l;var u=this.newSlotHourStart.getTime(),d=l.getTime(),p=this.allEvents.filter((function(e){var t=e.start,r=e.end;return t instanceof Date&&c===t.format("MM-DD")&&t.getTime()!=r.getTime()})),f=p.find((function(e){if(s!=e.doctorID)return!1;var t=e.start,r=e.end;return t=t.getTime(),r=r.getTime(),t<u&&r>u||t<d&&r>d||t>u&&r<d}));if(f)return this.deleteEventFunction(),this.notifyError(this.$t("notifs.no_time_new_visit"));var h=this.clinic.office_count,m=this.allEvents.reduce((function(e,t){if(s==t.doctorID||"main"!=t.class)return e;var r=t.start,a=t.end;r=r.getTime(),a=a.getTime();var n=r<=u&&a>u||r<d&&a>=d||r>=u&&a<=d;return n+e}),0);if(m>=h)return this.deleteEventFunction(),this.notifyError(this.$t("overlapMessages.noOffices"));var v=this.newSlotHourStart.getDay()-1;this.scheduleID=this.$store.state.core._schedulerClosureHoursEachDoc[v].doctors[s].scheduleID,this.$store.commit("core/SET_ADD_SLOT_PROMPT",!0),this.toggleBodyOverflow("hidden");var g={start:this.newSlotHourStart,end:l,class:"interim-slot",title:"New Appointment",split:parseInt(s)};this.$store.commit("core/SET_INTERIM_SLOT",g)}}},adjustDailyView:function(){for(var e=this,t=this.$store.state.core.scheduleMetaMap,r=function(){var r=n[a];t[r]||setTimeout((function(){var t=document.querySelector('.vuecal__bg .vuecal__cell-content[data-split="'.concat(r,'"]'));t&&(t.dataset["displaytext"]=e.noScheduleDisplayText,t.classList.add("no-schedule"))}),200)},a=0,n=Object.keys(this.docs);a<n.length;a++)r()},calendarChangedTimeframe:function(e){if("month"!==this.currentView){("week"===this.currentView||"day"===this.currentView&&this.currentDate.addDays(-1)==e.startDate||this.currentDate.addDays(1)==e.startDate)&&(this.currentDate=e.startDate.clone());var t=this.clinic.business_hours;this.$store.commit("core/SET_BUSINESS_HOURS",[t,this.currentDate])}},cancelAppointment:function(e){var t=this;return function(){t.$store.dispatch("core/cancelAppointment",[e,t])}},dbEventClick:function(){this.addNewEvent.call(this,arguments)},dragCreateEvent:function(e){if("month"!==this.currentView)return"day"===this.currentView?this.addNewEvent(e.start,e.end,e.split):void this.addNewEvent(e.start,e.end)},getDocsName:function(e){return e.name+" "+e.last_name},showSlotDetails:function(e){var t=e.start.clone();this.currentDate=t,this.$refs.vuecal.switchView("day",t),this.$store.dispatch("core/viewSlotDetails",[e.id,this])},openCancelAppointmentPrompt:function(e){this.$vs.dialog({text:this.$t("notifs.prompt_cancel_visit"),acceptText:this.$t("buttons.accept"),cancelText:this.$t("buttons.cancel"),type:"confirm",color:"danger",title:this.$t("notifs.visit_cancel_cta"),accept:this.cancelAppointment(e)})},onDurationChange:function(e){"month"!==this.currentView&&this.$store.dispatch("core/resizeSlot",[e,this])},onEventDBClick:function(e){this.lastEventDBClick=Math.round((new Date).getTime()/1e3)},onGenericEventCreate:function(e,t){return e.class="interim-slot",e.title=this.$t("notifs.new_visit_cta"),this.deleteEventFunction=t,e},onSlotMoved:function(e){"month"!==this.currentView&&this.$store.dispatch("core/dragSlot",[e,this])},selectDay:function(e){var t=e.date.clone();this.currentDate=t,this.$refs.vuecal.switchView("day",t)},selectDayFromMonthly:function(e){var t=e.start;this.currentDate=t;var r={min_date:t.toJSON().split("T")[0]};this.$store.dispatch("core/fetchSlots",{data:r,view:this.currentView,vm:this,bh:this.clinic.business_hours,currentDate:t}),this.$refs.vuecal.switchView("day",t)},slotDynClass:function(e){var t=[e.status],r=e.endTimeMinutes-e.startTimeMinutes;return r<=15&&t.push("is-brief"),r<=30&&t.push("is-half-hour"),t}},watch:{mainEvents:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.sleep(.5);case 2:if(this.outlierEvents=G.addOutliers(this),"day"!==this.currentView){e.next=14;break}t=this.currentDate.format("DD/MM"),r=this.$store.getters["core/scheduleDurationsPerDate"][t];case 6:if(r){e.next=12;break}return e.next=9,this.sleep(.1);case 9:r=this.$store.getters["core/scheduleDurationsPerDate"][t],e.next=6;break;case 12:this.dailyMinHour=r[0],this.dailyMaxHour=r[1];case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Q=X,Z=(r("eb2a"),Object(h["a"])(Q,a,n,!1,null,null,null));t["default"]=Z.exports},edb4:function(e,t,r){},ee53:function(e,t,r){"use strict";r("6762"),r("a481"),r("386d");t["a"]={getColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(/^[#]/.test(e)){var a=this.hexToRgb(e);e=1==t?"rgb(".concat(a.r,",").concat(a.g,",").concat(a.b,")"):"rgba(".concat(a.r,",").concat(a.g,",").concat(a.b,",").concat(t,")")}else/^rgba/.test(e)?-1!=e.search(/.([0-9]\))$/)||r||(e=e.replace(/.?([0-9]\))$/,"".concat(t,")"))):/^(rgb)/.test(e)&&1!=t&&(e=e.replace(/^(rgb)/,"rgba"),e=e.replace(/\)$/,",".concat(t,")")));return e},isColor:function(e){var t=["primary","secondary","success","danger","warning","dark","light"];return t.includes(e)}}},f135:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"layout--main main-vertical",class:[e.navbarClasses,e.footerClasses,{"no-scroll":e.isAppPage}]},[r("v-nav-menu",{attrs:{navMenuItems:e.navMenuItems,title:"Laima.app",parent:".layout--main"}}),r("div",{class:[e.contentAreaClass,{"show-overlay":e.bodyOverlay}],attrs:{id:"content-area"}},[r("div",{attrs:{id:"content-overlay"}}),r("the-navbar-vertical",{class:[{"text-white":e.isNavbarDark&&!e.isThemeDark},{"text-base":!e.isNavbarDark&&e.isThemeDark}],attrs:{navbarColor:e.navbarColor}}),r("div",{staticClass:"content-wrapper"},[r("div",{staticClass:"router-view"},[r("div",{staticClass:"router-content"},[r("transition",{attrs:{name:e.routerTransition}},[e.$route.meta.breadcrumb||e.$route.meta.pageTitle?r("div",{staticClass:"router-header flex flex-wrap items-center mb-6"},[r("div",{staticClass:"content-area__heading",class:{"pr-4 border-0 md:border-r border-solid border-grey-light":e.$route.meta.breadcrumb}},[r("h2",{staticClass:"mb-1"},[e._v(e._s(e.routeTitle))])]),e.$route.meta.breadcrumb?r("vx-breadcrumb",{staticClass:"ml-4 md:block hidden",attrs:{route:e.$route,isRTL:e.$vs.rtl}}):e._e()],1):e._e()]),r("div",{staticClass:"content-area__content"},[e.hideScrollToTop?e._e():r("back-to-top",{attrs:{bottom:"5%",right:e.$vs.rtl?"calc(100% - 2.2rem - 38px)":"30px",visibleoffset:"500"}},[r("vs-button",{staticClass:"shadow-lg btn-back-to-top",attrs:{"icon-pack":"feather",icon:"icon-arrow-up"}})],1),r("transition",{attrs:{name:e.routerTransition,mode:"out-in"}},[r("router-view",{on:{changeRouteTitle:e.changeRouteTitle,setAppClasses:function(t){return e.$emit("setAppClasses",t)}}})],1)],1)],1)])]),r("the-footer"),r("global-alerts")],1)],1)},n=[],s=r("6afc"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"alerts-container"},e._l(e.globalAlerts,(function(t,a){return r("vs-alert",{key:a,attrs:{"icon-pack":"feather",color:e.colors[t.level],icon:e.icons[t.level]}},[r("div",{domProps:{innerHTML:e._s(t.content)}})])})),1)},o=[],c={computed:{globalAlerts:function(){return this.$store.state.globalAlerts}},data:function(){return{colors:{critical:"danger",danger:"icon-alert-octagon",error:"danger",info:"dark",ok:"success",success:"success",warn:"warning",warning:"warning"},icons:{critical:"icon-alert-octagon",danger:"icon-alert-octagon",error:"icon-alert-octagon",info:"icon-info",ok:"icon-info",success:"icon-info",warn:"icon-alert-triangle",warning:"icon-alert-triangle"}}},watch:{"$store.state.globalAlerts":function(e){}}},l=c,u=(r("4fa0"),r("2877")),d=Object(u["a"])(l,i,o,!1,null,null,null),p=d.exports,f=[{url:"/",name:"Home",slug:"home",icon:"HomeIcon",i18n:"menu.home"},{url:"/scheduler/",roles:["Owner","Scheduling","Operator"],slug:"page-scheduler",name:"Scheduler",icon:"CalendarIcon",i18n:"menu.scheduler"},{url:"/settings/user-data/",slug:"user-data",name:"Settings",icon:"SettingsIcon",i18n:"menu.settings"},{header:"Administration",icon:"UserIcon",i18n:"menu.admin",items:[{url:"/settings/staff/",roles:["Owner"],slug:"staff-settings",name:"Staff",icon:"UsersIcon",i18n:"menu.staff"},{url:"/settings/clinic/",roles:["Owner"],slug:"clinic-settings",name:"Clinic",icon:"HeartIcon",i18n:"menu.clinic"}]},{url:"/patients/list",roles:["Owner","Scheduling","Operator"],slug:"page-patients",name:"Patients",icon:"UsersIcon",i18n:"menu.patients"},{url:"/todo/",roles:["Owner","Scheduling","Operator"],slug:"page-todo",name:"Task List",icon:"CheckSquareIcon",i18n:"menu.taskList"},{url:"/sms/",roles:["Owner","Scheduling"],slug:"page-sms",name:"Sms",icon:"MessageSquareIcon",i18n:"menu.sms"},{header:"Finance",icon:"UserIcon",i18n:"menu.finance",items:[{url:"/invoice-list/",roles:["Owner","Scheduling"],slug:"page-invoice",name:"Invoices",icon:"CreditCardIcon",i18n:"menu.invoices"},{url:"/invoice-cost/",roles:["Owner","Scheduling"],slug:"page-invoice",name:"Add cost",icon:"FileMinusIcon",i18n:"menu.addCost"},{url:"/stock/list",roles:["Owner","Scheduling","Operator"],slug:"page-stock-list",name:"Stock",icon:"ArchiveIcon",i18n:"menu.stock"}]},{header:"Appointment",icon:"UserIcon",i18n:"menu.visit",items:[{url:null,roles:["Owner","Scheduling","Operator"],slug:"page-appointment",name:"Appointment",icon:"ActivityIcon",i18n:"menu.visit",submenu:[{url:"/Appointment/add",roles:["Owner","Scheduling","Operator"],slug:"page-appointment-add",name:"New Appointment",icon:"CreditCardIcon",i18n:"menu.appointmentAdd"},{url:"/invoices/list",roles:["Owner","Scheduling","Operator"],slug:"page-invoice-add",name:"View Appointment",icon:"CreditCardIcon",i18n:"menu.appointmentView"}]},{url:null,roles:["Owner","Scheduling","Operator"],slug:"page-consent",name:"Patients consents",icon:"Edit3Icon",i18n:"menu.patcon",submenu:[{url:"/consents/add",roles:["Owner","Scheduling","Operator"],slug:"page-consent-add",name:"New consent",icon:"CreditCardIcon",i18n:"menu.consentAdd"},{url:"/consents/remove",roles:["Owner","Scheduling","Operator"],slug:"page-sick-list",name:"Remove consent",icon:"CreditCardIcon",i18n:"menu.consentRemove"}]}]},{header:"Help Desk",icon:"UserIcon",i18n:"menu.help_desk",items:[{url:"/knowledgebase/",roles:["Owner","Scheduling"],slug:"page-knowledgebase",name:"Knowledge Base",icon:"HelpCircleIcon",i18n:"menu.knowledgebase"},{url:"/support",roles:["Owner","Scheduling"],slug:"page-help",name:"Support",icon:"LifeBuoyIcon",i18n:"menu.support"}]}],h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"relative"},[r("div",{staticClass:"vx-navbar-wrapper",class:e.classObj},[r("vs-navbar",{staticClass:"vx-navbar navbar-custom navbar-skelton",class:e.textColor,attrs:{color:e.navbarColorLocal}},[r("div",{staticClass:"absolute h-full left-0 global-msg pl-6 w-full",class:[e.globalMessage&&"active",e.globalMessage&&e.globalMessage[1]]},[r("div",{staticClass:"flex content-center align-middle h-full "},[r("feather-icon",{class:"text-"+(e.globalMessage&&e.globalMessage[1]),attrs:{icon:e.globalMessage&&e.icons[e.globalMessage[1]],svgClasses:"w-6"}}),r("div",{staticClass:"self-center flex"},[r("p",{staticClass:"tracking-normal font-light text-xl text-dark pl-6",domProps:{innerHTML:e._s(e.globalMessage&&e.globalMessage[0])}})])],1)]),r("feather-icon",{staticClass:"sm:inline-flex xl:hidden cursor-pointer p-2",attrs:{icon:"MenuIcon"},on:{click:function(t){return t.stopPropagation(),e.showSidebar(t)}}}),r("vs-spacer"),r("profile-drop-down")],1)],1)])},m=[],v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showFullSearch,expression:"showFullSearch"}],staticClass:"search-full-container w-full h-full absolute left-0 top-0",class:{flex:e.showFullSearch}},[r("vx-auto-suggest",{ref:"navbarSearch",staticClass:"w-full",attrs:{autoFocus:e.showFullSearch,data:e.navbarSearchAndPinList,search_key:"title","background-overlay":"",inputClassses:"w-full vs-input-no-border vs-input-no-shdow-focus",icon:"SearchIcon",placeholder:"Explore Laima..."},on:{input:e.hnd_search_query_update,selected:e.selected,closeSearchbar:function(t){e.showFullSearch=!1}},scopedSlots:e._u([{key:"group",fn:function(t){var a=t.group_name;return[r("p",{staticClass:"font-semibold text-primary"},[e._v(e._s(a))])]}},{key:"pages",fn:function(t){var a=t.suggestion;return[r("div",{staticClass:"flex items-end leading-none py-1"},[r("feather-icon",{staticClass:"mr-4",attrs:{icon:a.icon,svgClasses:"h-5 w-5"}}),r("span",{staticClass:"mt-1"},[e._v(e._s(a.title))])],1)]}},{key:"noResult",fn:function(){return[r("div",{staticClass:"flex items-center"},[r("feather-icon",{staticClass:"mr-4",attrs:{icon:"InfoIcon",svgClasses:"h-5 w-5"}}),r("span",[e._v("No results found.")])],1)]},proxy:!0}])}),r("div",{staticClass:"absolute right-0 h-full z-50"},[r("feather-icon",{staticClass:"px-4 cursor-pointer h-full close-search-icon",attrs:{icon:"XIcon"},on:{click:function(t){e.showFullSearch=!1}}})],1)],1),r("feather-icon",{staticClass:"cursor-pointer navbar-fuzzy-search mr-4",attrs:{icon:"SearchIcon"},on:{click:function(t){e.showFullSearch=!0}}})],1)},g=[],b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vx-auto-suggest"},[r("div",{staticClass:"flex items-center relative"},[r("vs-input",{ref:"input",staticClass:"z-50",class:e.inputClassses,attrs:{placeholder:e.placeholder,"icon-pack":"feather",icon:"icon-search","icon-no-border":""},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.escPressed(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.increaseIndex(!1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.increaseIndex(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.suggestionSelected(t)}],focus:e.updateInputFocus,blur:function(t){return e.updateInputFocus(!1)}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),r("ul",{ref:"scrollContainer",staticClass:"auto-suggest-suggestions-list z-50 rounded-lg mt-2 shadow-lg overflow-x-hidden",class:{hidden:!e.inputFocused},attrs:{tabindex:"-1"},on:{mouseenter:function(t){e.insideSuggestions=!0},mouseleave:function(t){e.insideSuggestions=!1},focus:e.updateInputFocus,blur:function(t){return e.updateInputFocus(!1)}}},e._l(e.filteredData,(function(t,a,n){return r("li",{key:n,ref:"grp_list",refInFor:!0,staticClass:"auto-suggest__suggestion-group-container"},[e.hideGroupTitle?e._e():r("p",{staticClass:"auto-suggest__suggestion-group-title pt-3 pb-1 px-4"},[e._t("group",null,{group_name:a})],2),r("ul",[e._l(t,(function(t,s){return r("li",{key:s,staticClass:"auto-suggest__suggestion-group__suggestion py-3 px-4 cursor-pointer",class:{"vx-auto-suggest__current-selected":e.currentSelected==n+"."+s},on:{mouseenter:function(t){e.currentSelected=n+"."+s},click:e.suggestionSelected}},[e._t(a,null,{suggestion:t})],2)})),!t.length&&e.searchQuery?r("li",{staticClass:"auto-suggest__suggestion-group__suggestion py-3 px-4 no-results"},[e._t("noResult",[r("p",[e._v("No Results Found.")])],{group_name:a})],2):e._e()],2)])})),0)])},_=[],w=(r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("7f7f"),r("6b54"),r("bd86")),y=(r("28a5"),r("ffc1"),r("f559"),r("768b"));r("8615"),r("ac6a"),r("456d"),r("c5f6");function x(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=C(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function C(e,t){if(e){if("string"===typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var k={props:{placeholder:{type:String,default:"Search.."},data:{type:Object,required:!1},initalData:{type:Object,default:function(){return new Object}},inputClassses:{type:[String,Object,Array]},autoFocus:{type:Boolean,default:!1},showPinned:{type:Boolean,default:!1},searchLimit:{type:Number,default:4},hideGroupTitle:{type:Boolean,default:!1}},data:function(){return{searchQuery:"",filteredData:{},currentSelected:-1,inputFocused:!1,insideSuggestions:!1}},watch:{searchQuery:function(e){var t=this;if(this.$emit("input",e),""==e)this.inputInit();else{var r={},a=Object.keys(this.data);a.forEach((function(e,n){r[a[n]]=t.filter_grp(t.data[e])})),Object.values(r).some((function(e){return e.length}))||(this.currentSelected=-1),this.filteredData=r}},autoFocus:function(e){e?this.focusInput():this.searchQuery=""},filteredData:function(e){var t,r=null,a=x(Object.values(e).entries());try{for(a.s();!(t=a.n()).done;){var n=Object(y["a"])(t.value,2),s=n[0],i=n[1];if(i.length){r=s;break}}}catch(o){a.e(o)}finally{a.f()}null!=r&&(this.currentSelected=r+".0")}},methods:{escPressed:function(){this.$emit("closeSearchbar"),this.searchQuery=""},filter_grp:function(e){var t=this,r=e.data.filter((function(r){return r[e.key].toLowerCase().startsWith(t.searchQuery.toLowerCase())})),a=e.data.filter((function(r){return!r[e.key].toLowerCase().startsWith(t.searchQuery.toLowerCase())&&r[e.key].toLowerCase().indexOf(t.searchQuery.toLowerCase())>-1}));return r.concat(a).slice(0,this.searchLimit)},inputInit:function(){0===Object.entries(this.initalData).length&&this.initalData.constructor===Object?this.filteredData={}:this.filteredData=this.initalData},updateInputFocus:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(t)""==this.searchQuery&&this.inputInit(),setTimeout((function(){e.inputFocused=!0}),100);else{if(this.insideSuggestions)return;setTimeout((function(){e.inputFocused=!1}),100),this.escPressed()}},suggestionSelected:function(){if(this.currentSelected>-1){var e=this.currentSelected.split("."),t=Object(y["a"])(e,2),r=t[0],a=t[1],n=Object.keys(this.data)[r],s=this.filteredData[n][a];this.$emit("selected",Object(w["a"])({},n,s)),this.searchQuery=""}},increaseIndex:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.currentSelected.split("."),r=Object(y["a"])(t,2),a=r[0],n=r[1],s=Object.entries(this.filteredData),i=s[a][1].length;e?i-1>n?this.currentSelected=a+"."+(Number(n)+1):a<s.length-1&&(this.currentSelected=Number(a)+1+".0"):Number(n)?this.currentSelected=a+"."+(Number(n)-1):Number(a)&&(this.currentSelected=Number(a)-1+"."+(s[a-1][1].length-1))},focusInput:function(){this.$refs.input.$el.querySelector("input").focus()}},mounted:function(){this.autoFocus&&this.focusInput()}},O=k,$=(r("01a6"),Object(u["a"])(O,b,_,!1,null,null,null)),E=$.exports,D={components:{VxAutoSuggest:E},data:function(){return{navbarSearchAndPinList:this.$store.state.navbarSearchAndPinList,showFullSearch:!1}},methods:{selected:function(e){e.pages&&this.$router.push(e.pages.url).catch((function(){})),this.showFullSearch=!1},hnd_search_query_update:function(e){this.$store.commit("TOGGLE_CONTENT_OVERLAY",!!e)}}},T=D,I=Object(u["a"])(T,v,g,!1,null,null,null),j=I.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-custom-content":"","vs-trigger-click":""}},[r("feather-icon",{staticClass:"cursor-pointer mt-1 sm:mr-6 mr-2",attrs:{icon:"BellIcon",badge:e.unreadNotifications.length}}),r("vs-dropdown-menu",{staticClass:"notification-dropdown dropdown-custom vx-navbar-dropdown"},[r("div",{staticClass:"notification-top text-center p-5 bg-primary text-white"},[r("h3",{staticClass:"text-white"},[e._v(e._s(e.unreadNotifications.length)+" New")]),r("p",{staticClass:"opacity-75"},[e._v("App Notifications")])]),r("VuePerfectScrollbar",{key:e.$vs.rtl,ref:"mainSidebarPs",staticClass:"scroll-area--nofications-dropdown p-0 mb-10",attrs:{settings:e.settings}},[r("ul",{staticClass:"bordered-items"},e._l(e.unreadNotifications,(function(t){return r("li",{key:t.index,staticClass:"flex justify-between px-4 py-4 notification cursor-pointer"},[r("div",{staticClass:"flex items-start"},[r("feather-icon",{attrs:{icon:t.icon,svgClasses:["text-"+t.category,"stroke-current mr-1 h-6 w-6"]}}),r("div",{staticClass:"mx-2"},[r("span",{staticClass:"font-medium block notification-title",class:["text-"+t.category]},[e._v(e._s(t.title))]),r("small",[e._v(e._s(t.msg))])])],1),r("small",{staticClass:"mt-1 whitespace-no-wrap"},[e._v(e._s(e.elapsedTime(t.time)))])])})),0)]),r("div",{staticClass:"\n      checkout-footer\n      fixed\n      bottom-0\n      rounded-b-lg\n      text-primary\n      w-full\n      p-2\n      font-semibold\n      text-center\n      border\n      border-b-0\n      border-l-0\n      border-r-0\n      border-solid\n      d-theme-border-grey-light\n      cursor-pointer"},[r("span",[e._v("View All Notifications")])])],1)],1)},R=[],P=r("9d63"),M=r.n(P),L={components:{VuePerfectScrollbar:M.a},data:function(){return{unreadNotifications:[{index:0,title:"New Message",msg:"Are your going to meet me tonight?",icon:"MessageSquareIcon",time:this.randomDate({sec:10}),category:"primary"},{index:1,title:"New Order Recieved",msg:"You got new order of goods.",icon:"PackageIcon",time:this.randomDate({sec:40}),category:"success"},{index:2,title:"Server Limit Reached!",msg:"Server have 99% CPU usage.",icon:"AlertOctagonIcon",time:this.randomDate({min:1}),category:"danger"},{index:3,title:"New Mail From Peter",msg:"Cake sesame snaps cupcake",icon:"MailIcon",time:this.randomDate({min:6}),category:"primary"},{index:4,title:"Bruce's Party",msg:"Chocolate cake oat cake tiramisu",icon:"CalendarIcon",time:this.randomDate({hr:2}),category:"warning"}],settings:{maxScrollbarLength:60,wheelSpeed:.6}}},methods:{elapsedTime:function(e){var t=new Date(e),r=new Date,a=r-t;a/=1e3;var n=Math.round(a);a=Math.floor(a/60);var s=Math.round(a%60);a=Math.floor(a/60);var i=Math.round(a%24);a=Math.floor(a/24);var o=Math.round(a%365);a=Math.floor(a/365);var c=a;return c>0?c+(c>1?" Years ":" Year ")+"ago":o>0?o+(o>1?" Days ":" Day ")+"ago":i>0?i+(i>1?" Hrs ":" Hour ")+"ago":s>0?s+(s>1?" Mins ":" Min ")+"ago":n>0?n+(n>1?" sec ago":"just now"):"Just Now"},randomDate:function(e){var t=e.hr,r=e.min,a=e.sec,n=new Date;return t&&n.setHours(n.getHours()-t),r&&n.setMinutes(n.getMinutes()-r),a&&n.setSeconds(n.getSeconds()-a),n}}},N=L,H=Object(u["a"])(N,A,R,!1,null,null,null),U=H.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.actorContext.id?r("div",{staticClass:"the-navbar__user-meta flex items-center"},[r("div",{staticClass:"text-right leading-tight hidden sm:block"},[r("p",{staticClass:"font-semibold"},[e._v(e._s(e.actorContext.username))]),r("small",[e._v(e._s(e.activeWorkspace.name))])]),r("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-custom-content":"","vs-trigger-click":""}},[r("div",{staticClass:"con-img ml-3"},[e.userContext.avatar?r("img",{key:"onlineImg",staticClass:"rounded-full shadow-md cursor-pointer block",attrs:{src:e.userContext.avatar,alt:"user-img",width:"40",height:"40"}}):r("div",{staticClass:"con-vs-avatar mt-4 clinic-avatar top-0  border-none shadow large has-tooltip",staticStyle:{width:"40px !important",height:"40px !important",background:"white"},attrs:{"data-original-title":"null"}},[r("span",{staticClass:"vs-avatar--text notranslate vs-avatar-text-primary",attrs:{translate:"translate"}},[e._v("\n\t\t\t\t"+e._s(e.userContext.name[0].toUpperCase())+"\n\t\t\t\t"+e._s(e.userContext.last_name[0].toUpperCase())+"\n\t\t\t")])])]),r("vs-dropdown-menu",{staticClass:"vx-navbar-dropdown"},[r("ul",{staticStyle:{"min-width":"9rem"}},[r("li",{staticClass:"flex py-2 px-4 cursor-pointer hover:bg-primary hover:text-white"},[r("feather-icon",{attrs:{icon:"UserIcon",svgClasses:"w-4 h-4"}}),r("span",{staticClass:"ml-2"},[e._v("Profile")])],1),r("li",{staticClass:"flex py-2 px-4 cursor-pointer hover:bg-primary hover:text-white"},[r("feather-icon",{attrs:{icon:"MailIcon",svgClasses:"w-4 h-4"}}),r("span",{staticClass:"ml-2"},[e._v("Inbox")])],1),r("li",{staticClass:"flex py-2 px-4 cursor-pointer hover:bg-primary hover:text-white"},[r("feather-icon",{attrs:{icon:"CheckSquareIcon",svgClasses:"w-4 h-4"}}),r("span",{staticClass:"ml-2"},[e._v("Tasks")])],1),r("li",{staticClass:"flex py-2 px-4 cursor-pointer hover:bg-primary hover:text-white"},[r("feather-icon",{attrs:{icon:"MessageSquareIcon",svgClasses:"w-4 h-4"}}),r("span",{staticClass:"ml-2"},[e._v("Chat")])],1),r("li",{staticClass:"flex py-2 px-4 cursor-pointer hover:bg-primary hover:text-white"},[r("feather-icon",{attrs:{icon:"HeartIcon",svgClasses:"w-4 h-4"}}),r("span",{staticClass:"ml-2"},[e._v("Notepad")])],1),r("vs-divider",{staticClass:"m-1"}),r("li",{staticClass:"flex py-2 px-4 cursor-pointer hover:bg-primary hover:text-white",on:{click:e.logout}},[r("feather-icon",{attrs:{icon:"LogOutIcon",svgClasses:"w-4 h-4"}}),r("span",{staticClass:"ml-2"},[e._v("Logout")])],1)],1)])],1)],1):e._e()},V=[],q=r("4c95"),B={data:function(){return{}},computed:{actorContext:function(){return this.$store.state.auth.actorContext},activeWorkspace:function(){return this.$store.state.auth.selectedWorkspace},userContext:function(){return this.$store.state.auth.userContext}},methods:{logout:function(){q["a"].logOut()}}},W=B,Y=Object(u["a"])(W,F,V,!1,null,null,null),z=Y.exports,G={name:"the-navbar-vertical",props:{navbarColor:{type:String,default:"#fff"}},components:{SearchBar:j,NotificationDropDown:U,ProfileDropDown:z},data:function(){return{icons:{primary:"InfoIcon",warning:"AlertTriangleIcon",success:"CheckIcon",danger:"AlertOctagonIcon"}}},computed:{globalMessage:function(){return this.$store.state.globalMessage},navbarColorLocal:function(){return"dark"===this.$store.state.theme&&"#fff"===this.navbarColor?"#10163a":this.navbarColor},verticalNavMenuWidth:function(){return this.$store.state.verticalNavMenuWidth},textColor:function(){return{"text-white":"#10163a"!=this.navbarColor&&"dark"===this.$store.state.theme||"#fff"!=this.navbarColor&&"dark"!==this.$store.state.theme}},windowWidth:function(){return this.$store.state.windowWidth},classObj:function(){return"default"==this.verticalNavMenuWidth?"navbar-default":"reduced"==this.verticalNavMenuWidth?"navbar-reduced":this.verticalNavMenuWidth?"navbar-full":void 0}},methods:{showSidebar:function(){this.$store.commit("TOGGLE_IS_VERTICAL_NAV_MENU_ACTIVE",!0)}}},K=G,J=(r("5813"),Object(u["a"])(K,h,m,!1,null,null,null)),X=J.exports,Q=function(e,t){var r=t._c;return r("footer",{staticClass:"the-footer flex-wrap justify-between",class:t.classes},[r("span",[t._v("COPYRIGHT  "+t._s((new Date).getFullYear())+" "),r("a",{attrs:{href:"https://laima.app",target:"_blank",rel:"nofollow"}},[t._v("Laima.app")]),t._v(", All rights Reserved")]),r("span",{staticClass:"md:flex hidden items-center"},[r("span",[t._v("Hand-crafted & Made with")]),r("feather-icon",{staticClass:"ml-2",attrs:{icon:"HeartIcon",svgClasses:"stroke-current text-danger w-6 h-6"}})],1)])},Z=[],ee={name:"the-footer",props:{classes:{type:String}}},te=ee,re=Object(u["a"])(te,Q,Z,!0,null,null,null),ae=re.exports,ne=r("1dff"),se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"parentx"},[a("vs-sidebar",{directives:[{name:"hammer",rawName:"v-hammer:swipe.left",value:e.onSwipeLeft,expression:"onSwipeLeft",arg:"swipe",modifiers:{left:!0}}],ref:"verticalNavMenu",staticClass:"v-nav-menu items-no-padding",attrs:{"default-index":"-1","click-not-close":e.clickNotClose,"reduce-not-rebound":e.reduceNotRebound,parent:e.parent,hiddenBackground:e.clickNotClose,reduce:e.reduce},model:{value:e.isVerticalNavMenuActive,callback:function(t){e.isVerticalNavMenuActive=t},expression:"isVerticalNavMenuActive"}},[a("div",{on:{mouseenter:e.mouseEnter,mouseleave:e.mouseLeave}},[a("div",{staticClass:"header-sidebar flex items-end justify-between",attrs:{slot:"header"},slot:"header"},[a("router-link",{staticClass:"vx-logo cursor-pointer flex items-center",attrs:{tag:"div",to:"/"}},[a("img",{directives:[{name:"show",rawName:"v-show",value:e.isMouseEnter||!e.reduce,expression:"isMouseEnter || !reduce"}],staticClass:"vx-logo-text absolute",staticStyle:{top:"-2px",left:"-15px"},attrs:{width:"250",src:r("a6f7"),alt:"login"}}),a("img",{directives:[{name:"show",rawName:"v-show",value:e.reduce&&!e.isMouseEnter,expression:"reduce && !isMouseEnter"}],staticClass:"vx-logo-text absolute top-0 mt-3 ml-1",attrs:{width:"25",src:r("58e1")}})]),a("div",[e.showCloseButton?[a("feather-icon",{staticClass:"m-0 cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(t){return e.$store.commit("TOGGLE_IS_VERTICAL_NAV_MENU_ACTIVE",!1)}}})]:e.showCloseButton||e.verticalNavMenuItemsMin?e._e():[a("feather-icon",{staticClass:"mr-0 cursor-pointer",attrs:{id:"btnVNavMenuMinToggler",icon:e.reduce?"CircleIcon":"DiscIcon","svg-classes":"stroke-current text-primary"},on:{click:function(t){return e.toggleReduce(!e.reduce)}}})]],2)],1),a("VuePerfectScrollbar",{key:e.$vs.rtl,ref:"verticalNavMenuPs",staticClass:"scroll-area-v-nav-menu",attrs:{settings:e.settings},on:{"ps-scroll-y":e.psSectionScroll}},[a("div",{staticClass:"sticky clinic-picker py-4 w-full top-0 g-primary text-white overflow-hidden",class:e.showShadowBottom&&!e.clinicSelectionOpen&&"bottom-shadow"},[a("div",{staticClass:"flex justify-start pl-4"},[a("vs-avatar",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom-end",value:e.activeWorkspace.name,expression:"activeWorkspace.name",modifiers:{"bottom-end":!0}}],staticClass:"mt-4 clinic-avatar absolute top-0  border-none shadow",staticStyle:{width:"40px!important",height:"40px!important"},attrs:{size:"large",color:"white","text-color":"primary",text:e.activeWorkspace.name},on:{click:function(t){e.clinics.length>1&&(e.clinicSelectionOpen=!e.clinicSelectionOpen)}}}),e.isVerticalNavMenuReduced&&e.verticalNavMenuItemsMin?e._e():a("div",{staticClass:"ml-16 truncate"},[a("div",{staticClass:"font-light text-white truncate",staticStyle:{"font-size":"1.05rem"}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.activeWorkspace.name)+"\n\t\t\t\t\t\t\t")]),a("div",{staticClass:"text-sm font-light text-gray",staticStyle:{color:"#e2e8f0"}},[e._v("\n\t\t\t\t\t\t\t\tLogged in as "),a("span",{staticClass:"font-medium"},[e._v(e._s(e.scope))])])])],1)]),e.clinics.length>1?a("div",{staticClass:"w-full bg-white clinic-selection-wrap sticky",class:e.clinicSelectionOpen&&["active-clinic-picker","bottom-shadow"]},e._l(e.clinics,(function(t){return a("div",{key:t},[a("div",{staticClass:"clinic-option text-base truncate pl-6 py-5 cursor-pointer",style:{background:t==e.selectedWorkspace&&"#eaf2f7"},on:{click:function(r){e.selectedWorkspace=t}}},[e._v("\n\t\t\t\t\t\t\t"+e._s(t)+"\n\t\t\t\t\t\t")])])})),0):e._e(),a("div",{staticClass:"absolute top-0 w-full h-full mt-24 pl-4 pr-4"},[e._l(e.menuItemsUpdated,(function(t,r){return[t.header&&!e.verticalNavMenuItemsMin?a("span",{key:"header-"+r,staticClass:"navigation-header truncate"},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.$t(t.i18n))+"\n\t\t\t\t\t\t")]):t.header?e._e():[t.submenu?[a("v-nav-menu-group",{key:"group-"+r,attrs:{openHover:e.openGroupHover,group:t,groupIndex:r,open:e.isGroupActive(t)}})]:a("v-nav-menu-item",{key:"item-"+r,attrs:{index:r,to:"external"!==t.slug?t.url:null,href:"external"===t.slug?t.url:null,icon:t.icon,target:t.target,isDisabled:t.isDisabled,slug:t.slug}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.verticalNavMenuItemsMin,expression:"!verticalNavMenuItemsMin"}],staticClass:"truncate"},[e._v(e._s(e.$t(t.i18n)))]),!t.tag||!e.isMouseEnter&&e.reduce?e._e():a("vs-chip",{staticClass:"ml-auto",attrs:{color:t.tagColor}},[e._v(e._s(t.tag))])],1)]]}))],2)])],1)]),e.isVerticalNavMenuActive?e._e():a("div",{directives:[{name:"hammer",rawName:"v-hammer:swipe.right",value:e.onSwipeAreaSwipeRight,expression:"onSwipeAreaSwipeRight",arg:"swipe",modifiers:{right:!0}}],staticClass:"v-nav-menu-swipe-area"})],1)},ie=[],oe=(r("20d6"),r("6762"),r("2fdb"),r("7514"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vs-sidebar-group",class:[{"vs-sidebar-group-open":e.openItems},{"vs-sidebar-group-active":e.open},{"disabled-item pointer-events-none":e.group.isDisabled}],on:{mouseover:e.mouseover,mouseout:e.mouseout}},[r("div",{staticClass:"group-header w-full",on:{click:e.clickGroup}},[r("span",{staticClass:"flex items-center w-full"},[e.group.icon||this.groupIndex>Math.floor(this.groupIndex)?r("feather-icon",{attrs:{icon:e.group.icon||"CircleIcon",svgClasses:{"w-3 h-3":this.groupIndex%1!=0}}}):e._e(),r("span",{directives:[{name:"show",rawName:"v-show",value:!e.verticalNavMenuItemsMin,expression:"!verticalNavMenuItemsMin"}],staticClass:"truncate mr-3 select-none"},[e._v(e._s(e.$t(e.group.i18n)))]),e.group.tag&&!e.verticalNavMenuItemsMin?r("vs-chip",{staticClass:"ml-auto mr-4",attrs:{color:e.group.tagColor}},[e._v(e._s(e.group.tag))]):e._e()],1),r("feather-icon",{directives:[{name:"show",rawName:"v-show",value:!e.verticalNavMenuItemsMin,expression:"!verticalNavMenuItemsMin"}],class:[{rotate90:e.openItems},"feather-grp-header-arrow"],attrs:{icon:e.$vs.rtl?"ChevronLeftIcon":"ChevronRightIcon","svg-classes":"w-4 h-4"}}),r("span",{staticClass:"vs-sidebar--tooltip"},[e._v(e._s(e.$t(e.group.i18n)))])],1),r("ul",{ref:"items",staticClass:"vs-sidebar-group-items",style:e.styleItems},e._l(e.group.submenu,(function(t,a){return r("li",{key:a},[t.submenu?r("v-nav-menu-group",{attrs:{group:t,groupIndex:Number(e.groupIndex+"."+(a+1)),open:e.isGroupActive(t),openHover:e.openHover}}):r("v-nav-menu-item",{attrs:{"icon-small":"",index:e.groupIndex+"."+a,to:"external"!==t.slug?t.url:null,href:"external"===t.slug?t.url:null,icon:e.itemIcon(e.groupIndex+"."+a),slug:t.slug,target:t.target}},[r("span",{staticClass:"truncate"},[e._v(e._s(e.$t(t.i18n)))]),t.tag?r("vs-chip",{staticClass:"ml-auto",attrs:{color:t.tagColor}},[e._v(e._s(t.tag))]):e._e()],1)],1)})),0)])}),ce=[],le=(r("4917"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vs-sidebar--item",class:[{"vs-sidebar-item-active":e.activeLink},{"disabled-item pointer-events-none":e.isDisabled}]},[e.to?r("router-link",{class:[{"router-link-active":e.activeLink}],attrs:{tabindex:"-1",exact:"",to:e.to,target:e.target}},[e.featherIcon?r("feather-icon",{class:{"w-3 h-3":e.iconSmall},attrs:{icon:e.icon}}):r("vs-icon",{attrs:{"icon-pack":e.iconPack,icon:e.icon}}),e._t("default")],2):r("a",{attrs:{target:e.target,href:e.href,tabindex:"-1"}},[e.featherIcon?r("feather-icon",{class:{"w-3 h-3":e.iconSmall},attrs:{icon:e.icon}}):r("vs-icon",{attrs:{"icon-pack":e.iconPack,icon:e.icon}}),e._t("default")],2)],1)}),ue=[],de={name:"v-nav-menu-item",props:{aliases:{type:Array},icon:{type:String,default:""},iconSmall:{type:Boolean,default:!1},iconPack:{type:String,default:"material-icons"},href:{type:[String,null],default:"#"},to:{type:[String,Object,null],default:null},slug:{type:String,default:null},index:{type:[String,Number],default:null},featherIcon:{type:Boolean,default:!0},target:{type:String,default:"_self"},isDisabled:{type:Boolean,default:!1}},computed:{activeLink:function(){var e=this.aliases&&(this.aliases.includes(this.to)||this.aliases.includes(this.$route.path)),t="/"===this.to&&"/dashboard/"===this.$route.path;return!!(e||this.to==this.$route.path||this.$route.meta.parent==this.slug&&this.to||t)}}},pe=de,fe=Object(u["a"])(pe,le,ue,!1,null,null,null),he=fe.exports,me={name:"v-nav-menu-group",props:{openHover:{type:Boolean,default:!1},open:{type:Boolean,default:!1},group:{type:Object},groupIndex:{type:Number}},components:{VNavMenuItem:he},data:function(){return{maxHeight:"0px",openItems:!1}},computed:{verticalNavMenuItemsMin:function(){return this.$store.state.verticalNavMenuItemsMin},styleItems:function(){return{maxHeight:this.maxHeight}},itemIcon:function(){return function(e){if(!((e.match(/\./g)||[]).length>1))return"CircleIcon"}},isGroupActive:function(){var e=this;return function(t){var r=e.$route.fullPath,a=!1,n=e.$route.meta?e.$route.meta.parent:void 0,s=function e(t){t.submenu&&t.submenu.forEach((function(t){r!=t.url&&n!=t.slug||!t.url?t.submenu&&e(t):a=!0}))};return s(t),a}}},watch:{$route:function(){var e=this;if(!this.verticalNavMenuItemsMin){var t=this.scrollHeight;this.openItems&&!this.open?(this.maxHeight="".concat(t,"px"),setTimeout((function(){e.maxHeight="".concat(0,"px")}),50)):this.open&&(this.maxHeight="".concat(t,"px"),setTimeout((function(){e.maxHeight="none"}),300))}},maxHeight:function(){this.openItems="0px"!=this.maxHeight},"$store.state.verticalNavMenuItemsMin":function(e){var t=this,r=this.$refs.items.scrollHeight;!e&&this.open?(this.maxHeight="".concat(r,"px"),setTimeout((function(){t.maxHeight="none"}),300)):(this.maxHeight="".concat(r,"px"),setTimeout((function(){t.maxHeight="0px"}),50)),e&&this.open&&(this.maxHeight="".concat(r,"px"),setTimeout((function(){t.maxHeight="0px"}),250))}},methods:{clickGroup:function(){var e=this;if(!this.openHover){var t=this.$refs.items.scrollHeight;"0px"==this.maxHeight?(this.maxHeight="".concat(t,"px"),setTimeout((function(){e.maxHeight="none"}),300)):(this.maxHeight="".concat(t,"px"),setTimeout((function(){e.maxHeight="".concat(0,"px")}),50)),this.$parent.$children.map((function(t){t.isGroupActive&&(t===e||t.open||"0px"==t.maxHeight||setTimeout((function(){t.maxHeight="".concat(0,"px")}),50))}))}},mouseover:function(){if(this.openHover){var e=this.$refs.items.scrollHeight;this.maxHeight="".concat(e,"px")}},mouseout:function(){if(this.openHover){var e=0;this.maxHeight="".concat(e,"px")}}},mounted:function(){this.openItems=this.open,this.open&&(this.maxHeight="none")}},ve=me,ge=(r("1ae5"),Object(u["a"])(ve,oe,ce,!1,null,null,null)),be=ge.exports;function _e(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=we(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function we(e,t){if(e){if("string"===typeof e)return ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ye(e,t):void 0}}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var xe={name:"v-nav-menu",components:{VNavMenuGroup:be,VNavMenuItem:he,VuePerfectScrollbar:M.a},props:{logo:{type:String},openGroupHover:{type:Boolean,default:!1},parent:{type:String},reduceNotRebound:{type:Boolean,default:!0},navMenuItems:{type:Array,required:!0},title:{type:String}},data:function(){return{clickNotClose:!1,isMouseEnter:!1,reduce:!1,showCloseButton:!1,settings:{maxScrollbarLength:60,wheelSpeed:1,swipeEasing:!0},clinicSelectionOpen:!1,showShadowBottom:!1}},computed:{activeWorkspace:function(){return this.$store.state.auth.selectedWorkspace},clinics:function(){return this.$store.state.auth.availableWorkspaces.map((function(e){return e.name}))},scope:function(){var e=this.$store.state.auth.actorContext.scope;return e="Generic"===e?"Owner":e,e},selectedWorkspace:{get:function(){return this.activeWorkspace.name},set:function(e){var t=this.$store.state.auth.availableWorkspaces.find((function(t){return t.name==e}));this.$store.dispatch("auth/changeWorkspace",t)}},isGroupActive:function(){var e=this;return function(t){var r=e.$route.fullPath,a=e.$route.meta?e.$route.meta.parent:void 0,n=!1,s=function e(t){t.submenu&&t.submenu.forEach((function(t){!t.url||r!==t.url&&a!==t.slug?t.submenu&&e(t):n=!0}))};return s(t),n}},menuItemsUpdated:function(){var e,t=this.navMenuItems.slice(),r=_e(this.navMenuItems.entries());try{var a=function(){var r=Object(y["a"])(e.value,2),a=(r[0],r[1]);if(a.header&&a.items.length){var n,s=t.findIndex((function(e){return e.header===a.header})),i=_e(a.items.entries());try{for(i.s();!(n=i.n()).done;){var o=Object(y["a"])(n.value,2),c=o[0],l=o[1];t.splice(s+1+c,0,l)}}catch(u){i.e(u)}finally{i.f()}}};for(r.s();!(e=r.n()).done;)a()}catch(s){r.e(s)}finally{r.f()}var n=this.$store.state.auth.actorContext.roles;return t.filter((function(e){if(n&&e.roles){var t,r=_e(e.roles);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(n.includes(a))return!0}}catch(s){r.e(s)}finally{r.f()}return!1}return!0}))},isVerticalNavMenuActive:{get:function(){return this.$store.state.isVerticalNavMenuActive},set:function(e){this.$store.commit("TOGGLE_IS_VERTICAL_NAV_MENU_ACTIVE",e)}},reduceButton:{get:function(){return this.$store.state.reduceButton},set:function(e){this.$store.commit("TOGGLE_REDUCE_BUTTON",e)}},isVerticalNavMenuReduced:function(){return Boolean(this.reduce&&this.reduceButton)},verticalNavMenuItemsMin:function(){return this.$store.state.verticalNavMenuItemsMin},windowWidth:function(){return this.$store.state.windowWidth}},watch:{$route:function(){this.reduceOnRoute()},reduce:function(e){var t=e?"reduced":this.$store.state.windowWidth<1200?"no-nav-menu":"default";this.$store.dispatch("updateVerticalNavMenuWidth",t),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),100)},reduceButton:function(){this.setVerticalNavMenuWidth()},windowWidth:function(){this.setVerticalNavMenuWidth()}},methods:{reduceOnRoute:function(){var e=["Scheduler","schedule-planner","visit-new"],t=this.$store.state.windowWidth<1700;e.includes(this.$route.name)&&t?this.$store.dispatch("toggleNavbar",!0):this.$store.dispatch("toggleNavbar",!1)},onSwipeLeft:function(){this.isVerticalNavMenuActive&&this.showCloseButton&&(this.isVerticalNavMenuActive=!1)},onSwipeAreaSwipeRight:function(){!this.isVerticalNavMenuActive&&this.showCloseButton&&(this.isVerticalNavMenuActive=!0)},psSectionScroll:function(){this.showShadowBottom=this.$refs.verticalNavMenuPs.$el.scrollTop>0},mouseEnter:function(){this.reduce&&this.$store.commit("UPDATE_VERTICAL_NAV_MENU_ITEMS_MIN",!1),this.isMouseEnter=!0},mouseLeave:function(){this.reduce&&this.$store.commit("UPDATE_VERTICAL_NAV_MENU_ITEMS_MIN",!0),this.isMouseEnter=!1},setVerticalNavMenuWidth:function(){if(this.windowWidth>1200){this.reduce=!!this.reduceButton,this.$store.commit("TOGGLE_IS_VERTICAL_NAV_MENU_ACTIVE",!0),this.clickNotClose=!0,this.showCloseButton=!1;var e=this.isVerticalNavMenuReduced?"reduced":"default";this.$store.dispatch("updateVerticalNavMenuWidth",e)}else this.reduceButton&&(this.reduce=!1),this.showCloseButton=!0,this.clickNotClose=!1,this.$store.dispatch("updateVerticalNavMenuWidth","no-nav-menu"),this.$store.commit("UPDATE_VERTICAL_NAV_MENU_ITEMS_MIN",!1)},toggleReduce:function(e){this.reduceButton=e,this.setVerticalNavMenuWidth()}},mounted:function(){this.setVerticalNavMenuWidth(),this.reduceOnRoute()}},Ce=xe,Se=(r("a5c0"),Object(u["a"])(Ce,se,ie,!1,null,null,null)),ke=Se.exports,Oe={components:{BackToTop:s["a"],GlobalAlerts:p,TheFooter:ae,TheNavbarVertical:X,VNavMenu:ke},data:function(){return{footerType:ne["a"].footerType||"static",hideScrollToTop:ne["a"].hideScrollToTop,isNavbarDark:!1,navbarColor:ne["a"].navbarColor||"#fff",navbarType:ne["a"].navbarType||"floating",navMenuItems:f,routerTransition:ne["a"].routerTransition||"none",routeTitle:this.$route.meta.pageTitle}},watch:{$route:function(){this.routeTitle=this.$route.meta.pageTitle},isThemeDark:function(e){var t="#fff"==this.navbarColor&&e?"#10163a":"#fff";this.updateNavbarColor(t)}},computed:{bodyOverlay:function(){return this.$store.state.bodyOverlay},contentAreaClass:function(){return"default"==this.verticalNavMenuWidth?"content-area-reduced":"reduced"==this.verticalNavMenuWidth?"content-area-lg":"content-area-full"},footerClasses:function(){return{"footer-hidden":"hidden"==this.footerType,"footer-sticky":"sticky"==this.footerType,"footer-static":"static"==this.footerType}},isAppPage:function(){return this.$route.meta.no_scroll},isThemeDark:function(){return"dark"==this.$store.state.theme},navbarClasses:function(){return{"navbar-hidden":"hidden"==this.navbarType,"navbar-sticky":"sticky"==this.navbarType,"navbar-static":"static"==this.navbarType,"navbar-floating":"floating"==this.navbarType}},verticalNavMenuWidth:function(){return this.$store.state.verticalNavMenuWidth},windowWidth:function(){return this.$store.state.windowWidth}},methods:{changeRouteTitle:function(e){this.routeTitle=e},updateNavbar:function(e){"static"==e&&this.updateNavbarColor(this.isThemeDark?"#10163a":"#fff"),this.navbarType=e},updateNavbarColor:function(e){this.navbarColor=e,this.isNavbarDark="#fff"!=e},updateFooter:function(e){this.footerType=e},setNavMenuVisibility:function(){this.$store.commit("TOGGLE_IS_VERTICAL_NAV_MENU_ACTIVE",!0)},toggleHideScrollToTop:function(e){this.hideScrollToTop=e}},created:function(){var e="#fff"==this.navbarColor&&this.isThemeDark?"#10163a":this.navbarColor;this.updateNavbarColor(e),this.setNavMenuVisibility()}},$e=Oe,Ee=Object(u["a"])($e,a,n,!1,null,null,null);t["default"]=Ee.exports},f1dd:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"layout--full-page"},[r("router-view")],1)},n=[],s=r("2877"),i={},o=Object(s["a"])(i,a,n,!1,null,null,null);t["default"]=o.exports},f335:function(e,t,r){},f499:function(e,t,r){"use strict";r("6bac")},f6dc:function(e,t,r){},fa03:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"h-screen flex w-full bg-img vx-row no-gutter justify-center items-center"},[e.isInvitedView?r("div",[r("h2",{staticClass:"mb-4 text-center p-10 pb-2"},[e._v(e._s(e.$t("headers.account_activated_short")))]),r("h4",{staticClass:"mb-4 text-center p-6 pb-10",staticStyle:{color:"rgb(100, 100, 100)"}},[e._v(" "+e._s(e.$t("headers.gonna_redirect")))])]):r("div",{staticClass:"vx-col sm:w-3/5 md:w-3/5 lg:w-3/4 xl:w-3/5 sm:m-0 m-4"},[r("vx-card",[r("div",{staticClass:"full-page-bg-color",attrs:{slot:"no-body"},slot:"no-body"},[r("div",{staticClass:"form-wrap"},[r("h3",{staticClass:"text-center first-form-header pt-8 pb-6"},[e._v(e._s(e.$t("headers.account_config")))]),r("h5",{staticClass:"text-center first-form-header sub"},[e._v("\n                        "+e._s(e.$t("headers.account_activated"))+"\n                    ")]),r("first-form-clinic")],1)])])],1)])},n=[],s=r("768b"),i=(r("ffc1"),r("ac6a"),r("7f7f"),r("96cf"),r("3b8d")),o=r("d3e3"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("form-wizard",{key:e.formIndex,ref:"wizard",staticClass:"first-form-clinic",attrs:{color:"rgba(var(--vs-primary), 1)",errorColor:"rgba(var(--vs-danger), 1)",title:"",subtitle:"",finishButtonText:e.$t("buttons.submit")}},[r("tab-content",{staticClass:"mb-5",attrs:{title:e.$t("headers.basics"),icon:"feather icon-home","before-change":e.validateStep1}},[r("form",{attrs:{"data-vv-scope":"step-1"}},[r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col md:w-1/2 w-full mt-5 auto-margin"},[r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"icon-no-border":"",icon:"icon icon-briefcase","icon-pack":"feather",label:e.$t("fields.clinic_name"),"data-vv-as":e.$t("fields.clinic_name").toLowerCase(),"val-icon-danger":"clear",danger:e.errors.has("workspace_name","step-1"),"danger-text":e.errors.first("workspace_name","step-1"),name:"workspace_name"},model:{value:e.workspace_name,callback:function(t){e.workspace_name=t},expression:"workspace_name"}})],1)]),r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col md:w-1/2 w-full mt-5 auto-margin"},[r("label",{staticClass:"vs-input--label",attrs:{for:""}},[e._v(e._s(e.$t("headers.desc")))]),r("vs-textarea",{staticClass:"w-full",staticStyle:{background:"white"},attrs:{name:"description","val-icon-danger":"clear","data-vv-as":e.$t("headers.desc").toLowerCase(),danger:e.errors.has("description","step-1"),"danger-text":e.errors.first("description","step-1")},model:{value:e.clinic.description,callback:function(t){e.$set(e.clinic,"description",t)},expression:"clinic.description"}})],1)])])]),r("tab-content",{staticClass:"mb-5 pb-8",attrs:{title:e.$t("headers.details"),icon:"feather icon-mail","before-change":e.validateStep2}},[r("form",{attrs:{"data-vv-scope":"step-2"}},[r("vs-divider",{staticClass:"mt-8 mb-0"},[r("small",[e._v(e._s(e.$t("headers.contact")))])]),r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col md:w-1/2 w-full mt-5 auto-margin"},[r("vs-input",{staticClass:"mt-5 w-full",attrs:{"val-icon-danger":"clear",danger:e.errors.has("phone","step-2"),"danger-text":e.errors.first("phone","step-2"),"data-vv-as":e.$t("fields.phone").toLowerCase(),label:e.$t("fields.phone"),name:"phone",placeholder:"+48123456789"},model:{value:e.clinic.phone,callback:function(t){e.$set(e.clinic,"phone",t)},expression:"clinic.phone"}})],1)]),r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col md:w-1/2 w-full mt-5 auto-margin"},[r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"mt-5 w-full",attrs:{"val-icon-danger":"clear",danger:e.errors.has("email","step-2"),"danger-text":e.errors.first("email","step-2"),label:e.$t("fields.email"),"data-vv-as":e.$t("fields.email").toLowerCase(),name:"email",placeholder:"username@gmail.com"},model:{value:e.clinic.email,callback:function(t){e.$set(e.clinic,"email",t)},expression:"clinic.email"}})],1)]),r("vs-divider",{staticClass:"mt-8 mb-0"},[r("small",[e._v(e._s(e.$t("fields.address")))])]),r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col md:w-1/2 w-full auto-margin mb-4"},[r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{"val-icon-danger":"clear",danger:e.errors.has("address1","step-2"),"danger-text":e.errors.first("address1","step-2"),label:e.$t("fields.address"),"data-vv-as":e.$t("fields.address").toLowerCase(),placeholder:e.$t("placeholders.address"),name:"address1"},model:{value:e.clinic.address1,callback:function(t){e.$set(e.clinic,"address1",t)},expression:"clinic.address1"}})],1)]),r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col md:w-1/2 w-full mt-5 auto-margin",class:e.errors.first("country","step-2")&&"has-errors"},[r("label",{staticClass:"text-sm"},[e._v(e._s(e.$t("headers.country")))]),r("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticStyle:{background:"#fff"},attrs:{name:"country",options:e.countries,"data-vv-as":"country"},scopedSlots:e._u([{key:"option",fn:function(t){return[r("country-flag",{staticStyle:{position:"relative",top:"3px",right:"4px"},attrs:{country:t.value.toLowerCase(),size:"small"}}),e._v("\n                                "+e._s(t.label)+"\n                            ")]}}]),model:{value:e.clinic.country,callback:function(t){e.$set(e.clinic,"country",t)},expression:"clinic.country"}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("country","step-2"),expression:"errors.has('country', 'step-2')"}],staticClass:"con-text-validation span-text-validation-danger vs-input--text-validation-span v-enter-to",staticStyle:{height:"19px"}},[r("span",{staticClass:"span-text-validation"},[e._v("\n                                "+e._s(e.errors.first("country","step-2"))+"\n                            ")])])],1)]),r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col md:w-1/2 w-full mt-5 auto-margin"},[r("vs-input",{staticClass:"mt-5 w-full",attrs:{"val-icon-danger":"clear",danger:e.errors.has("zipcode","step-2"),"danger-text":e.errors.first("zipcode","step-2"),placeholder:e.$t("placeholders.zipcode"),label:e.$t("fields.zipcode"),name:"zipcode"},model:{value:e.clinic.zipcode,callback:function(t){e.$set(e.clinic,"zipcode",t)},expression:"clinic.zipcode"}})],1)]),r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col md:w-1/2 w-full mt-5 auto-margin"},[r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{danger:e.errors.has("city","step-2"),"danger-text":e.errors.first("city","step-2"),label:e.$t("fields.city"),placeholder:e.$t("placeholders.city"),name:"city","val-icon-danger":"clear"},model:{value:e.clinic.city,callback:function(t){e.$set(e.clinic,"city",t)},expression:"clinic.city"}})],1)]),r("vs-divider",{staticClass:"mt-8 mb-0"},[r("small",[e._v(e._s(e.$t("headers.legal")))])]),r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col md:w-1/2 w-full mt-5 auto-margin"},[r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|length:10",expression:"'required|numeric|length:10'"}],staticClass:"mt-5 w-full",attrs:{label:e.$t("fields.tax_id"),placeholder:"0123456789","val-icon-danger":"clear",danger:e.errors.has("tax_id","step-2"),"danger-text":e.errors.first("tax_id","step-2"),name:"tax_id"},model:{value:e.clinic.tax_id,callback:function(t){e.$set(e.clinic,"tax_id",t)},expression:"clinic.tax_id"}})],1)])],1)])],1)],1)},l=[],u=r("4c95"),d=r("2ee4"),p=(r("da93"),r("eea2")),f={computed:{reg_token:function(){return this.$route.params.reg_token},isInvitedView:function(){return"activateInvitedAccount"===this.$route.name}},components:{FormWizard:d["FormWizard"],TabContent:d["TabContent"],CountryFlag:p["a"]},props:{overValidateStep1:null,overValidateStep2:null},data:function(){return{formIndex:0,workspace_name:null,clinic:{country:{label:"Polska",value:"PL"}},clinicID:null}},methods:{clear:function(){this.formIndex++,this.workspace_name=null,this.$set(this.clinic,{}),this.clinicID=null},validateStep1:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.overValidateStep1){e.next=4;break}return e.next=3,this.overValidateStep1();case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,this.$validator.validateAll("step-1");case 6:if(!e.sent){e.next=24;break}return this.$set(this.clinic,"laima_email",this.workspace_name),t=this.isInvitedView?"/api/actor/invitee/activate/email/".concat(this.reg_token,"/"):"/api/actor/created/activate/email/".concat(this.reg_token,"/"),e.next=11,this.$http.post(t,JSON.stringify({workspace_name:this.workspace_name}),{headers:{Range:"post"}});case 11:if(r=e.sent,422!==r.status){e.next=19;break}return a=r.data,n=this.errors,Object.entries(a).forEach((function(e){var t=Object(s["a"])(e,2),r=t[0],a=t[1];a.forEach((function(e){n.add({scope:"step-1",field:r,msg:e})}))})),e.abrupt("return",!1);case 19:200!==r.status&&(a=r.data);case 20:if(!a){e.next=23;break}return this.$router.push({name:"fatal",query:{title:"Failed to activate account",message:a}}),e.abrupt("return",!1);case 23:return e.abrupt("return",!0);case 24:return e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validateStep2:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.overValidateStep2){e.next=4;break}return e.next=3,this.overValidateStep2();case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,this.$validator.validateAll("step-2");case 6:if(!e.sent){e.next=26;break}return this.clinic["country"]=this.clinic.country.value,e.next=10,this.$http.post("/api/clinic/",JSON.stringify(this.clinic),{headers:{Range:"post"}});case 10:if(t=e.sent,422!==t.status){e.next=19;break}return r=t.data,a=this.errors,r.name&&(r.workspace_name=r.name),Object.entries(r).forEach((function(e){var t=Object(s["a"])(e,2),r=t[0],n=t[1];n.forEach((function(e){a.add({scope:"step-2",field:r,msg:e})}))})),e.abrupt("return",!1);case 19:200!==t.status&&(r=t.data);case 20:if(!r){e.next=23;break}return this.$router.push({name:"fatal",query:{title:"Failed to configure account",message:r}}),e.abrupt("return",!1);case 23:return this.clinicID=t.data.id,u["a"].logOut({reason:"configured",to:"/"}),e.abrupt("return",!0);case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},h=f,m=(r("1516"),r("2877")),v=Object(m["a"])(h,c,l,!1,null,null,null),g=v.exports,b={components:{FirstFormClinic:g},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isInvitedView){e.next=4;break}return e.next=3,this.sleep(2);case 3:this.$router.push("/");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{reg_token:function(){return this.$route.params.reg_token},isInvitedView:function(){return"activateInvitedAccount"===this.$route.name}},data:function(){return{workspace_name:""}},methods:{validateAndLogin:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validate();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return r=this.isInvitedView?"/api/actor/invitee/activate/email/".concat(this.reg_token,"/"):"/api/actor/created/activate/email/".concat(this.reg_token,"/"),e.next=8,this.$http.post(r,JSON.stringify({workspace_name:this.workspace_name}),{headers:{Range:"post"}});case 8:if(a=e.sent,422!==a.status){e.next=15;break}return n=a.data,i=this.errors,e.abrupt("return",Object.entries(n).forEach((function(e){var t=Object(s["a"])(e,2),r=t[0],a=t[1];a.forEach((function(e){i.add({field:r,msg:e})}))})));case 15:200!==a.status&&(n=a.data);case 16:if(!n){e.next=18;break}return e.abrupt("return",this.notifyError(this.$t("notifs.account_activation_failed")));case 18:o["a"].$emit("login",{});case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},_=b,w=(r("c4d4"),Object(m["a"])(_,a,n,!1,null,null,null));t["default"]=w.exports},fa5d:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h4",{staticClass:"mt-4"},[e._v(e._s(e.$t("headers.invitee_question")))]),r("p",{staticClass:"mt-6 mb-6"},[e._v("\n        "+e._s(e.$t("headers.invitation_desc"))+"\n    ")]),r("form",[r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col md:w-1/2 w-full mt-5 "},[r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"w-full",attrs:{type:"email",label:e.$t("fields.email"),name:"email","val-icon-danger":"clear",danger:e.errors.has("email"),"danger-text":e.errors.first("email")},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)]),r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col md:w-1/2 w-full mt-5"},[r("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full select-large",attrs:{name:"scope","danger-text":e.errors.first("scope"),danger:e.errors.has("scope"),label:e.$t("fields.scopes")},model:{value:e.scope,callback:function(t){e.scope=t},expression:"scope"}},e._l(e.$store.state.auth.scopes,(function(e){return r("vs-select-item",{key:e,staticClass:"w-full",attrs:{value:e,text:e}})})),1)],1)]),r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col md:w-1/2 w-full mt-5"},[r("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full select-large",attrs:{multiple:"",name:"workspaces","danger-text":e.errors.first("workspaces"),danger:e.errors.has("workspaces"),label:e.$t("fields.clinics")},model:{value:e.workspaces,callback:function(t){e.workspaces=t},expression:"workspaces"}},e._l(e.$store.state.auth.availableWorkspaces,(function(e){return r("vs-select-item",{key:e.id,staticClass:"w-full",attrs:{value:e.id,text:e.name}})})),1)],1)]),r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col w-full"},[r("div",{staticClass:"mt-8 flex flex-wrap items-center justify-end"},[r("vs-button",{staticClass:"ml-auto mt-2",attrs:{disabled:!e.formValid},on:{click:e.submit}},[e._v(e._s(e.$t("buttons.submit")))]),r("vs-button",{staticClass:"ml-4 mt-2",attrs:{type:"border",color:"warning"},on:{click:e.resetData}},[e._v(e._s(e.$t("buttons.reset")))])],1)])])])])},n=[],s=(r("8615"),r("6762"),r("2fdb"),r("768b")),i=(r("ffc1"),r("ac6a"),r("7f7f"),r("6b54"),r("96cf"),r("3b8d")),o={data:function(){return{email:"",scope:"",workspaces:""}},computed:{formValid:function(){return!this.errors.any()}},methods:{submit:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validate();case 2:if(!this.formValid){e.next=9;break}return this.$store.commit("STATE_LOADING_ON",{}),e.next=6,this.$http.post("/api/actor/invite/",JSON.stringify({email:this.email,scope:this.scope,workspaces:this.workspaces.map((function(e){return e.toString()}))}),{headers:{Range:"post"}});case 6:t=e.sent,this.$store.commit("STATE_LOADING_OFF",{}),t.status>=400?(r=t.data,a=this.$validator.fields.items.map((function(e){return e.name})),Object.entries(r).forEach((function(e){var t=Object(s["a"])(e,2),i=t[0],o=t[1];a.includes(i)&&(Array.isArray(o)||(o=Object.values(o)),o.forEach((function(e){Array.isArray(e)&&(e=e.join(", ")),n.errors.add({field:i,msg:e})})),delete r[i])})),this.notifyError(this.$t("notifs.op_failed"))):(this.notifySuccess(this.$t("notifs.sent_invitation_to",{email:this.email})),this.$router.push({name:"staff-list"}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetData:function(){this.email="",this.scope=""}}},c=o,l=r("2877"),u=Object(l["a"])(c,a,n,!1,null,null,null);t["default"]=u.exports},fb3c:function(e,t,r){"use strict";r("f335")},fb70:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vx-card",[r("div",{staticClass:"tabs-container",attrs:{slot:"no-body"},slot:"no-body"},[r("vs-tabs",{key:e.keyIndex,ref:"tabs",staticClass:"open-overflow",attrs:{alignment:"left",position:"top"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("vs-tab",{staticClass:"open-overflow",attrs:{label:e.$t("headers.clinic_details"),"icon-pack":"feather",icon:"icon-info"}},[r("div",{staticClass:"tab-text open-overflow"},[r("edit-clinic")],1)]),r("vs-tab",{attrs:{label:e.$t("headers.pref"),"icon-pack":"feather",icon:"icon-settings"}},[r("div",{staticClass:"tab-text"},[r("clinic-preferences")],1)]),r("vs-tab",{attrs:{label:e.$t("headers.procedures"),"icon-pack":"feather",icon:"icon-heart"}},[r("div",{staticClass:"tab-text"},[r("procedures")],1)]),r("vs-tab",{attrs:{label:e.$t("headers.widget"),"icon-pack":"feather",icon:"icon-box"}},[r("div",{staticClass:"tab-text"},[r("widget-settings",{attrs:{clinic:e.clinic}})],1)])],1)],1)])},n=[],s=(r("7514"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"clinic-edit"},[r("laima-form",{attrs:{formScope:"step-1",title:e.$t("headers.basics"),modelsContainer:e.editedClinic,formFields:e.basicFields},on:{updated:e.onUpdated}}),r("laima-form",{staticClass:"mt-8",attrs:{formScope:"step-2",title:e.$t("headers.contact"),modelsContainer:e.editedClinic,formFields:e.contactFields},on:{updated:e.onUpdated}}),r("laima-form",{ref:"add",staticClass:"mt-8",attrs:{formScope:"step-3",title:e.$t("fields.address"),modelsContainer:e.editedClinic,formFields:e.addressFields},on:{updated:e.onUpdated}}),r("laima-form",{staticClass:"mt-8",attrs:{formScope:"step-4",title:"Legal",modelsContainer:e.editedClinic,formFields:e.legalFields},on:{updated:e.onUpdated}})],1)}),i=[],o=r("768b"),c=(r("96cf"),r("3b8d")),l=(r("7f7f"),r("ac6a"),r("ffc1"),r("eea2")),u={components:{CountryFlag:l["a"]},mounted:function(){window.clinics=this,this.$store.state.core.clinics[0]&&this.parseClinics()},computed:{inEdit:function(){return!!Object.entries(this.editedClinic)[0]},clinicID:function(){return this.$store.state.auth.selectedWorkspace.id},basicFields:function(){return[{name:"name",type:"text",label:this.$t("fields.clinic_name"),placeholder:this.$t("placeholders.clinic_name"),validators:{required:!0},submitters:["blur","enter"]},{name:"description",label:this.$t("fields.clinic_desc"),placeholder:this.$t("placeholders.clinic_desc"),type:"textarea",submitters:["blur"]},{name:"office_count",type:"number",label:this.$t("fields.office_count"),validators:{required:!0,numeric:!0,min_value:1},submitters:["blur","enter"]}]},contactFields:function(){return[{name:"phone",type:"tel",label:this.$t("fields.clinic_phone"),placeholder:this.$t("placeholders.phone"),validators:{required:!0},submitters:["blur","enter","debounce"]},{name:"email",type:"email",label:this.$t("fields.clinic_email"),validators:{required:!0,email:!0},placeholder:this.$t("placeholders.email"),submitters:["blur","enter"]}]},addressFields:function(){return[{name:"address1",label:this.$t("fields.address"),type:"text",validators:{required:!0},placeholder:this.$t("placeholders.address"),submitters:["blur","enter"]},{name:"country",label:this.$t("headers.country"),type:"select",options:this.countries,validators:{required:!0},submitters:["change"]},{name:"zipcode",label:this.$t("fields.zipcode"),type:"text",validators:{required:!0},placeholder:this.$t("placeholders.zipcode"),submitters:["blur","enter"]},{name:"city",label:this.$t("fields.city"),type:"text",validators:{required:!0},placeholder:this.$t("placeholders.city"),submitters:["blur","enter"]}]},legalFields:function(){return[{name:"tax_id",type:"text",label:this.$t("fields.tax_id"),required:!0,placeholder:"123345678",validators:{required:!0,numeric:!0,length:10},submitters:["blur","enter"]}]}},data:function(){return{origClinic:null,editedClinic:{}}},methods:{parseClinics:function(){var e=this,t=this.$store.state.core.clinics,r=t.find((function(t){return t.id==e.clinicID}));this.editedClinic=this.$clone(r),this.origWorkspaceName=r.name},onUpdated:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i,c,l,u=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=Object(o["a"])(t,2),a=r[0],n=r[1],s=this.$store.state.core.clinics.find((function(e){return e.id==u.clinicID})),!a.name||this.origWorkspaceName===a.name){e.next=9;break}return i={select:{id:s.id},payload:a},e.next=6,this.requestResource("patch_workspace",{vm:this,data:i});case 6:return c=e.sent,200===c.status&&(this.$store.commit("core/PATCH_CLINIC",{clinicID:this.clinicID,payload:a}),l=JSON.parse(window.localStorage.getItem("app.laima.actorInfo")),l.workspaces[s.id]=a.name,this.$store.dispatch("auth/setActorContext",[l,"no-meta",this]),n()),e.abrupt("return");case 9:this.$store.dispatch("core/editClinic",[this,this.editedClinic.id,a,n]);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},watch:{"$store.state.core.clinics":function(e){e&&this.parseClinics()}}},d=u,p=(r("d054"),r("2877")),f=Object(p["a"])(d,s,i,!1,null,null,null),h=f.exports,m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"data-list",attrs:{id:"procedures-list-view"}},[r("add-new-procedure",{ref:"addproc",attrs:{addNewProcedure:e.addProcSidebar},on:{"update:addNewProcedure":function(t){e.addProcSidebar=t},"update:add-new-procedure":function(t){e.addProcSidebar=t}}}),r("vs-table",{ref:"table",attrs:{search:"",data:e.procedures,"max-items":e.itemsPerPage},on:{selected:e.onSelectedProcedure},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data;return[r("tbody",{staticClass:"table-body"},e._l(a,(function(t,a){return r("vs-tr",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!tr.hidden"}],key:a,attrs:{data:t}},[r("vs-td",[e.selectedProcedure.id!==t.id||t.legacy?r("p",{staticClass:"font-medium truncate"},[e._v(e._s(t.name))]):e.selectedProcedure.id===t.id?r("lm-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"text-black",attrs:{danger:e.$validator.errors.has("name"),"data-vv-as":e.$t("fields.proc_name").toLowerCase(),autocomplete:"off",name:"name",type:"text"},on:{blur:function(r){return e.updateField(t,"name")},keypress:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.updateField(t,"name")}},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"tr.name"}}):e._e()],1),r("vs-td",[r("p",{staticClass:"font-normal truncate"},[e._v(e._s(t.category))])]),r("vs-td",[e.selectedProcedure.id!==t.id?r("p",{staticClass:"font-normal truncate"},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.minprice)+"\n\t\t\t\t\t\t")]):e.selectedProcedure.id===t.id?[r("div",{staticClass:"relative"},[r("div",{staticClass:"absolute validation-msg"},[r("v-popover",{directives:[{name:"show",rawName:"v-show",value:e.$validator.errors.has("minprice"),expression:"$validator.errors.has('minprice')"}],ref:"tooltip",refInFor:!0,attrs:{popoverBaseClass:"tooltip",popoverArrowClass:"border-danger tooltip-arrow popover-arrow",popoverInnerClass:"bg-danger rounded-full text-white tracking-normal text-sm p-1 px-2",trigger:"hover"}},[r("feather-icon",{staticClass:"text-danger animated pulse delay-1s infinite",attrs:{icon:"AlertCircleIcon"}}),r("template",{slot:"popover"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(e.$validator.errors.first("minprice"))+"\n\t\t\t\t\t\t\t\t\t\t\t")])],2)],1)]),r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:5|max_value:10000",expression:"'required|numeric|min_value:5|max_value:10000'"}],staticClass:"text-black",staticStyle:{"max-width":"90px"},attrs:{danger:e.$validator.errors.has("minprice"),"data-vv-as":e.$t("headers.min_price").toLowerCase(),autocomplete:"off",min:"5",name:"minprice",step:"5",type:"number"},on:{blur:function(r){return e.updateField(t,"minprice")},keypress:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.updateField(t,"minprice")}},model:{value:t.minprice,callback:function(r){e.$set(t,"minprice",r)},expression:"tr.minprice"}})]:e._e()],2),r("vs-td",[e.selectedProcedure.id!==t.id?[parseInt(t.maxprice)?r("p",{staticClass:"font-normal truncate"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.maxprice)+"\n\t\t\t\t\t\t\t")]):r("p",[e._v("\n\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t")])]:[r("div",{staticClass:"relative"},[r("div",{staticClass:"absolute validation-msg"},[e.$validator.errors.has("maxprice")?r("v-popover",{ref:"tooltip",refInFor:!0,attrs:{popoverBaseClass:"tooltip",popoverArrowClass:"border-danger tooltip-arrow popover-arrow",popoverInnerClass:"bg-danger rounded-full text-white tracking-normal text-sm p-1 px-2",trigger:"hover"}},[r("feather-icon",{staticClass:"text-danger animated pulse delay-1s infinite",attrs:{icon:"AlertCircleIcon"}}),r("template",{slot:"popover"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(e.$validator.errors.first("maxprice"))+"\n\t\t\t\t\t\t\t\t\t\t\t")])],2):r("feather-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("misc.maxprice_note"),expression:"$t('misc.maxprice_note')"}],attrs:{icon:"InfoIcon",svgClasses:"text-primary"}})],1)]),r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:0|max_value:10000",expression:"'required|numeric|min_value:0|max_value:10000'"}],staticClass:"text-black",staticStyle:{"max-width":"90px"},attrs:{danger:e.$validator.errors.has("maxprice"),"data-vv-as":e.$t("headers.max_price").toLowerCase(),autocomplete:"off",min:"5",name:"maxprice",step:"5",type:"number"},on:{blur:function(r){return e.updateField(t,"maxprice")},keypress:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.updateField(t,"maxprice")}},model:{value:t.maxprice,callback:function(r){e.$set(t,"maxprice",r)},expression:"tr.maxprice"}})]],2),r("vs-td",[e.selectedProcedure.id!==t.id?r("p",{staticClass:"font-normal truncate"},[e._v(e._s(t.duration))]):r("vs-input",{directives:[{name:"debounce",rawName:"v-debounce:300ms",value:e.partial(e.updateField,t,"duration"),expression:"partial(updateField, tr, 'duration')",arg:"300ms"},{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:0|max_value:10000",expression:"'required|numeric|min_value:0|max_value:10000'"}],staticClass:"text-black",staticStyle:{"max-width":"90px"},attrs:{danger:e.$validator.errors.has("duration"),"data-vv-as":e.$t("fields.duration").toLowerCase(),min:e.default_visit_interval,step:e.default_visit_interval,autocomplete:"off",name:"duration",type:"number"},model:{value:t.duration,callback:function(r){e.$set(t,"duration",r)},expression:"tr.duration"}})],1),r("vs-td",{staticClass:"whitespace-no-wrap"},[r("feather-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("headers.remove_procedure"),expression:"$t('headers.remove_procedure')"}],staticClass:"mr-4",attrs:{icon:"Trash2Icon",svgClasses:"w-6 h-6 hover:text-danger stroke-current"},on:{click:function(r){return r.stopPropagation(),e.removeProcedurePrompt(t,r)}}})],1)],1)})),1)]}}]),model:{value:e.selectedProcedure,callback:function(t){e.selectedProcedure=t},expression:"selectedProcedure"}},[r("div",{staticClass:"ml-0",attrs:{slot:"header"},slot:"header"},[r("div",{staticClass:"flex flex-wrap-reverse items-center data-list-btn-container"},[r("vs-button",{staticClass:"mb-4 cursor-pointer flex items-center justify-center text-lg font-medium",attrs:{color:"success"},on:{click:function(t){e.addProcSidebar=!0}}},[r("feather-icon",{staticStyle:{top:"3px",right:"5px"},attrs:{icon:"PlusCircleIcon",svgClasses:"w-5 h-5 relative"}}),r("span",{staticClass:"ml-2 text-base"},[e._v(e._s(e.$t("buttons.add_proc")))])],1)],1)]),r("template",{slot:"thead"},[r("vs-th",{attrs:{"sort-key":"procedure_name"}},[e._v(e._s(e.$t("fields.proc_name")))]),r("vs-th",{attrs:{"sort-key":"category"}},[e._v(e._s(e.$t("headers.category")))]),r("vs-th",{attrs:{"sort-key":"price"}},[e._v(e._s(e.$t("headers.price"))+" ("+e._s(e.$store.state.auth.currency)+")")]),r("vs-th",{attrs:{"sort-key":"maxprice"}},[e._v(e._s(e.$t("fields.maxprice"))+" ("+e._s(e.$store.state.auth.currency)+")")]),r("vs-th",{attrs:{"sort-key":"duration"}},[e._v(e._s(e.$t("fields.proc_duration"))+" (min)")]),r("vs-th",[e._v("Action")])],1)],2)],1)},v=[],g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vs-sidebar",{ref:"sidebar",staticClass:"sidebarx add-new-procedure",attrs:{"position-right":"","vs-custom-content":"","click-not-close":"",parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:e.sidebarActive,callback:function(t){e.sidebarActive=t},expression:"sidebarActive"}},[r("div",{staticClass:"header-sidebar",attrs:{slot:"header"},slot:"header"},[r("div",{staticClass:"flex justify-between w-full h-full bg-primary text-white"},[r("h5",{staticClass:"pl-4 flex self-center text-white font-light"},[e._v(e._s(e.$t("headers.add_proc"))+" ")]),r("feather-icon",{staticClass:"pr-4 text-white cursor-pointer",attrs:{svgClasses:"w-6 h-6",icon:"XIcon"},on:{click:function(t){e.sidebarActive=!1}}})],1)]),r("div",{attrs:{id:"laima-form-container"}},[r("laima-form",{key:e.laimaFormKey,ref:"lf",attrs:{size:"normal",modelsContainer:e.initialData,formFields:e.slotFields,onSubmit:e.submitProcedure},scopedSlots:e._u([{key:"footer",fn:function(t){var a=t.callback;return[r("vs-button",{staticClass:"w-full rounded-none",attrs:{size:"large",type:"filled",color:"primary"},on:{click:a}},[e._v(e._s(e.$t("buttons.save")))])]}}])})],1)])},b=[],_=(r("456d"),{props:{addNewProcedure:{default:!1}},methods:{closeSideBar:function(){this.sidebarActive=!1,this.laimaFormKey++},submitProcedure:function(e){if(0!=e.maxprice&&parseInt(e.minprice)>parseInt(e.maxprice))return this.$refs.lf.$validator.errors.add({scope:"step-1",field:"maxprice",msg:this.$t("misc.must_be_gte",{field:this.$t("headers.max_price").toLowerCase(),otherField:this.$t("headers.min_price").toLowerCase()})});this.$store.dispatch("core/addNewProcedure",[e,this])}},computed:{initialData:function(){return{duration:this.default_visit_interval}},slotFields:function(){return[{name:"category",label:this.$t("fields.procedure_category"),options:this.categories,type:"select",validators:{required:!0}},{name:"name",label:this.$t("fields.proc_name"),placeholder:this.$t("misc.proc_example"),type:"text",validators:{required:!0}},{name:"minprice",label:this.$t("headers.min_price")+" (".concat(this.currency,")"),type:"number",placeholder:"0",validators:{required:!0,numeric:!0,min_value:5,max_value:1e4}},{name:"maxprice",helpText:this.$t("misc.maxprice_note"),label:this.$t("headers.max_price")+" (".concat(this.currency,")"),type:"number",placeholder:"0",validators:{required:!0,numeric:!0,min_value:0,max_value:1e4}},{name:"duration",label:this.$t("fields.duration"),helpText:this.$t("headers.est_proc_duration"),type:"fancyNumber",classes:["duration-input"],step:this.default_visit_interval,min:this.default_visit_interval,validators:{required:!0}},{name:"tax",label:this.$t("headers.tax_rate"),placeholder:"0",type:"number",validators:{required:!0,numeric:!0,min_value:0,max_value:90}}]},sidebarActive:{get:function(){return this.addNewProcedure},set:function(e){this.$emit("update:addNewProcedure",e)}},categories:function(){return Object.keys(this.$store.state.core.procedureTemplates).map((function(e){return{text:e,value:e}}))},clinicID:function(){return this.$store.state.auth.selectedWorkspace.id},clinic:function(){var e=this;return this.$store.state.core.clinics.find((function(t){return t.id==e.clinicID}))},currency:function(){return this.clinic.currency||this.$store.state.auth.currency},default_visit_interval:function(){return this.clinic.default_visit_interval}},data:function(){return{laimaFormKey:0}},mounted:function(){window.yy=this}}),w=_,y=(r("8c65"),Object(p["a"])(w,g,b,!1,null,null,null)),x=y.exports,C={components:{AddNewProcedure:x},data:function(){return{itemsPerPage:6,addProcSidebar:!1,selectedProcedure:{}}},computed:{default_visit_interval:function(){var e=this.$store.getters["core/activeClinic"]();return e&&e.default_visit_interval},procedures:function(){return this.$clone(this.$store.state.core.clinicProcedures)}},methods:{onSelectedProcedure:function(e){},addNewProcedure:function(){},removeProcedurePrompt:function(e){this.$vs.dialog({text:this.$t("misc.delete_procedure_prompt"),acceptText:this.$t("buttons.accept"),cancelText:this.$t("buttons.cancel"),type:"confirm",color:"danger",title:this.$t("headers.remove_procedure"),accept:this.partial(this.removeProcedure,e)})},removeProcedure:function(e){this.$store.dispatch("core/removeProcedure",[this,e])},updateField:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(a=e.sent,!a){e.next=6;break}if(!(0!=t.maxprice&&parseInt(t.minprice)>parseInt(t.maxprice))){e.next=6;break}return e.abrupt("return",this.$validator.errors.add({field:"maxprice",msg:this.$t("misc.must_be_gte",{field:this.$t("headers.max_price").toLowerCase(),otherField:this.$t("headers.min_price").toLowerCase()})}));case 6:n=t[r],console.log(n),s=n,"minprice"===r||"maxprice"===r?s=n+" "+this.$store.state.auth.currency:"duration"===r&&(s=n+" min"),"name"!==r||t.legacy?this.$store.dispatch("core/updateClinicProcedure",[t.id,r,n,s,this]):this.$store.dispatch("core/updateProcedureTemplate",[t.code,t.id,r,n,s,this]);case 11:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},mounted:function(){window.proc=this}},S=C,k=(r("fb3c"),Object(p["a"])(S,m,v,!1,null,null,null)),O=k.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"schedule-settings"},[r("laima-form",{ref:"laimaForm",attrs:{formScope:"step-1",modelsContainer:e.clinicContainer,formFields:e.formFields,title:e.$t("headers.visit_config")},on:{updated:e.onUpdated}}),r("opening-hours",{staticClass:"mt-8",attrs:{clinic:e.clinic}})],1)},E=[],D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("laima-form",{ref:"laimaform",attrs:{formScope:"step-1",title:e.$t("headers.business_hours"),modelsContainer:e.hoursModel,formFields:e.formFields},scopedSlots:e._u([{key:"before-fields",fn:function(){return[e.lastSlotDate?r("vs-alert",{staticClass:"form-alert flex warning pl-4",attrs:{active:"true","icon-pack":"feather",icon:"icon-alert-triangle"}},[r("div",{staticClass:"pl-4"},[r("span",{staticClass:"alert-text w-100 font-normal"},[e._v("\n                        "+e._s(e.$t("headers.bh_changes_warning"))+"\n                        "),"en"==e.$i18n.locale?r("span",{staticClass:"text-warning"},[e._v(e._s(e.format(e.lastSlotDate,"iiii', the' do 'of' LLLL Y"))+".")]):r("span",{staticClass:"text-warning"},[e._v(e._s(e.format(e.lastSlotDate,"ii/LL/Y",{locale:e.currentLocale}))+".")])]),r("span",{staticClass:"alert-text w-100 flex mt-2 font-normal"},[e._v("\n                        "+e._s(e.$t("headers.bh_changes_disclaimer"))+"\n                    ")])])]):e._e(),r("div",{staticClass:"fields-box py-2"},[r("div",{staticClass:"field-wrapper flex items-center"},[r("div",{staticClass:"field-desc relative"},[r("div",{staticClass:"field-label relative pl-2"},[e._v("\n                            "+e._s(e.$t("headers.apply_hrs_to_all"))+"\n                        ")]),r("div",{staticClass:"field-help pl-2"},[e._v("\n                            "+e._s(e.$t("headers.apply_the_same_to_all"))+"\n                        ")])]),r("div",{staticClass:"field-value-wrap "},[r("div",{staticClass:"field-control items-center"},[r("div",{staticClass:"field-value"},[r("div",{staticClass:"flex justify-around"},[r("vs-switch",{attrs:{color:"success"},model:{value:e.applyToAllDays,callback:function(t){e.applyToAllDays=t},expression:"applyToAllDays"}})],1)])]),e.applyToAllDays?r("div",{staticClass:"field-control items-center mt-8"},[r("div",{staticClass:"field-value"},[r("time-range",{directives:[{name:"validate",rawName:"v-validate",value:{range:!0},expression:"{range: true}"}],attrs:{name:"business hours",errorsArray:e.$validator.errors.first("business hours","step-1")},model:{value:e.commonHours,callback:function(t){e.commonHours=t},expression:"commonHours"}})],1)]):e._e()])])]),r("vs-alert",{staticClass:"form-alert flex info pl-4",attrs:{active:"true","icon-pack":"feather",icon:"icon-info"}},[r("div",{staticClass:"pl-4"},[r("span",{staticClass:"alert-text font-normal w-100",staticStyle:{color:"#1c658a"}},[e._v("\n                        "+e._s(e.$t("headers.disabled_days_disclaimer"))+"\n                    ")])])])]},proxy:!0},{key:"label",fn:function(t){var a=t.item;return[r("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.isDisabled(a)&&e.$t("misc.include_day_in_all")||e.$t("misc.remove_day_from_all"),classes:"text-sm tracking-normal"},expression:"{content: isDisabled(item) && $t('misc.include_day_in_all') || $t('misc.remove_day_from_all'), classes: 'text-sm tracking-normal'}"}]},[r("input",{directives:[{name:"validate",rawName:"v-validate",value:"included:true,false",expression:"'included:true,false'"}],attrs:{type:"hidden",name:"hidden"+a.name}}),r("vs-checkbox",{attrs:{"icon-pack":"feather",icon:"icon-check",color:"primary",value:!e.isDisabled(a)},on:{input:function(t){return e.flipDaySwitch(a)}}})],1),r("div",{staticClass:"ml-4 flex items-center",class:e.isDisabled(a)&&"opacity-25"},[e._v(e._s(a.label))])]}},{key:"fieldcontrol",fn:function(t){var a=t.item;return[r("div",{staticClass:"field-value"},[r("time-range",{directives:[{name:"validate",rawName:"v-validate",value:{range:!0},expression:"{range: true}"}],attrs:{errorsArray:e.$validator.errors.first(a.name,"step-1"),"data-vv-as":a.label||a.name,disabled:e.applyToAllDays||a.disabled||!1,name:a.name},on:{input:e.updatedField},model:{value:e.hoursModel[a.name],callback:function(t){e.$set(e.hoursModel,a.name,t)},expression:"hoursModel[item.name]"}})],1)]}}])})},T=[],I=r("e19d"),j=r("b166"),A=r("a089"),R=["0","1","2","3","4","5"],P={props:["clinic"],components:{TimeRange:I["a"]},watch:{commonHours:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validate("step-1.business hours");case 2:if(r=e.sent,r){e.next=5;break}return e.abrupt("return");case 5:return Object.entries(this.hoursModel).forEach((function(e,r){e[0]&&a.$set(a.hoursModel,r,t)})),e.next=8,this.updatedField();case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},computed:{clinicID:function(){return this.$store.state.auth.selectedWorkspace.id},currentLocale:function(){return this.locales[this.$i18n.locale]},formFields:function(){return[{name:"0",label:this.$t("datetime.mon"),type:"timerange",disabled:!this.hoursModel["0"][0]},{name:"1",label:this.$t("datetime.tue"),type:"timerange",disabled:!this.hoursModel["1"][0]},{name:"2",label:this.$t("datetime.wed"),type:"timerange",disabled:!this.hoursModel["2"][0]},{name:"3",label:this.$t("datetime.thu"),type:"timerange",disabled:!this.hoursModel["3"][0]},{name:"4",label:this.$t("datetime.fri"),type:"timerange",disabled:!this.hoursModel["4"][0]},{name:"5",label:this.$t("datetime.sat"),type:"timerange",disabled:!this.hoursModel["5"][0]}]}},data:function(){var e,t=this;return e="{}"===JSON.stringify(this.clinic.business_hours)?Object.fromEntries(R.map((function(e){return[e,[]]}))):Object.fromEntries(R.map((function(e){return[e,t.clinic.business_hours[e]||[]]}))),{format:j["a"],hoursModel:e,locales:{pl:A["a"]},applyToAllDays:!1,lastSlotDate:null,commonHours:["08:00","17:00"]}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.bbb=this,e.next=3,this.requestResource("list_scheduleslot",{data:{},headers:{Overwrite:this.$store.state.auth.selectedWorkspace.id},query:{order_by:"daily_range",limit:1,order_dir:"desc",select:"daily_range"}});case 3:t=e.sent,200===t.status&&(this.lastSlotDate=new Date(t.data.data[0].daily_range[0]));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{isDisabled:function(e){return!this.hoursModel[e.name][0]},updatedField:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll("step-1");case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return r={business_hours:this.$refs.laimaform.localModels},e.next=8,this.requestResource("put_clinic",{vm:this,data:{select:{id:this.clinicID},payload:r},headers:{Overwrite:this.clinicID}});case 8:a=e.sent,200===a.status&&(this.$store.commit("core/PATCH_CLINIC",{clinicID:this.clinicID,payload:r}),this.notifySuccess(this.$t("notifs.changed_bh")));case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),flipDaySwitch:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.hoursModel[t.name][0]){e.next=6;break}return this.$set(this.hoursModel,t.name,["08:00","17:00"]),e.next=4,this.updatedField();case 4:e.next=9;break;case 6:return this.$set(this.hoursModel,t.name,[]),e.next=9,this.updatedField();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},M=P,L=Object(p["a"])(M,D,T,!1,null,null,null),N=L.exports,H={components:{OpeningHours:N},computed:{clinicContainer:function(){var e=this;return this.$clone(this.$store.state.core.clinics.find((function(t){return t.id==e.clinicID})))},clinic:function(){var e=this;return this.$clone(this.$store.state.core.clinics.find((function(t){return t.id==e.clinicID})))},clinicID:function(){return this.$store.state.auth.selectedWorkspace.id},formFields:function(){return[{name:"default_visit_interval",type:"number",label:this.$t("fields.default_visit_interval"),helpText:this.$t("help_texts.default_visit_interval"),placeholder:"e.g. 30",validators:{required:!0,numeric:!0}},{name:"currency",type:"select",label:this.$t("fields.def_currency"),options:["CHF","EUR","PLN","USD"].map((function(e){return{value:e,text:e}}))},{name:"send_confirmation_before",type:"number",label:this.$t("fields.send_confirmation_before"),helpText:this.$t("help_texts.send_confirmation_before"),placeholder:"e.g. 1",validators:{required:!0,numeric:!0,min_value:1,max_value:4}}]}},methods:{onUpdated:function(e){var t=Object(o["a"])(e,2),r=t[0],a=t[1];this.$store.dispatch("core/editClinic",[this,this.clinic.id,r,a])}}},U=H,F=Object(p["a"])(U,$,E,!1,null,null,null),V=F.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("laima-form",{ref:"laimaForm",attrs:{formScope:"step-1",onSubmit:!0,modelsContainer:e.widgetContainer,formFields:e.formFields},on:{changed:e.onUpdated},scopedSlots:e._u([{key:"afterfield",fn:function(t){var a=t.item;return[e.widgetContainer.use_widget&&"website"===a.name&&e.widgetContainer.website?r("div",{staticClass:"con-vs-alert form-alert flex pl-4 con-vs-alert-primary con-icon",class:e.hasWidgetInstalled?"success":"warning"},[r("div",{staticClass:"vs-alert con-icon w-full"},[r("i",{staticClass:"vs-icon notranslate icon-scale icon-alert feather icon-refresh-cw text-black null cursor-pointer hover:text-grey-900",class:e.isVerifyingDomain&&"animated infinite rotated slow",on:{click:function(t){!e.isVerifyingDomain&&e.domainChanged()}}}),e.hasWidgetInstalled?r("div",{staticClass:"pl-4"},[r("div",{staticClass:"alert-text font-medium text-lg"},[e._v("\n                        "+e._s(e.$t("headers.widget_installed"))+".\n                    ")])]):r("div",{staticClass:"pl-4",style:e.isVerifyingDomain&&{opacity:.5}},[r("div",{staticClass:"alert-text font-medium text-lg"},[e._v("\n                        "+e._s(e.$t("headers.widget_not_installed"))+".\n                    ")]),r("div",{staticClass:"alert-text font-normal my-2"},[e._v("\n                        "+e._s(e.$t("headers.copy_script"))+".\n                    ")]),r("pre",{staticClass:"code-snippet rounded select-text"},[r("code",{staticClass:"inline-block bg-transparent"},[r("span",{staticClass:"token tag"},[r("span",{staticClass:"token tag"},[r("span",{staticClass:"token punctuation"},[e._v("<")]),e._v("script ")]),r("span",{staticClass:"token attr-name"},[e._v("src")]),r("span",{staticClass:"token attr-value"},[r("span",{staticClass:"token punctuation attr-equals"},[e._v("=")]),r("span",{staticClass:"token punctuation"},[e._v('"')]),e._v("https://cdn.statically.io/gh/laima-app/laimafront/dev/frameloader.min.js"),r("span",{staticClass:"token punctuation"},[e._v('"')])]),r("span",{staticClass:"token punctuation"},[e._v(">")])])])])])])]):e._e()]}},{key:"websiteBeforeValue",fn:function(){return[r("vs-select",{staticClass:"absolute",staticStyle:{"max-width":"85px","z-index":"1000",border:"none"},attrs:{name:"website"},model:{value:e.protocol,callback:function(t){e.protocol=t},expression:"protocol"}},[r("vs-select-item",{attrs:{value:"http://",text:"http://"}}),r("vs-select-item",{attrs:{value:"https://",text:"https://"}})],1)]},proxy:!0},{key:"use_widget",fn:function(){return[r("vs-switch",{attrs:{color:"success"},model:{value:e.widgetContainer.use_widget,callback:function(t){e.$set(e.widgetContainer,"use_widget",t)},expression:"widgetContainer.use_widget"}})]},proxy:!0},{key:"footer",fn:function(){return[r("div")]},proxy:!0}])})},B=[],W=(r("6762"),r("2fdb"),{props:["clinic"],data:function(){return{isVerifyingDomain:!1,protocol:"http://",widgetContainer:{use_widget:!1,widget_select_clinic:!1,procedures:[]}}},computed:{activeClinic:function(){return this.$store.getters["core/activeClinic"]()||{}},clinicsLen:function(){return this.$store.state.core.clinics.length},hasWidgetInstalled:function(){return this.activeClinic.widget_installed},formFields:function(){return[{name:"use_widget",type:"switch",label:this.$t("fields.use_widget"),helpText:this.$t("help_texts.use_widget")},{name:"widget_select_clinic",type:"switch",hidden:!this.widgetContainer.use_widget||!this.widgetContainer.website||1===this.clinicsLen,label:this.$t("fields.widget_select_clinic"),helpText:this.$t("help_texts.widget_select_clinic")},{name:"website",type:"text",hidden:!this.widgetContainer.use_widget,label:this.$t("fields.website"),helpText:this.$t("help_texts.website"),placeholder:this.$t("placeholders.website"),validators:{required:!0,url:!0}},{name:"procedures",type:"select",multiple:!0,hidden:!this.widgetContainer.use_widget,label:this.$t("headers.procedures"),helpText:this.$t("help_texts.widgets_procedures"),model:this.widgetContainer.procedures,options:this.procedures,validators:{required:!0}}]},procedures:function(){var e=this.$store.state.core.clinicProcedures||[];return e.map((function(e){return{value:e.id,text:e.name}}))}},mounted:function(){if(window.wid=this,this.$set(this.widgetContainer,"use_widget",!!this.activeClinic.domain),this.activeClinic.domain){var e=new URL(this.activeClinic.domain);this.protocol=(e&&e.protocol||"http:")+"//",this.$set(this.widgetContainer,"website",e.hostname)}var t=this.$store.state.core.clinicProcedures.filter((function(e){return e.in_widget})).map((function(e){return e.id}));this.widgetContainer.procedures=t},methods:{domainChanged:function(){var e=this;this.isVerifyingDomain=!0;var t=this.activeClinic.id,r=function(t){200===t.status&&(e.isVerifyingDomain=!1)},a=this.protocol+this.widgetContainer.website;this.$store.dispatch("core/verifyDomain",[t,a,this,r])},onUpdated:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i,c,l,u,d,p,f,h,m,v,g,b=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=Object(o["a"])(t,2),a=r[0],n=r[1],s=null,"procedures"===a&&(s=this.widgetContainer[a]),this.$set(this.widgetContainer,a,n),"widget_select_clinic"!==a){e.next=9;break}if(this.$store.dispatch("core/editClinic",[this,this.activeClinic.id,{widget_select_clinic:n},function(){b.notifySuccess("Changes saved")}]),!this.widgetContainer.website){e.next=8;break}return e.abrupt("return",this.domainChanged(new URL(this.protocol+n).origin));case 8:return e.abrupt("return");case 9:return e.next=11,this.$refs.laimaForm.$validator.validateAll("step-1");case 11:if(i=e.sent,i){e.next=14;break}return e.abrupt("return");case 14:if("website"!==a){e.next=21;break}return c=new URL(this.protocol+n),l=c.origin,u={domain:l},d=this.$t("notifs.set_clinic_url",{url:c.href}),this.$store.dispatch("core/editClinic",[this,this.activeClinic.id,u,function(){b.notifySuccess(d)}]),e.abrupt("return",this.domainChanged(l));case 21:if("procedures"!==a){e.next=30;break}return p=n.filter((function(e){return!s.includes(e)}))[0],f=s.filter((function(e){return!n.includes(e)}))[0],h=p||f,m=!!p,v=m?"added":"removed",g="notifs.".concat(v,"_widget_proc"),this.$store.dispatch("core/updateClinicProcedure",[h,"in_widget",m,null,this,function(){b.notifySuccess(b.$t(g,{proc:b.procedures.find((function(e){return e.value===h})).text}))},!0]),e.abrupt("return",this.domainChanged(origin));case 30:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},watch:{protocol:function(e,t){var r=this,a=this.widgetContainer.website;if(a){var n=t+a,s=e+a,i=this.$t("notifs.changed_clinic_url",{oldaddr:n,newaddr:s}),o={domain:s};this.$store.dispatch("core/editClinic",[this,this.activeClinic.id,o,function(){r.notifySuccess(i)}]),this.domainChanged(s)}},"widgetContainer.use_widget":function(e){var t=this;if(!e){var r={domain:null};this.$delete(this.widgetContainer,"website"),this.$store.dispatch("core/editClinic",[this,this.activeClinic.id,r,function(){t.notifySuccess(t.$t("notifs.widget_off"))}])}}}}),Y=W,z=(r("0f3f"),Object(p["a"])(Y,q,B,!1,null,null,null)),G=z.exports,K={created:function(){var e=this.$store.state.auth.selectedWorkspace.id;this.$store.state.core.procedureTemplates||this.$store.dispatch("core/fetchProcedureTemplates",{vm:this}),this.$store.state.core.clinicProcedures[0]||this.$store.dispatch("core/fetchClinicProcedures",{vm:this,clinicID:e})},components:{EditClinic:h,Procedures:O,ClinicPreferences:V,WidgetSettings:G},computed:{clinic:function(){var e=this;return this.$clone(this.$store.state.core.clinics.find((function(t){return t.id==e.clinicID})))}},data:function(){return{activeTab:0,keyIndex:0}},watch:{tabsPosition:function(){this.keyIndex++}}},J=K,X=(r("625e"),Object(p["a"])(J,a,n,!1,null,null,null));t["default"]=X.exports},fc94:function(e,t,r){},fe42:function(e,t,r){},ff0d:function(e,t,r){}});
//# sourceMappingURL=app.a0a7f668.js.map